!function(e){function t(t){for(var a,s,c=t[0],i=t[1],u=t[2],d=0,p=[];d<c.length;d++)s=c[d],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&p.push(r[s][0]),r[s]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);for(l&&l(t);p.length;)p.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,c=1;c<n.length;c++){var i=n[c];0!==r[i]&&(a=!1)}a&&(o.splice(t--,1),e=s(s.s=n[0]))}return e}var a={},r={4:0},o=[];function s(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise((function(t,a){n=r[e]=[t,a]}));t.push(n[2]=a);var o,c=document.createElement("script");c.charset="utf-8",c.timeout=120,s.nc&&c.setAttribute("nonce",s.nc),c.src=function(e){return s.p+""+({10:"txuploader.31ecd969",11:"wsuploader.31ecd969"}[e]||e)+"."+{10:"c84419bb933910ceda4f",11:"de571f5fff3bb6121e8a"}[e]+".js"}(e);var i=new Error;o=function(t){c.onerror=c.onload=null,clearTimeout(u);var n=r[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;i.message="Loading chunk "+e+" failed.\n("+a+": "+o+")",i.name="ChunkLoadError",i.type=a,i.request=o,n[1](i)}r[e]=void 0}};var u=setTimeout((function(){o({type:"timeout",target:c})}),12e4);c.onerror=c.onload=o,document.head.appendChild(c)}return Promise.all(t)},s.m=e,s.c=a,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(n,a,function(t){return e[t]}.bind(null,a));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="https://deo.shopeemobile.com/shopee/shopee-seller-live-vn/chateasy/",s.oe=function(e){throw console.error(e),e};var c=window.miniJsonp=window.miniJsonp||[],i=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var l=i;o.push([0,5,6,7,8,1,2,3,0,9]),n()}({"+iqz":function(e,t,n){"use strict";(function(e){n("I5cv"),n("RW0V"),n("ioFf"),n("0l/t"),n("mYba"),n("8+KV"),n("jm62"),n("WLL4"),n("HAE/");var a,r=n("pVnL"),o=n.n(r),s=n("QILm"),c=n.n(s),i=n("lwsE"),u=n.n(i),l=n("W8MJ"),d=n.n(l),p=n("PJYZ"),h=n.n(p),f=n("7W2i"),v=n.n(f),m=n("a1gu"),g=n.n(m),y=n("Nsbk"),b=n.n(y),S=n("lSNA"),R=n.n(S),E=(n("2Spj"),n("L9s1"),n("Z2Ku"),n("dZ+Y"),n("V+eJ"),n("f3/d"),n("q1tI")),O=n.n(E),k=n("17x9"),C=n.n(k),M=n("KmjB"),_=n("tvxL"),w=n("4j81"),I=n("h4gR"),j=n("XnKn"),T=n("LaU4"),P=n.n(T),N=n("Uek7"),x=n.n(N),D=n("Jitt"),q=n("s1zR"),L=n("B/Zq"),A=n("DI0R"),W=n("soV0"),B=n.n(W),F=["message","measure","imgCache","timeFlag","isScChat","isSubAccount","conversation","currentUser","currentBuyer","newMessageFlag","visitShopSellerCenterRequested","isLastSystemMessage","sendMessagesRequested","showFaqHistoryModal","videoInfo","fetchFaqMessagesRequested","showModal","closeModal","showWarningMessageIds"];function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){R()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function G(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=b()(e);if(t){var r=b()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return g()(this,n)}}var K=j.MessageTypes.MSG_TYPE_WEBVIEW,V=j.MessageTypes.MSG_TYPE_NOTIFICATION,Y=j.MessageTypes.MSG_TYPE_ORDER,X=j.MessageTypes.MSG_TYPE_OFFER,J=j.MessageTypes.MSG_TYPE_IMAGE,z=j.MessageTypes.MSG_TYPE_STICKER,Z=j.MessageTypes.MSG_TYPE_RATE_CARDS,Q=j.MessageTypes.MSG_TYPE_BUNDEL_DEAL,$=j.MessageTypes.MSG_TYPE_FLASH_SALE,ee=j.MessageTypes.MSG_TYPE_VOUCHER,te=j.MessageTypes.MSG_TYPE_CATEGORY,ne=j.MessageTypes.MSG_TYPE_PRODUCT_LIST,ae=j.MessageTypes.MSG_TYPE_ORDER_REVIEW_REMINDER,re=j.MessageTypes.MSG_TYPE_CART_REMINDER,oe=j.MessageTypes.MSG_TYPE_PRODUCT,se=j.MessageTypes.MSG_TYPE_VIDEO,ce=j.MessageTypes.MSG_TYPE_TEXT,ie=(a={},R()(a,Q,"bundle_deal_card"),R()(a,$,"flash_sale_card"),R()(a,ee,"claim_card"),R()(a,te,"product_category_card"),R()(a,ne,"product_list_card"),R()(a,oe,"product_card"),R()(a,ae,"rate_card"),R()(a,re,"cart_card"),R()(a,se,"video_play_thumbnail"),R()(a,J,"qrcode_alert"),a),ue=["timeFlag","isLastMessage"];t.a=function(t){var n=function(n){v()(r,n);var a=G(r);function r(e,t){var n;u()(this,r),n=a.call(this,e,t);var o=e.index,s=e.message,c=e.newMessageFlag,i=e.exposedMessageIds,l=void 0===i?[]:i,d=e.addExposedMessageId,p=s.type===Y&&"done"===s.fetchStatus&&!s.order;if((0===o||s.type===X||c||p)&&(n.needRemeasure=!0),n.handleReload=n.handleReload.bind(h()(n)),n.resendMessage=n.resendMessage.bind(h()(n)),n.renderMetaInfo=n.renderMetaInfo.bind(h()(n)),n.checkOrderStatus=n.checkOrderStatus.bind(h()(n)),n.shouldShowTimeFlag=n.shouldShowTimeFlag.bind(h()(n)),n.handleCancelMessage=n.handleCancelMessage.bind(h()(n)),n.track=n.track.bind(h()(n)),n.timer=null,n.messageNode=null,n.shouldExpose=!0,n.clearTimer=n.clearTimer.bind(h()(n)),n.needExpose="function"==typeof IntersectionObserver&&ie[n.props.message.type]&&!l.includes(n.props.message.id),n.needExpose){var f={root:document.querySelector("#messagesContainer"),threshold:.5};n.observer=new IntersectionObserver((function(e){var t=e[0];t&&t.isIntersecting&&t.intersectionRatio>=.5?!n.timer&&n.shouldExpose&&(n.shouldExpose=!1,n.timer=setTimeout((function(){n.track(),n.clearTimer(),d&&d(n.props.message.id)}),1e3)):t&&t.intersectionRatio<=0&&(n.shouldExpose=!0)}),f)}return n}return d()(r,[{key:"componentDidMount",value:function(){var e=this.props,t=e.message,n=e.hasSourceMessageMap;void 0===n[t.id]&&(n[t.id]=t.hasMessageSource),this.needExpose&&this.observer.observe(this.messageNode),this.measureMessage()}},{key:"componentWillUnmount",value:function(){this.clearTimer(),this.needExpose&&this.observer.unobserve(this.messageNode)}},{key:"componentDidUpdate",value:function(e){var t=this,n=e.message,a=e.hasSourceMessageMap,r=e.newMessageFlag,o=e.showWarningMessageIds,s=this.props,c=s.message,i=s.newMessageFlag,u=s.showWarningMessageIds,l=!1;if(n.type===X)l=(n.textContent&&n.textContent.status)!==(c.textContent&&c.textContent.status);else{var d=["errorCode","status","send_status","fetchStatus"];c.type!==K&&d.push("content"),(l=d.some((function(e){return n[e]!==c[e]})))||(l=ue.some((function(n){return t.props[n]!==e[n]})))}a[c.id]!==c.hasMessageSource&&(l=!0,a[c.id]=c.hasMessageSource),r!==i&&(l=!0),n.type===ce&&o.indexOf(n.id)!==u.indexOf(c.id)&&(l=!0),l&&(this.needRemeasure=l),this.measureMessage()}},{key:"clearTimer",value:function(){this.timer&&(clearTimeout(this.timer),this.timer=null)}},{key:"handleReload",value:function(){var e=this.props,t=e.message;(0,e.populateMessageRequested)({message:t})}},{key:"measureMessage",value:function(){this.needRemeasure&&(this.props.measure(),this.needRemeasure=!1)}},{key:"resendMessage",value:function(){var e=this.props,t=e.message,n=e.resendMessageRequested,a=e.conversation,r=a.id,o=a.shop_id,s=a.status;t.type===se&&Object(_.tracker)({shopId:o,section:"conversation_window",type:"resend_video"}),n({conversationId:r,conversationStatus:s,message:t})}},{key:"handleCancelMessage",value:function(){var e=this.props,t=e.message,n=e.cancelSendingMessageRequested,a=e.conversation,r=a.id,o=a.shop_id;Object(_.tracker)({shopId:o,section:"conversation_window",type:"cancel_video"}),n({id:t.id,conversationId:r})}},{key:"renderSendingStatus",value:function(t,n,a){return n===j.MSG_STATUS.SENDING?O.a.createElement("div",{className:B.a.sendingWrap},t!==se||a?[J,z].includes(t)?null:O.a.createElement(D.a,{theme:"dark"}):O.a.createElement(I.Tooltip,{content:e("common.cancel")},O.a.createElement(I.Icon,{svg:P.a,className:B.a.icon,onClick:this.handleCancelMessage}))):null}},{key:"renderNewMessageTips",value:function(t){return t&&O.a.createElement("div",{className:B.a.newMessageTip},O.a.createElement("span",{className:B.a.prevLine}),O.a.createElement("span",{className:B.a.newMessageContent},e("conversation_detail.message_list.unread_messages")),O.a.createElement("span",{className:B.a.postLine}))}},{key:"renderSendFailed",value:function(t,n){var a=t.send_status,r=t.errorCode,o=t.message_option,s=t.status,c=a===j.MSG_STATUS.FAILED||"censored_blacklist"===s,i=43===r,u=Object(M.f)(o,66496);return c?i||n?O.a.createElement("div",{className:B.a.resendWrap},O.a.createElement(I.Icon,{svg:x.a,className:B.a.iconBase})):O.a.createElement("div",{className:B.a.resendWrap},O.a.createElement(I.Tooltip,{content:e("conversation_detail.message_list.resend")},O.a.createElement(I.Icon,{svg:x.a,className:B.a.icon,onClick:this.resendMessage}))):u&&O.a.createElement("div",{className:B.a.resendWrap},O.a.createElement(I.Icon,{svg:x.a,className:B.a.iconBase}))}},{key:"checkOrderStatus",value:function(e){var t=e.type,n=e.fetchStatus,a=e.order;return"order"===t&&"done"===n&&!a}},{key:"track",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"impression",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=this.props,r=a.message,o=r.id,s=r.type,c=r.content,i=r.to_id,u=r.from_id,l=r.request_id,d=r.crm_activity_id,p=a.conversation,h=p.to_id,f=p.shop_id,v=p.id,m=a.currentUser,g=H({message_id:o,crm_activity_id:d||"",from_source:d?"CRM":""},n);switch(s){case Q:g.bundle_deal_id=c.bundle_deal_id;break;case $:g.flash_sale_id=c.flash_sale_id;break;case ae:g.order_id=c.order_id;break;case ee:g.voucher_id=c.voucher_id;break;case te:g.shop_collection_id=c.collection_id;break;case se:g={message_id:o===l?0:o,is_sender:h===i,to_user_id:i,from_user_id:u,video_original_duration:c.duration_seconds};break;case J:var y=h===i;if(!c.unknown_qr_code||y)return;var b=m.id,S=m.role;g={shopid:f,account_id:b,account_type:S||"shopee_user",message_id:o===l?0:o,conversation_id:v}}"impression"===t&&(g={viewed_objects:[H(H({},g),{},{shopid:f})]}),Object(_.tracker)({shopId:f,section:"conversation_window",type:e||ie[s],data:g,operation:t})}},{key:"renderMessage",value:function(e){var n=this.props,a=n.message,r=n.measure,s=n.imgCache,i=n.timeFlag,u=n.isScChat,l=n.isSubAccount,d=n.conversation,p=n.currentUser,h=n.currentBuyer,f=n.newMessageFlag,v=n.visitShopSellerCenterRequested,m=n.isLastSystemMessage,g=n.sendMessagesRequested,y=n.showFaqHistoryModal,b=n.videoInfo,S=(n.fetchFaqMessagesRequested,n.showModal,n.closeModal,n.showWarningMessageIds),R=c()(n,F),E=d.shop,k=void 0===E?{}:E,C=a.type,M=a.send_status,_=a.hasMessageSource,I=a.fetchStatus,T=void 0===I?"":I,P=a.content,N=void 0===P?{}:P,x=a.from_shop_id,D=h.country,q=null,L=null,A=!1,W=!1;e?(q=this.renderSendFailed(a,"closed"===d.status),A=M===j.MSG_STATUS.SENDING,W=this.renderSendingStatus(C,M,"successful"===(b||{}).status)):L=this.renderNewMessageTips(f);var U=this.renderMetaInfo(a),G=this.renderMessageSource(a,i),Y=C===V||C===K&&N.type===Z&&(e||l),J=Y?B.a.message:e?B.a.messageSend:B.a.messageReceive,z=!(_||i||m||Y)||i&&Y?"4px":"8px";return O.a.createElement(O.a.Fragment,null,L,i&&O.a.createElement("div",{className:B.a.messageTime},i),G,O.a.createElement("div",{style:{marginTop:z},className:J},q,!Y&&W,O.a.createElement("div",{className:B.a.bubble},T.includes("Card")?O.a.createElement(w.Processor,{type:"loading",messageType:C,content:C===X&&d.shop_id!==N.shop_id?H(H({},N),{},{tax_value:"0.00"}):N}):O.a.createElement(t,o()({},a,{isScChat:u,isSend:e,measure:r,country:D,imgCache:s,isSending:A,currentUser:p,conversation:d,isSubAccount:l,handleReload:this.handleReload,visitShopSellerCenterRequested:v,sendMessagesRequested:g,showFaqHistoryModal:y,track:this.track,videoInfo:b,rateShopId:x},R)))),U,C===j.MessageTypes.MSG_TYPE_TEXT&&!e&&-1!==S.indexOf(a.id)&&O.a.createElement(w.TextWarning,{shopId:x,region:k.country}))}},{key:"renderProductSource",value:function(e,t,n,a){var r,o,s,c,i=e.content,u=void 0===i?{}:i,l=u.status,d=u.id,p=u.shop_id,h=this.props,f=h.currentUser,v=h.visitShopSellerCenterRequested,m=h.conversation.hasViewProductAccess,g=h.isSubAccount,y=h.isScChat;g?(o=t&&t.content?t.content:null)&&(r=o.id,c="https://".concat(Object(j.getMallUrl)(o.country),"/product/").concat(p,"/").concat(d,"/")):(s="https://".concat(Object(j.getSellerCenterUrl)(),"/portal/product/").concat(d),c="https://".concat(Object(j.getMallUrl)(),"/product/").concat(p,"/").concat(d));var b=u.id,S=u.image,R=u.name,E=u.original_price_string,k=u.actual_price_string,C={isSubAccount:g,originPrice:E,status:l,stock:u.stock,scProductLink:s,mallProductLink:c,hasViewProductAccess:m,visitShopSellerCenterRequested:v,shopId:r,itemId:b,sendStatus:n,isSendByMe:a,isScChat:y};return O.a.createElement(A.a,{id:b,currentUser:f,category:"source",type:"product",image:S,name:R,price:k,extraProps:C})}},{key:"renderOrderSource",value:function(t,n,a){var r,o=t.content,s=void 0===o?{}:o,c=this.props,i=c.currentUser,u=c.visitShopSellerCenterRequested,l=c.isSubAccount,d=c.conversation,p=d.shop,h=void 0===p?{}:p,f=d.hasViewOrderAccess,v=d.shop_id,m=d.to_shop_id,g=c.isScChat;l||(r="https://".concat(Object(j.getSellerCenterUrl)(),"/portal/sale/").concat(s.id));var y=Object(j.getMallOrderUrl)(s,a?m:i.shop_id),b={};"refund"===s.status?b.refundId=s.refund_serial_number:b.orderId=s.serial_number;var S=Object(j.getOrderPayment)(s,h.country).payment,R={orderId:s.id,smallImage:!0,itemCount:s.products_count,status:s.status,statusText:e(j.OrderStatusTextMap[s.status]),hasViewOrderAccess:f,visitShopSellerCenterRequested:u,isSubAccount:l,shopId:v,orderLink:r,mallOrderLink:y,orderOrRefundId:b,sendStatus:n,isSendByMe:a,isScChat:g},E=s.image,k=s.title;return O.a.createElement(A.a,{id:s.id,currentUser:i,category:"source",type:"order",image:E,name:k,price:S,extraProps:R})}},{key:"renderMessageSource",value:function(e,t){var n=e.source_type,a=e.sourceContent,r=e.hasMessageSource,o=e.shopContent,s=void 0===o?{}:o,c=e.fetchStatus,i=void 0===c?"":c,u=e.to_id,l=this.props.conversation;if(!r)return null;var d,p=l.to_id===u,h={marginTop:t?"1.5em":"0.75em"};return i.includes("Source")?O.a.createElement(w.Processor,{type:"loading",messageType:"source",style:h}):a||"done"!==i?a?("product"===n?d=this.renderProductSource(a,s,e.send_status,p):"order"===n&&(d=this.renderOrderSource(a,e.send_status,p)),d&&O.a.createElement("div",{style:h},d)):null:O.a.createElement(w.Processor,{type:"reload",messageType:"source",reloadRequest:this.handleReload,style:h})}},{key:"renderMetaInfo",value:function(){var t,n=this.props,a=n.message,r=a.type,o=a.textContent,s=a.to_id,c=a.errorCode,i=a.message_option,u=n.conversation,l=u.to_id,d=u.to_name,p=u.shop,h=s===l,f=(o||{}).buyer_id;if(r===X&&o){var v=f===l;switch(o.status){case"accepted":t=v?h?null:e("conversation_detail.message_list.accept_offer"):h?e("conversation_detail.message_list.accept_offer_user",{username:d}):null;break;case"rejected":t=v?h?null:e("conversation_detail.message_list.reject_offer"):h?e("conversation_detail.message_list.reject_offer_user",{username:d}):null;break;case"cancelled":t=v?e("conversation_detail.message_list.cancel_offer",{username:d}):e("conversation_detail.message_list.cancel_offer_self")}}if(28===c)t=e("conversation_detail.message_list.error_message_blocked",{username:d});else if(43===c)t=O.a.createElement(q.a,{color:"#bbb"});else if(45===c)t=e("conversation_detail.message_list.unverified_phone_number");else if(h&&(Object(M.f)(i,66496)||Object(M.f)(i,32768))){var m=p&&p.country?p.country.toLowerCase():"sg";t=O.a.createElement(L.a,{code:i,region:m})}if(t)return O.a.createElement("div",{className:B.a.metaInfo},O.a.createElement("div",{className:B.a.metaContent},t))}},{key:"shouldShowTimeFlag",value:function(e,t){return Date.parse(e)-Date.parse(t)>3e5}},{key:"render",value:function(){var e=this,t=this.props,n=t.style,a=t.message,r=t.isLastMessage,o=t.conversation.to_id,s=t.className,c=this.renderMessage(a.to_id===o),i="".concat(B.a.root," ").concat(r?B.a.lastMessage:""," ").concat(s);return O.a.createElement("div",{style:n,className:i,ref:function(t){return e.messageNode=t}},c)}}]),r}(O.a.PureComponent);return n.propTypes={index:C.a.number,message:C.a.object,newMessageFlag:C.a.bool,isLastMessage:C.a.bool,style:C.a.object,measure:C.a.func,timeFlag:C.a.string,imgCache:C.a.object,resendMessageRequested:C.a.func,conversation:C.a.object,currentUser:C.a.object,currentBuyer:C.a.object,isSubAccount:C.a.bool,visitShopSellerCenterRequested:C.a.func,visitMallRequested:C.a.func,populateMessageRequested:C.a.func,isLastSystemMessage:C.a.bool,videoInfo:C.a.object,hasSourceMessageMap:C.a.object,isScChat:C.a.bool,sendMessagesRequested:C.a.func,className:C.a.string,closeModal:C.a.func,exposedMessageIds:C.a.array,addExposedMessageId:C.a.func,showFaqHistoryModal:C.a.func,cancelSendingMessageRequested:C.a.func,showWarningMessageIds:C.a.array,fetchFaqMessagesRequested:C.a.func,showModal:C.a.func},n.defaultProps={showWarningMessageIds:[]},n}}).call(this,n("kiXb").t)},"+nW5":function(e,t,n){"use strict";var a=n("q1tI"),r=n.n(a),o=n("17x9"),s=n.n(o),c=n("TSYQ"),i=n.n(c),u=n("ue+V"),l=n.n(u),d=n("h4gR"),p=n("2Bv0"),h=n.n(p),f=n("LaU4"),v=n.n(f),m=n("+VhR"),g=n.n(m),y=n("R4Uw"),b=n.n(y),S=n("qLKR"),R=n.n(S),E={success:h.a,error:v.a,info:b.a,warn:g.a,resolved:h.a},O=function(e){var t=e.type,n=void 0===t?"info":t,a=e.showIcon,o=e.icon,s=e.closeable,c=e.closeText,u=e.onClose,p=e.title,h=e.message,f=e.className;if(!h)return null;var v=a||o,m=i()(l.a["alert-icon-".concat(n)],l.a.alertIcon,l.a.alertIconSize),g=s||c,y=i()(l.a.root,l.a[n],f);return r.a.createElement("div",{className:y},v&&(E[n]?r.a.createElement(d.Icon,{svg:E[n],className:m}):null),r.a.createElement("div",{className:l.a.content},p&&r.a.createElement("div",{className:l.a.title},p),r.a.createElement("div",{className:l.a.message},h)),g&&r.a.createElement("div",{className:l.a.alertClose,onClick:function(e){return u&&u(e)}},c||r.a.createElement(d.Icon,{svg:R.a,className:l.a.closeIcon})))};O.propTypes={type:s.a.oneOf(["success","error","info","warn","resolved","pending"]),showIcon:s.a.bool,icon:s.a.node,closeable:s.a.bool,closeText:s.a.node,onClose:s.a.func,message:s.a.node.isRequired,title:s.a.node,className:s.a.string},t.a=O},0:function(e,t,n){n("j36g"),n("87sv"),e.exports=n("tjUo")},1:function(e,t){},"16Al":function(e,t,n){"use strict";var a=n("WbBG");function r(){}function o(){}o.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,o,s){if(s!==a){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:r};return n.PropTypes=n,n}},"17x9":function(e,t,n){e.exports=n("16Al")()},"1RRp":function(e,t,n){e.exports=n.p+"d9dfc6e96737e7fe8a4018b09a87df78.png"},"1X8k":function(e,t,n){"use strict";n("I5cv");var a=n("lwsE"),r=n.n(a),o=n("W8MJ"),s=n.n(o),c=n("7W2i"),i=n.n(c),u=n("a1gu"),l=n.n(u),d=n("Nsbk"),p=n.n(d),h=n("q1tI"),f=n.n(h),v=n("/MKj"),m=n("tvxL"),g=n("4j81");function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return l()(this,n)}}var b=function(e){i()(n,e);var t=y(n);function n(){return r()(this,n),t.apply(this,arguments)}return s()(n,[{key:"render",value:function(){return f.a.createElement(g.StickerPanel,this.props)}}]),n}(f.a.PureComponent),S={selectSticker:m.selectSticker};t.a=Object(v.b)((function(e){return{stickers:Object(m.stickersSelector)(e),allStickers:Object(m.allStickersArraySelector)(e),currentSticker:Object(m.currentStickerSelector)(e),currentStickerPage:Object(m.currentStickerPageSelector)(e),stickerHttpStatus:Object(m.stickerHttpStatusSelector)(e)}}),S)(b)},2:function(e,t){},"24kt":function(e,t,n){"use strict";(function(e){n("I5cv");var a=n("lwsE"),r=n.n(a),o=n("W8MJ"),s=n.n(o),c=n("PJYZ"),i=n.n(c),u=n("7W2i"),l=n.n(u),d=n("a1gu"),p=n.n(d),h=n("Nsbk"),f=n.n(h),v=(n("2Spj"),n("q1tI")),m=n.n(v),g=n("yghM"),y=n("17x9"),b=n.n(y),S=n("h4gR"),R=n("Ozkt"),E=n.n(R),O=n("ilZm"),k=n.n(O);function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var M=function(t){l()(a,t);var n=C(a);function a(t,o){var s;r()(this,a),(s=n.call(this,t,o)).state={focus:!1},s.input=null,s.defaultPlaceholder=e("conversation_list.search_bar.placeholder"),s.cancelSearch=s.cancelSearch.bind(i()(s)),s.handleKeyDown=s.handleKeyDown.bind(i()(s)),s.handleFocus=s.handleFocus.bind(i()(s));var c=t.debounceWaitTime,u=void 0===c?200:c,l=t.debounceTimeSpan,d=void 0===l?1e3:l;return s.debounceHandleSearch=Object(g.a)(s.handleChange.bind(i()(s)),u,d),s}return s()(a,[{key:"handleFocus",value:function(e){this.setState({focus:e})}},{key:"cancelSearch",value:function(){this.input.value="",this.props.handleSearch("")}},{key:"handleChange",value:function(e){this.props.handleSearch(this.input.value,e)}},{key:"handleKeyDown",value:function(e){switch(e.keyCode){case 27:this.cancelSearch(),e.preventDefault()}}},{key:"componentDidMount",value:function(){var e=this;this.props.autoFocus?setTimeout((function(){e.input&&e.input.focus()}),500):this.input&&this.input.blur()}},{key:"componentDidUpdate",value:function(){this.props.autoFocus?this.input&&this.input.focus():this.input&&this.input.blur(),this.props.keyword||(this.input.value="")}},{key:"render",value:function(){var e=this,t=this.state.focus,n=this.props,a=n.keyword,r=void 0===a?"":a,o=n.disabled,s=n.placeholder;return m.a.createElement("div",{className:k.a.root,onClick:this.props.handleClick},m.a.createElement("div",{className:"".concat(k.a.wrapper," ").concat(t||r?k.a.focus:"")},m.a.createElement("div",{className:k.a.iconWrapper},m.a.createElement(S.Icon,{svg:E.a,className:k.a.icon})),m.a.createElement("input",{disabled:o,defaultValue:r,className:k.a.input,onKeyDown:this.handleKeyDown,ref:function(t){return e.input=t},onChange:this.debounceHandleSearch,onFocus:function(){return e.handleFocus(!0)},onBlur:function(){return e.handleFocus(!1)},placeholder:s||this.defaultPlaceholder}),m.a.createElement("div",{style:{display:r?"":"none"},className:k.a.cancel,onClick:this.cancelSearch})))}}]),a}(m.a.PureComponent);M.propTypes={disabled:b.a.bool,keyword:b.a.string,placeholder:b.a.string,handleClick:b.a.func,handleSearch:b.a.func,debounceWaitTime:b.a.number,debounceTimeSpan:b.a.number,autoFocus:b.a.bool},M.defaultProps={type:""},t.a=M}).call(this,n("kiXb").t)},"2r9f":function(e,t,n){e.exports=n.p+"143e062750363ec2d5f8d5601a9b595a.png"},3:function(e,t){},"3XcH":function(e,t,n){e.exports=n.p+"22866ae25d9baba1a63e3e19c7aab553.png"},"3y6x":function(e,t,n){"use strict";(function(e){n("I5cv");var a=n("lwsE"),r=n.n(a),o=n("W8MJ"),s=n.n(o),c=n("PJYZ"),i=n.n(c),u=n("7W2i"),l=n.n(u),d=n("a1gu"),p=n.n(d),h=n("Nsbk"),f=n.n(h),v=(n("2Spj"),n("SRfc"),n("xfY5"),n("Tze0"),n("0l/t"),n("L9s1"),n("Z2Ku"),n("8+KV"),n("q1tI")),m=n.n(v),g=n("17x9"),y=n.n(g),b=n("waf0"),S=n("tvxL"),R=n("h4gR"),E=n("cVKk"),O=n.n(E),k=n("PGq1"),C=n.n(k),M=n("wJd0"),_=n.n(M),w=n("XnKn");function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var j=new _.a,T=function(e){var t=j.countGraphemes(e);return t<5e3?{text:e,count:t}:{text:j.splitGraphemes(e).splice(0,5e3).join(""),count:5e3}},P=function(t){l()(a,t);var n=I(a);function a(e){var t;return r()(this,a),(t=n.call(this,e)).handlePaste=t.handlePaste.bind(i()(t)),t.handleChange=t.handleChange.bind(i()(t)),t.handleKeyDown=t.handleKeyDown.bind(i()(t)),t.handleSendMessage=t.handleSendMessage.bind(i()(t)),t.handleEditorHeight=t.handleEditorHeight.bind(i()(t)),t.searchMessageShortcuts=t.searchMessageShortcuts.bind(i()(t)),t.resetMatchedMessageShortcuts=t.resetMatchedMessageShortcuts.bind(i()(t)),t.state={value:e.draft||"",uid:"",matchedMessageShortcuts:[],valueLength:(e.draft||"").length},t.searchMessageShortcutsTimeout=500,t.searchMessageShortcutsTimeoutID=null,t}return s()(a,[{key:"componentDidMount",value:function(){var e=this.props.getEditorRef;e&&e(this),this.moveToEnd()}},{key:"componentDidUpdate",value:function(e){this.props.conversationId!==e.conversationId&&this.moveToEnd(),this.props.drawerMedias.length!==e.drawerMedias.length&&this.editor.focus(),this.handleEditorHeight()}},{key:"moveToEnd",value:function(){var e=this.editor;if(e){e.focus();var t=e.value.length;if(document.selection){var n=e.createTextRange();n.moveStart("character",t),n.collapse(),n.select()}else"number"==typeof e.selectionStart&&"number"==typeof e.selectionEnd&&(e.selectionStart=e.selectionEnd=t)}}},{key:"handlePaste",value:function(t){var n=window.clipboardData||t.clipboardData,a=window.navigator.userAgent;if(n&&n.items&&!(n.items&&2===n.items.length&&"string"===n.items[0].kind&&"file"===n.items[1].kind&&n.types&&2===n.types.length&&"text/plain"===n.types[0]&&"Files"===n.types[1]&&a.match(/Macintosh/i)&&Number(a.match(/Chrome\/(\d{2})/i)[1])<49))for(var r=0;r<n.items.length;r++){var o=n.items[r];if("file"===o.kind){o.getAsFile()||(t.preventDefault(),this.props.handleErrorWithToast(e("common.toast.file_unsupport")));break}}}},{key:"handleChange",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=this.props,a=n.isScChat,r=n.saveDraft,o=n.conversationId,s=n.shortcutInserted,c=n.resetShortcutInserted,i=n.isMessageShortcutHintEnabled,u=T(t),l=u.text,d=u.count;t=l;var p=this.state,h=p.value,f=p.matchedMessageShortcuts;this.setState({value:t,valueLength:d},(function(){if(r({draft:t,conversationId:o}),e.resetMatchedMessageShortcuts(),t!==h&&a&&i){if(s)return e.searchMessageShortcutsTimeoutID&&clearTimeout(e.searchMessageShortcutsTimeoutID),void c();0!==f.length?e.searchMessageShortcuts():(e.searchMessageShortcutsTimeoutID&&clearTimeout(e.searchMessageShortcutsTimeoutID),e.searchMessageShortcutsTimeoutID=setTimeout(e.searchMessageShortcuts,e.searchMessageShortcutsTimeout))}}))}},{key:"searchMessageShortcuts",value:function(){var e=this.state.value,t=void 0===e?"":e,n=this.props.messageShortcuts;if(this.editor===document.activeElement&&t.trim()){var a=n.filter((function(e){var n=e.content;return(void 0===n?"":n).toLowerCase().includes(t.toLowerCase())}));this.setState({matchedMessageShortcuts:a})}}},{key:"resetMatchedMessageShortcuts",value:function(){this.setState({matchedMessageShortcuts:[]})}},{key:"handleEditorHeight",value:function(){this.editor&&(this.editor.style.height="",this.editor.scrollHeight>80?(this.editor.style.height="80px",this.editor.style.overflow="auto"):(this.editor.style.height=this.editor.scrollHeight+"px",this.editor.style.overflow="hidden"))}},{key:"handleSendMessage",value:function(){var t=this.state,n=t.value,a=t.valueLength,r=this.props,o=r.shopId,s=r.drawerMedias,c=r.onSendMessage,i=r.clearMediaFile,u=r.conversationId,l=n.trim();l&&a<=600&&(c({type:"text",content:{text:l}}),this.handleChange()),a>600&&this.props.handleWarnWithToast(e(Object(w.formatNumberKey)("conversation_detail.input_field.send_enter_limit_tips",600),{count:600}));var d=s.length;d&&(s.forEach((function(e){if("video"===e.type){var t=e.cover,n=e.duration,a=e.file,r=e.width,o=e.height,s=e.videoUrl;c({type:"video",content:{file:a,thumb_width:r,thumb_height:o,localThumbUrl:t,localVideoUrl:s,duration_seconds:n}})}else{var i=e.cover,u=e.file,l=e.width,d=e.height;c({type:"image",content:{file:u,width:l,height:d,localUrl:i}})}})),i({conversationId:u})),(l||d)&&Object(S.tracker)({shopId:o,type:"send_message_button"})}},{key:"handleKeyDown",value:function(e){var t=0!==this.state.matchedMessageShortcuts.length;switch(e.keyCode){case 13:if(e.shiftKey)return;return t||(e.preventDefault(),this.handleSendMessage()),!1;case 38:case 40:t&&e.preventDefault();break;case 37:case 39:t&&this.resetMatchedMessageShortcuts()}}},{key:"render",value:function(){var t=this,n=this.state,a=n.value,r=n.valueLength,o=n.matchedMessageShortcuts,s=this.props,c=s.drawerMedias,i=s.onSelectMessageShortcut,u=s.isScChat,l=s.isMessageShortcutHintEnabled,d=0!==o.length&&u&&l;return m.a.createElement("div",{className:C.a.root},d&&m.a.createElement(b.a,{keyword:a,hints:o,close:this.resetMatchedMessageShortcuts,onSelectHint:i}),m.a.createElement("textarea",{autoFocus:!0,value:a,className:C.a.editor,onPaste:this.handlePaste,onChange:function(e){return t.handleChange(e.target.value)},onKeyDown:this.handleKeyDown,ref:function(e){return t.editor=e},placeholder:e("conversation_detail.input_field.web_editor.placeholder")}),m.a.createElement("div",{className:C.a.sendButton},r>=550&&m.a.createElement("span",{className:C.a.wordlimit},m.a.createElement("span",{className:"".concat(r>600?C.a.exceed:"")},r),"/",600),r>600?m.a.createElement("div",{className:C.a.sendTooltip},m.a.createElement(R.Tooltip,{content:e(Object(w.formatNumberKey)("conversation_detail.input_field.limit_tips",600),{count:600})},m.a.createElement(R.Icon,{svg:O.a,className:C.a.buttonActive,onClick:this.handleSendMessage}))):m.a.createElement("div",{className:C.a.sendTooltip},m.a.createElement(R.Icon,{svg:O.a,className:a.trim().length||c.length?C.a.buttonActive:C.a.button,onClick:this.handleSendMessage}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.conversationId,a=e.draft,r=void 0===a?"":a;return n!==t.conversationId?{value:r,conversationId:n}:null}}]),a}(m.a.PureComponent);P.propTypes={draft:y.a.string,shopId:y.a.number,isScChat:y.a.bool,saveDraft:y.a.func,getEditorRef:y.a.func,drawerMedias:y.a.array,onSendMessage:y.a.func,clearMediaFile:y.a.func,conversationId:y.a.string,shortcutInserted:y.a.bool,messageShortcuts:y.a.array,handleErrorWithToast:y.a.func,handleWarnWithToast:y.a.func,resetShortcutInserted:y.a.func,onSelectMessageShortcut:y.a.func,isMessageShortcutHintEnabled:y.a.bool},t.a=P}).call(this,n("kiXb").t)},4:function(e,t){},"4Q5n":function(e,t,n){"use strict";(function(e){n("I5cv"),n("RW0V"),n("ioFf"),n("0l/t"),n("mYba"),n("8+KV"),n("jm62"),n("WLL4"),n("HAE/");var a=n("lSNA"),r=n.n(a),o=n("lwsE"),s=n.n(o),c=n("W8MJ"),i=n.n(c),u=n("PJYZ"),l=n.n(u),d=n("7W2i"),p=n.n(d),h=n("a1gu"),f=n.n(h),v=n("Nsbk"),m=n.n(v),g=(n("2Spj"),n("eM6i"),n("bWfx"),n("f3/d"),n("I78e"),n("q1tI")),y=n.n(g),b=n("17x9"),S=n.n(b),R=n("azN6"),E=n("+iqz"),O=n("dm17"),k=n("XnKn"),C=n("m2L4"),M=n.n(C),_=n("NSnx"),w=n.n(_);function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=m()(e);if(t){var r=m()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return f()(this,n)}}var T=k.PromotionStatus.UpComing,P=k.PromotionStatus.OnGoing,N=k.PromotionStatus.Expired,x=function(t){p()(a,t);var n=j(a);function a(e){var t;return s()(this,a),(t=n.call(this,e)).renderProductList=t.renderProductList.bind(l()(t)),t.isProductInValid=t.isProductInValid.bind(l()(t)),t.renderHeaderText=t.renderHeaderText.bind(l()(t)),t.renderFooter=t.renderFooter.bind(l()(t)),t.countOnSec=t.countOnSec.bind(l()(t)),t.tick=t.tick.bind(l()(t)),t.formatTime=t.formatTime.bind(l()(t)),t.transValue=t.transValue.bind(l()(t)),t.trackItem=t.trackItem.bind(l()(t)),t.needRemeasure=!1,t.timerID=null,t.status="",t.state={date:Math.floor(Date.now()/1e3)},t}return i()(a,[{key:"componentDidMount",value:function(){this.countOnSec(),this.props.measure()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timerID)}},{key:"countOnSec",value:function(){var e=this;clearTimeout(this.timerID),this.timerID=setTimeout((function(){e.tick(),e.countOnSec()}),1e3)}},{key:"tick",value:function(){this.setState({date:Math.floor(Date.now()/1e3)})}},{key:"formatTime",value:function(e){return e>=10?e:"0".concat(e)}},{key:"calculateLeftTime",value:function(e){var t=e-this.state.date;if(t<=0)return{isReachEndTime:!0};var n=Math.floor(t/86400),a=Math.floor(t%86400/3600),r=Math.floor(t%3600/60),o=Math.floor(t%3600%60);return{isReachEndTime:!1,day:!!n&&this.formatTime(n),hour:this.formatTime(a),minute:this.formatTime(r),second:this.formatTime(o)}}},{key:"isProductInValid",value:function(e){return e.stock<=0}},{key:"transValue",value:function(e){return e/1e5}},{key:"trackItem",value:function(e){this.props.track("flash_sale_items","click",{itemid:e})}},{key:"renderProductList",value:function(t,n,a,r){var o=this;return t.map((function(t){var s=t.name,c=t.raw_discount,i=t.price,u=t.hidden_price_display,l=t.image,d=t.image_hash,p=t.item_id,h=o.transValue(i),f=r===T?Object(k.transPrice)(u||h,n):Object(k.formatPrice)(h,n),v="https://".concat(Object(k.getMallUrl)(n),"/product/").concat(a,"/").concat(p,"/"),m=o.isProductInValid(t),g=m?y.a.createElement("div",{className:w.a.soldout},e("conversation_detail.conversation_origin.product_origin.sold_out")):r!==T&&c<100&&c>0?y.a.createElement("div",{className:w.a.discount},c,"% ",e("common.label.off")):null;return y.a.createElement(O.a,{key:t.item_id,name:s,price:f,image:l,imageHash:d,inValid:m,url:v,status:g,id:p,trackItem:o.trackItem})}))}},{key:"renderHeaderText",value:function(t){var n=this.props.content,a=n.start_time,o=n.end_time,s=Object(k.customizeTime)(1e3*a),c=t===P?this.calculateLeftTime(o):{},i=t===T?y.a.createElement("span",{className:w.a.headerText},y.a.createElement(M.a,{tagName:"span",clamp:1},e("common.flash_sale.start_at")," ",s)):t!==P||c.isReachEndTime?y.a.createElement("span",{className:w.a.headerText,title:e("message.flash_sale.end")},y.a.createElement(M.a,{tagName:"span",clamp:1},e("message.flash_sale.end"))):y.a.createElement(y.a.Fragment,null,y.a.createElement("span",{className:w.a.textEnd},e("common.flash_sale.end_in")),Object(R.a)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},c))),u="".concat(w.a.productHeader," ").concat(t===N?w.a.productHeaderInactive:"");return y.a.createElement("div",{className:w.a.header},y.a.createElement("div",{className:u},e("message.flash_sale")),y.a.createElement("div",{className:w.a.headerRight},i))}},{key:"renderFooter",value:function(t,n,a){var r=this,o=t[0].item_id,s="https://".concat(Object(k.getMallUrl)(n),"/product/").concat(a,"/").concat(o,"/");return y.a.createElement("div",{className:w.a.footer,onClick:function(){window.open(s),r.props.track("flash_sale_button","click")}},e("conversation_detail.conversation_origin.view_details"))}},{key:"render",value:function(){var e=this.props,t=e.isSend,n=e.content,a=n.shop_id,r=n.start_time,o=n.end_time,s=n.flash_sale_item,c=void 0===s?[]:s,i=e.conversation,u=this.state.date,l=(i||{}).shop,d=(l&&l.country?l.country:"SG").toLowerCase();this.status=u<r?T:u<o&&u>r?P:N;var p=c.slice(0,4),h="".concat(w.a.root," ").concat(t?w.a.send:w.a.receive),f=this.renderProductList(p,d,a,this.status),v=this.renderHeaderText(this.status),m=1===c.length&&this.renderFooter(c,d,a);return y.a.createElement("div",{className:h},v,f,m)}}]),a}(y.a.PureComponent);x.propTypes={measure:S.a.func,isSend:S.a.bool,content:S.a.object,conversation:S.a.object,track:S.a.func},t.a=Object(E.a)(x)}).call(this,n("kiXb").t)},"5se9":function(e,t,n){"use strict";(function(e){n("I5cv"),n("RW0V"),n("ioFf"),n("0l/t"),n("mYba"),n("8+KV"),n("jm62"),n("WLL4"),n("HAE/");var a=n("lSNA"),r=n.n(a),o=n("lwsE"),s=n.n(o),c=n("W8MJ"),i=n.n(c),u=n("PJYZ"),l=n.n(u),d=n("7W2i"),p=n.n(d),h=n("a1gu"),f=n.n(h),v=n("Nsbk"),m=n.n(v),g=(n("2Spj"),n("eM6i"),n("bWfx"),n("Z2Ku"),n("q1tI")),y=n.n(g),b=n("17x9"),S=n.n(b),R=n("SdKD"),E=n("axYV"),O=n("OTLN"),k=n("g6PX"),C=n("FO8H"),M=n("tvxL"),_=n("4j81"),w=n("XnKn"),I=n("h4gR"),j=n("x3MO"),T=n.n(j),P=n("j0sr"),N=n.n(P),x=n("BQdB"),D=n.n(x),q=n("AU40"),L=n.n(q),A=n("jbrJ"),W=n.n(A),B=n("HxWO"),F=n.n(B),U=n("Vuie"),H=n.n(U),G=n("v/m5"),K=n.n(G),V=n("YS8r"),Y=n.n(V),X=n("y6GN"),J=n.n(X),z=n("VBfZ"),Z=n.n(z),Q=n("lmJ8"),$=n.n(Q),ee=n("OW4m"),te=n("WFdJ"),ne=n("oWPI"),ae=n.n(ne),re=n("S4Or"),oe=n.n(re),se=n("VTii"),ce=n.n(se),ie=n("vJMG"),ue=n.n(ie);function le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function de(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=m()(e);if(t){var r=m()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return f()(this,n)}}var pe={seeAll:F.a,minimize:W.a,hideDialog:L.a,showDialog:D.a},he=function(t){p()(a,t);var n=de(a);function a(e){var t;return s()(this,a),(t=n.call(this,e)).sendTracker=t.sendTracker.bind(l()(t)),t.handleGotIt=t.handleGotIt.bind(l()(t)),t.checkNewbie=t.checkNewbie.bind(l()(t)),t.handleMenusOpen=t.handleMenusOpen.bind(l()(t)),t.handleMenusClose=t.handleMenusClose.bind(l()(t)),t.handleClickEntry=t.handleClickEntry.bind(l()(t)),t.handleGoToWebchat=t.handleGoToWebchat.bind(l()(t)),t.getToolbarContent=t.getToolbarContent.bind(l()(t)),t.handlePreviewVisibleChange=t.handlePreviewVisibleChange.bind(l()(t)),t.handleBeforeUnload=t.handleBeforeUnload.bind(l()(t)),t.state={dragIn:!1,isStatusHoverd:!1,isStatusMenuOpen:!1},t.openedWindow=null,t.openWebChatTimer=null,t.hasBindMessageEvent=!1,t.root=null,t.goToWebchatConfig={key:"seeAll",tip:"header.tooltip.see_all",customProps:{position:"right",edgeDistance:12},icon:"seeAll",handler:t.handleGoToWebchat},t.minimizeConfig={key:"minimize",tip:"header.tooltip.minimize",icon:"minimize",handler:function(e){(0,t.props.updateChatWindowStatus)({shouldShowWindow:!1}),Object(M.tracker)({type:"close_button"})}},t}return i()(a,[{key:"componentDidUpdate",value:function(e){var t=e.showEntry;if(this.props.showEntry&&!t){var n=Date.now()-window.__START_MINICHAT__;Object(M.collectComponentTask)(M.ReportComponent.APP,{duration:n,id:M.ReportPoint.SHOW_WEBCHAT})}}},{key:"componentDidMount",value:function(){this.props.isScChat&&Object(M.tracker)({type:"chat_icon",data:{ctx_url:window.location.href},operation:"impression"}),Object(te.a)(),window.addEventListener("beforeunload",this.handleBeforeUnload)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("beforeunload",this.handleBeforeUnload)}},{key:"handleBeforeUnload",value:function(){localStorage.setItem("mini-last-active-time",Date.now())}},{key:"sendTracker",value:function(e){var t=this.props.currentConversation;Object(M.tracker)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?le(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({shopId:t.shop_id,section:"conversation_window_video_pop_up"},e))}},{key:"handleGoToWebchat",value:function(e,t){var n=this.props.currentConversation;Object(M.tracker)({type:"to_webchat_button"});var a=Object(w.getWebChatUrl)();Object(ee.a)({currentConversation:n,webChatUrl:a})}},{key:"checkNewbie",value:function(e,t){var n=w.SuperCategory[t?"ENTRY":"HEADER"];return!!Object(w.newbieCheck)(e,{superType:n,secondaryType:w.SecondaryCategory.MODAL})}},{key:"handleGotIt",value:function(e){var t=w.SuperCategory[e?"ENTRY":"HEADER"],n=this.props,a=n.newbie;(0,n.updateGuideRequested)({newbieId:Object(w.newbieCheck)(a,{superType:t,secondaryType:w.SecondaryCategory.MODAL}).id,isEntry:e})}},{key:"getToolbarContent",value:function(){var t=this.props,n=t.isScChat,a=t.showConversationDetail,r=t.updateConversationDetailStatus,o=[];return a?o.push({key:"hideDialog",tip:"header.tooltip.close_dialog",icon:"hideDialog",handler:function(e){r({shouldShowConversationDetail:!1}),Object(M.tracker)({type:"fold_button"})}}):o.push({key:"showDialog",tip:"header.tooltip.open_dialog",icon:"showDialog",handler:function(e){r({shouldShowConversationDetail:!0,needMark:!0}),Object(M.tracker)({type:"unfold_button"})}}),o.push(this.minimizeConfig),n&&o.push(this.goToWebchatConfig),y.a.createElement("div",{className:ue.a.operatorWrapper},o.map((function(t){return y.a.createElement("div",{key:t.key,className:ue.a.operatorItemWrapper},y.a.createElement(I.Tooltip,{content:e(t.tip)},y.a.createElement(I.Icon,{svg:pe[t.icon],className:ue.a[t.icon],onClick:t.handler})))})))}},{key:"getStatusMenuOption",value:function(t){var n=this.props.updateUserRequested;return[{name:y.a.createElement("div",{className:ue.a.statusOption},y.a.createElement("div",{className:ue.a.selected},t&&y.a.createElement(I.Icon,{svg:H.a,className:ue.a.currentStatus})),y.a.createElement("div",{className:"".concat(ue.a.status," ").concat(ue.a.working)}),y.a.createElement("div",{className:t?ue.a.active:""},e("common.online"))),handleSelect:function(){!t&&n({status:"working"}),!t&&Object(M.tracker)({section:"shop_head_status_dropdown",type:"status_online_button"})},meta:{noBorder:!0}},{name:y.a.createElement("div",{className:ue.a.statusOption},y.a.createElement("div",{className:ue.a.selected},!t&&y.a.createElement(I.Icon,{svg:H.a,className:ue.a.currentStatus})),y.a.createElement("div",{className:"".concat(ue.a.status," ").concat(ue.a.hangup)}),y.a.createElement("div",{className:t?"":ue.a.active},e("common.offline"))),handleSelect:function(){t&&n({status:"hang_up"}),t&&Object(M.tracker)({section:"shop_head_status_dropdown",type:"status_hangup"})}}]}},{key:"handleMenusOpen",value:function(){var e=this.props.updateOpenedMenu;Object(M.tracker)({type:"shop_head_status"}),e("user_status"),this.setState({isStatusMenuOpen:!0})}},{key:"handleMenusClose",value:function(){this.setState({isStatusMenuOpen:!1})}},{key:"handleClickEntry",value:function(){var e=this.props,t=e.showChatWindow,n=e.loginSuccess,a=e.socketSuccess,r=e.totalUnreadCount,o=e.updateChatWindowStatus;t||(o({shouldShowWindow:!0}),n&&a&&Object(M.tracker)({type:"chat_icon",data:{redbot:r,ctx_url:window.location.href}}))}},{key:"handlePreviewVisibleChange",value:function(e){!e&&this.props.closeMediaPreviewModalRequested()}},{key:"makeChatWindowsContent",value:function(){var t=this.props,n=t.toast,a=t.isScChat,r=t.openedMenu,o=t.currentUser,s=t.currentBuyer,c=t.isSubAccount,i=t.loginSuccess,u=t.socketSuccess,l=t.connectSocket,d=t.updateOpenedMenu,p=t.currentConversation,h=t.setToastInformation,f=t.currentConversationId,v=t.showConversationDetail,m=t.previewMedias,g=t.currentPreviewMediaId,b=t.showMediaPreviewModal,S={isScChat:a,openedMenu:r,currentUser:o,isSubAccount:c,currentBuyer:s,loginSuccess:i,socketSuccess:u,updateOpenedMenu:d,setToastInformation:h,currentConversation:p,showConversationDetail:v,changeConversationStatusRequested:t.changeConversationStatusRequested,currentUserId:(o||{}).id};return i?u?y.a.createElement(y.a.Fragment,null,y.a.createElement(O.a,{toast:n,isScChat:a,setToastInformation:h}),y.a.createElement("div",{className:ue.a.details},f?y.a.createElement(C.a,S):y.a.createElement("div",{className:ue.a.blank},y.a.createElement("img",{src:ae.a,className:ue.a.image}),y.a.createElement("div",{className:ue.a.title},e("blank_page.".concat(a?"":"mall_","title"))),a&&y.a.createElement("div",{className:ue.a.subtitle},e("blank_page.tip")))),y.a.createElement(k.a,S),y.a.createElement(E.a,null),b&&y.a.createElement(_.MediaPreviewModal,{medias:m,modalZIndex:999999,tracker:this.sendTracker,onVisibleChange:this.handlePreviewVisibleChange,currentPreviewMediaId:g})):y.a.createElement("div",{className:ue.a.maxBlank},y.a.createElement("img",{src:oe.a,className:ue.a.errorImage}),y.a.createElement("div",{className:ue.a.title},e("socket_error.title")),y.a.createElement("div",{className:ue.a.reload,onClick:l},e("common.error.reload"))):y.a.createElement("div",{className:ue.a.maxBlank},y.a.createElement("img",{src:ce.a,className:ue.a.errorImage}),y.a.createElement("div",{className:ue.a.title},e("common.error.hint_text")),y.a.createElement("div",{className:ue.a.subtitle},e("login_error.tips")))}},{key:"render",value:function(){var t=this,n=this.props,a=n.newbie,r=n.isScChat,o=n.showEntry,s=n.openedMenu,c=n.currentUser,i=n.isSubAccount,u=n.showChatWindow,l=n.totalUnreadCount,d=n.showConversationDetail,p=this.state,h=p.isStatusHoverd,f=p.isStatusMenuOpen,v=c.distribution_status,m=c.locale,g=["tw","cn"].includes(Object(w.handleLocale)(m,!1)),b="working"===v,S=this.getStatusMenuOption(b),E=l>0,O=l>99?"99+":l,k="".concat(ue.a.userStatus," ").concat(ue.a.hoverStyle," ").concat(b?ue.a.working:ue.a.hangup),C=this.getToolbarContent(),M="".concat(ue.a.wrapper," ").concat(r&&!u?ue.a.scEntry:""," ").concat(u?d?ue.a.container:ue.a.halfContainer:E?ue.a.hasUnread:"");return o&&y.a.createElement("div",{className:M,style:r?{borderRadius:"4px"}:{}},y.a.createElement("div",{className:ue.a.root},y.a.createElement("div",{className:ue.a.logoWrapper,onClick:this.handleClickEntry},l>0&&y.a.createElement("div",{className:ue.a.counts},O),i&&v&&!u&&y.a.createElement("div",{className:"".concat(ue.a.statusDot," ").concat(ue.a[v])}),i&&u&&y.a.createElement("div",{className:ue.a.customMenu},y.a.createElement(R.a,{options:S,menuKey:"user_status",openedMenu:s,placement:"bottom-start",onOpen:this.handleMenusOpen,onClose:this.handleMenusClose,label:y.a.createElement(I.Tooltip,{content:e("common.".concat(b?"online":"offline"))},y.a.createElement("div",{className:k,onMouseEnter:function(){return t.setState({isStatusHoverd:!0})},onMouseLeave:function(){return t.setState({isStatusHoverd:!1})}},(f||h)&&y.a.createElement(I.Icon,{svg:Y.a,className:ue.a.arrow})))})),y.a.createElement(I.Icon,{svg:J.a,className:ue.a.chat}),y.a.createElement(I.Icon,{svg:g?N.a:T.a,className:ue.a.logo}),!!l&&y.a.createElement("div",{className:ue.a.unread},y.a.createElement(I.Icon,{svg:Z.a,className:ue.a.unreadOpen}),l,y.a.createElement(I.Icon,{svg:$.a,className:ue.a.unreadClose}))),r&&!u&&y.a.createElement("div",{className:ue.a.jumpbar,onClick:function(e){return t.handleGoToWebchat(e,!0)}},y.a.createElement(I.Tooltip,{placement:"right",content:e("header.tooltip.see_all")},y.a.createElement(I.Icon,{svg:K.a,className:ue.a.jump}))),u&&C),y.a.createElement("div",{className:ue.a.windows},this.makeChatWindowsContent()),r&&this.checkNewbie(a,!u)&&y.a.createElement("div",{className:ue.a[u?"headerPortal":"portal"]},y.a.createElement("div",{className:ue.a.guideContent},u?y.a.createElement("div",{className:ue.a.guideItem},y.a.createElement(I.Icon,{svg:L.a,className:"".concat(ue.a.guideIcon," ").concat(ue.a.hideDialog)}),y.a.createElement("span",{className:ue.a.guideTip},e("newbie.tips.hide_conversation"))):y.a.createElement(y.a.Fragment,null,y.a.createElement("div",{className:ue.a.guideItem},y.a.createElement(I.Icon,{svg:J.a,className:"".concat(ue.a.guideIcon," ").concat(ue.a.chatLogo)}),y.a.createElement("span",{className:ue.a.guideTip},e("newbie.tips.chat_icon"))),y.a.createElement("div",{className:ue.a.guideItem},y.a.createElement(I.Icon,{svg:K.a,className:"".concat(ue.a.guideIcon," ").concat(ue.a.jump)}),y.a.createElement("span",{className:ue.a.guideTip},e("newbie.tips.open_webchat_icon"))))),y.a.createElement("div",{className:ue.a.guideBtn,onClick:function(){return t.handleGotIt(!u)}},e("settings.message_shortcuts.import.confirm"))))}}]),a}(y.a.PureComponent);he.propTypes={newbie:S.a.array,toast:S.a.object,isScChat:S.a.bool,showEntry:S.a.bool,openedMenu:S.a.string,currentUser:S.a.object,isSubAccount:S.a.bool,loginSuccess:S.a.bool,currentBuyer:S.a.object,socketSuccess:S.a.bool,connectSocket:S.a.func,showChatWindow:S.a.bool,updateChatParams:S.a.func,updateOpenedMenu:S.a.func,totalUnreadCount:S.a.number,updateUserRequested:S.a.func,setToastInformation:S.a.func,currentConversation:S.a.object,updateGuideRequested:S.a.func,currentConversationId:S.a.string,updateChatWindowStatus:S.a.func,showConversationDetail:S.a.bool,previewMedias:S.a.array,showMediaPreviewModal:S.a.bool,currentPreviewMediaId:S.a.string,closeMediaPreviewModalRequested:S.a.func,resetConversationRequested:S.a.func,updateConversationDetailStatus:S.a.func,changeConversationStatusRequested:S.a.func},t.a=he}).call(this,n("kiXb").t)},"87Cs":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a=function(e){return e?e.getBoundingClientRect():null}},"8Wdg":function(e,t,n){"use strict";n("I5cv");var a=n("pVnL"),r=n.n(a),o=n("lwsE"),s=n.n(o),c=n("W8MJ"),i=n.n(c),u=n("7W2i"),l=n.n(u),d=n("a1gu"),p=n.n(d),h=n("Nsbk"),f=n.n(h),v=n("q1tI"),m=n.n(v);function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"open";return(function(n){l()(o,n);var a=g(o);function o(){return s()(this,o),a.apply(this,arguments)}return i()(o,[{key:"componentDidMount",value:function(){if("function"!=typeof this.instanceRef.handleScrollToTop)throw new Error("WrappedComponent lacks a handleScrollToTop function")}},{key:"componentWillReceiveProps",value:function(e){var n=this.props[t];!0===e[t]&&!1===n&&this.instanceRef.handleScrollToTop()}},{key:"render",value:function(){var t=this;return(m.a.createElement(e,r()({ref:function(e){t.instanceRef=e}},this.props)))}}]),o}(m.a.Component))}},"8oVw":function(e,t,n){"use strict";(function(e){n("I5cv");var a=n("pVnL"),r=n.n(a),o=n("lwsE"),s=n.n(o),c=n("W8MJ"),i=n.n(c),u=n("PJYZ"),l=n.n(u),d=n("7W2i"),p=n.n(d),h=n("a1gu"),f=n.n(h),v=n("Nsbk"),m=n.n(v),g=(n("2Spj"),n("q1tI")),y=n.n(g),b=n("17x9"),S=n.n(b),R=n("kvuF"),E=n("EzXa"),O=n("XnKn"),k=n("+nW5"),C=n("ljAj"),M=n.n(C);function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=m()(e);if(t){var r=m()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return f()(this,n)}}var w=function(t){p()(a,t);var n=_(a);function a(e){var t;return s()(this,a),(t=n.call(this,e)).handleCloseAlertTip=t.handleCloseAlertTip.bind(l()(t)),t.handleCloseStatusTip=t.handleCloseStatusTip.bind(l()(t)),t.state={shouldShowStatusTip:null},t}return i()(a,[{key:"handleCloseAlertTip",value:function(){O.storage.set("mini-should-show-alert",!1),this.forceUpdate()}},{key:"handleCloseStatusTip",value:function(){var e=this.state.shouldShowStatusTip;this.setState({shouldShowStatusTip:!e})}},{key:"mounted",value:function(){this.props.fetchDegradeConversationsDetail({})}},{key:"render",value:function(){var t=this.state.shouldShowStatusTip,n=this.props,a=n.keyword,o=n.socketFeedback,s=n.networkStatus,c=n.currentUser,i=n.isScChat,u=c.type,l=c.distribution_status,d=!1!==O.storage.get("mini-should-show-alert"),p="subaccount"===u&&"hang_up"===l&&!0!==t,h="online"===s?o&&o.network?{type:o.status,message:o.content}:null:{type:"error",message:e("common.network_offline")};return y.a.createElement("div",{className:M.a.root},y.a.createElement(R.a,this.props),h&&y.a.createElement(k.a,{type:h.type,showIcon:!0,message:h.message}),d&&!i&&y.a.createElement(k.a,{type:"warn",showIcon:!0,closeable:!0,message:e("common.alert"),onClose:this.handleCloseAlertTip}),p&&y.a.createElement(k.a,{type:"warn",showIcon:!0,closeable:!0,message:e("common.hangup_tips"),onClose:this.handleCloseStatusTip}),y.a.createElement("div",{className:M.a.conversationLists},y.a.createElement(E.a,r()({isInSearch:!!a},this.props))))}}]),a}(y.a.PureComponent);w.propTypes={isScChat:S.a.bool,keyword:S.a.string,feedback:S.a.object,currentUser:S.a.object,networkStatus:S.a.string,socketFeedback:S.a.object,totalUnreadConversationsCount:S.a.number,fetchDegradeConversationsDetail:S.a.func},t.a=w}).call(this,n("kiXb").t)},"9bFT":function(e,t,n){"use strict";n("I5cv");var a=n("lwsE"),r=n.n(a),o=n("W8MJ"),s=n.n(o),c=n("PJYZ"),i=n.n(c),u=n("7W2i"),l=n.n(u),d=n("a1gu"),p=n.n(d),h=n("Nsbk"),f=n.n(h),v=(n("2Spj"),n("bHtr"),n("bWfx"),n("q1tI")),m=n.n(v),g=n("17x9"),y=n.n(g),b=n("kIFs"),S=n.n(b),R=n("h4gR"),E=n("YmlJ"),O=n.n(E),k=n("YhMV"),C=n.n(k),M=n("WuDf"),_=n.n(M);function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var I=function(e){l()(n,e);var t=w(n);function n(e){var a;return r()(this,n),(a=t.call(this,e)).renderHalfStar=a.renderHalfStar.bind(i()(a)),a.handleClickStar=a.handleClickStar.bind(i()(a)),a.handleMouseEvent=a.handleMouseEvent.bind(i()(a)),a}return s()(n,[{key:"handleClickStar",value:function(){var e=this.props,t=e.handleClick,n=e.index;t&&t(n)}},{key:"handleMouseEvent",value:function(e){var t=this.props,n=t.handleHover,a=t.index;n&&n(e,a)}},{key:"renderHalfStar",value:function(e,t){var n="".concat(_.a.full," ").concat(_.a[t]);return(m.a.createElement(m.a.Fragment,null,m.a.createElement(R.Icon,{svg:O.a,className:_.a.empty}),m.a.createElement("div",{className:_.a.layout,style:{width:"".concat(100*e,"%")}},m.a.createElement(R.Icon,{svg:C.a,className:n}))))}},{key:"render",value:function(){var e=this,t=this.props,n=t.rate,a=t.size,r=t.editable,o="".concat(_.a.root," ").concat(_.a[a]," ").concat(r?_.a.editable:"");return m.a.createElement("div",{className:o,onClick:this.handleClickStar,onMouseEnter:function(){return e.handleMouseEvent(!0)}},0===n?m.a.createElement(R.Icon,{svg:O.a,className:_.a.empty}):1===n?m.a.createElement(R.Icon,{svg:C.a,className:_.a.full}):this.renderHalfStar(n,a))}}]),n}(m.a.PureComponent);I.propTypes={rate:y.a.number.isRequired,index:y.a.number.isRequired,size:y.a.string.isRequired,handleClick:y.a.func,handleHover:y.a.func,editable:y.a.bool},I.defaultProps={size:"normal",index:0,rate:1};var j=I;function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var P=function(e){l()(n,e);var t=T(n);function n(e){var a;return r()(this,n),(a=t.call(this,e)).generateStars=a.generateStars.bind(i()(a)),a.handleRateChange=a.handleRateChange.bind(i()(a)),a.handleHoverChange=a.handleHoverChange.bind(i()(a)),a.state={hoverScore:void 0},a}return s()(n,[{key:"handleRateChange",value:function(e){var t=this.props,n=t.onRateChange;t.editable&&n&&n(e)}},{key:"handleHoverChange",value:function(e,t){if(this.props.editable){var n=e?t+1:void 0;this.setState({hoverScore:n})}}},{key:"generateStars",value:function(e,t){if(e<t){var n=Math.floor(e),a=parseFloat((e-n).toFixed(1));return new Array(t).fill(1,0,n).fill(a,n,n+1).fill(0,n+1)}return new Array(t).fill(1)}},{key:"render",value:function(){var e=this,t=this.props,n=t.score,a=t.total,r=t.size,o=t.editable,s=this.state.hoverScore,c=void 0!==s&&s>n?s:n,i=this.generateStars(c,a);return m.a.createElement("div",{className:S.a.root},m.a.createElement("div",{className:S.a.stars,onMouseLeave:function(){return e.handleHoverChange(!1)}},i.map((function(t,n){return m.a.createElement(j,{editable:o,key:n,rate:t,index:n,size:r,handleClick:e.handleRateChange,handleHover:e.handleHoverChange})}))))}}]),n}(m.a.PureComponent);P.propTypes={size:y.a.string.isRequired,score:y.a.number.isRequired,total:y.a.number,onRateChange:y.a.func,editable:y.a.bool},P.defaultProps={size:"normal",score:5,total:5,editable:!0};t.a=P},A5hp:function(e,t,n){"use strict";n("I5cv");var a=n("lwsE"),r=n.n(a),o=n("W8MJ"),s=n.n(o),c=n("7W2i"),i=n.n(c),u=n("a1gu"),l=n.n(u),d=n("Nsbk"),p=n.n(d),h=n("q1tI"),f=n.n(h),v=n("17x9"),m=n.n(v),g=n("h4gR"),y=n("MgYr"),b=n.n(y),S=n("6gHG"),R=n.n(S);function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return l()(this,n)}}var O=function(e){i()(n,e);var t=E(n);function n(){return r()(this,n),t.apply(this,arguments)}return s()(n,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.closeModal,a=e.noCancel,r="".concat(R.a.root," ").concat(a?"":R.a.hasCancel);return f.a.createElement("div",{className:r},f.a.createElement("div",{className:R.a.title},t),!a&&f.a.createElement(g.Icon,{svg:b.a,className:R.a.cancel,onClick:n}))}}]),n}(f.a.PureComponent);O.propTypes={title:m.a.string,closeModal:m.a.func,noCancel:m.a.bool},t.a=O},"B/Zq":function(e,t,n){"use strict";(function(e){n("I5cv");var a=n("lwsE"),r=n.n(a),o=n("W8MJ"),s=n.n(o),c=n("PJYZ"),i=n.n(c),u=n("7W2i"),l=n.n(u),d=n("a1gu"),p=n.n(d),h=n("Nsbk"),f=n.n(h),v=(n("2Spj"),n("q1tI")),m=n.n(v),g=n("17x9"),y=n.n(g),b=n("W9K7"),S=n.n(b),R=n("XnKn"),E=n("KmjB");function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var k=66496,C=32768,M=function(t){l()(a,t);var n=O(a);function a(e){var t;return r()(this,a),(t=n.call(this,e)).handleClickNotices=t.handleClickNotices.bind(i()(t)),t.getHintRef=t.getHintRef.bind(i()(t)),t}return s()(a,[{key:"componentDidMount",value:function(){if(this.hintRef){var e=this.hintRef.firstElementChild;e&&(e.className=S.a.policy,e.addEventListener("click",this.handleClickNotices))}}},{key:"componentWillUnmount",value:function(){if(this.hintRef){var e=this.hintRef.firstElementChild;e&&e.removeEventListener("click",this.handleClickNotices)}}},{key:"handleClickNotices",value:function(){var e=this.props.region;window.open("".concat(R.cancelOrderPolicy[e]))}},{key:"getHintRef",value:function(e){e&&(this.hintRef=e)}},{key:"render",value:function(){var t=this.props.code,n=Object(E.f)(t,k),a=Object(E.f)(t,C);if(!n&&!a)return null;var r=n?e("cancel_order.meta.not_send"):a?e("cancel_order.meta.send_it"):"";return(m.a.createElement("div",{ref:this.getHintRef,className:S.a.root,dangerouslySetInnerHTML:{__html:r}}))}}]),a}(v.PureComponent);M.propTypes={region:y.a.string,code:y.a.number},t.a=M}).call(this,n("kiXb").t)},B5G6:function(e,t,n){"use strict";(function(e){n("I5cv");var a=n("J4zp"),r=n.n(a),o=n("lwsE"),s=n.n(o),c=n("W8MJ"),i=n.n(c),u=n("PJYZ"),l=n.n(u),d=n("7W2i"),p=n.n(d),h=n("a1gu"),f=n.n(h),v=n("Nsbk"),m=n.n(v),g=(n("2Spj"),n("bWfx"),n("0l/t"),n("/8Fb"),n("q1tI")),y=n.n(g),b=n("17x9"),S=n.n(b),R=n("kLRj"),E=n("XnKn"),O=n("Hxv6"),k=n.n(O),C=n("se/o"),M=n("gzZ0"),_=n.n(M);function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=m()(e);if(t){var r=m()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return f()(this,n)}}var I=function(t){p()(a,t);var n=w(a);function a(t){var r;return s()(this,a),(r=n.call(this,t)).state={selectedTab:null,tabsAndContents:[]},r.emptyText=e("common.scroll_list.no_data"),r.handleTabClick=r.handleTabClick.bind(l()(r)),r}return i()(a,[{key:"handleTabClick",value:function(e){this.setState({selectedTab:e}),this.props.onTabChange&&this.props.onTabChange(e)}},{key:"render",value:function(){var e=this,t=this.state,n=t.selectedTab,a=t.tabsAndContents,o=this.props,s=o.status,c=o.emptyImage,i=o.emptyText;return s===E.HttpStatus.SUCCEED&&0===a.length?y.a.createElement(R.a,{image:c,text:i||this.emptyText}):y.a.createElement("div",{className:_.a.root},y.a.createElement("div",{className:_.a.tabs},a.map((function(t,o){var s=r()(t,2),c=s[0],i=s[1];0!==o||n||(n=c);var u="".concat(a.length>1?c===n?_.a.active:_.a.tab:_.a.header," ").concat(i.tabClass?i.tabClass:"");return(y.a.createElement("div",{key:c,className:u,onClick:function(){return e.handleTabClick(c)}},i.label))}))),a.map((function(e){var t=r()(e,2),a=t[0],o=t[1];return(y.a.createElement("div",{key:a,className:"".concat(a!==n?_.a.hidden:_.a.main)},"function"==typeof o.content?o.content(n):o.content))})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.domObject;return{tabsAndContents:Object.entries(n).map((function(e){var t=r()(e,2),n=t[0],a=t[1];return a.hasData?[n,a]:null})).filter((function(e){return e}))}}}]),a}(y.a.PureComponent);I.propTypes={status:S.a.string,domObject:S.a.object,emptyText:S.a.string,emptyImage:S.a.string,onTabChange:S.a.func},I.defaultProps={emptyImage:k.a},t.a=Object(C.a)(I)}).call(this,n("kiXb").t)},BDCo:function(e,t,n){e.exports=n.p+"6737bec27cc02bea0f26342987e4f0eb.png"},DDCE:function(e,t,n){"use strict";(function(e){n("I5cv");var a=n("lwsE"),r=n.n(a),o=n("W8MJ"),s=n.n(o),c=n("PJYZ"),i=n.n(c),u=n("7W2i"),l=n.n(u),d=n("a1gu"),p=n.n(d),h=n("Nsbk"),f=n.n(h),v=(n("2Spj"),n("f3/d"),n("q1tI")),m=n.n(v),g=n("17x9"),y=n.n(g),b=n("4j81"),S=n("szol"),R=n("24kt"),E=n("WBRc"),O=n("XnKn"),k=n("FGBE"),C=n.n(k);function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var _=function(t){l()(a,t);var n=M(a);function a(e){var t;return r()(this,a),(t=n.call(this,e)).makeProductItemDom=t.makeProductItemDom.bind(i()(t)),t.handleLoadMoreProduct=t.handleLoadMoreProduct.bind(i()(t)),t.handleSearch=t.handleSearch.bind(i()(t)),t.handleSend=t.handleSend.bind(i()(t)),t.hasRenderedSearchBar=!1,t}return s()(a,[{key:"makeProductItemDom",value:function(t,n){var a=this,r=this.props,o=r.keyword,s=r.currentBuyer,c=r.isSubAccount,i=r.shopId,u=r.currentConversation,l=s.country,d=i===u.shop_id;return m.a.createElement("div",{key:t.id,className:C.a.productItemWrapper},m.a.createElement("div",{className:"".concat(C.a.productBody," ").concat(d?"":C.a.productBodyOther)},m.a.createElement(b.Image,{className:C.a.productPic,src:t.image,hash:t.image_hash,onClick:function(){Object(O.goToPcMall)(c,l,t.id,i)}}),m.a.createElement("div",{className:C.a.productInfo},m.a.createElement("div",{className:C.a.productName,onClick:function(){Object(O.goToPcMall)(c,l,t.id,i)}},m.a.createElement(E.a,{searchWords:o,textToHighlight:t.name,highlightClassName:C.a.highlighted})),m.a.createElement("div",{className:C.a.oldPrice},t.original_price_string),m.a.createElement("div",{className:C.a.newPrice},t.actual_price_string))),m.a.createElement("div",{className:"".concat(C.a.productFooter," ").concat(d?"":C.a.otherShopFooter)},m.a.createElement("div",{className:C.a.sendBtn,onClick:function(){a.handleSend(t)}},e("conversation_detail.product_drawer.send")),d&&m.a.createElement("div",{className:C.a.saleInfo},m.a.createElement("div",{className:C.a.verticalLine},"".concat(t.stock," ").concat(e("common.product.available"))),m.a.createElement("div",null,"".concat(t.sold," ").concat(e("common.product.sale"))))))}},{key:"handleLoadMoreProduct",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.props,n=t.fetchProductsRequested,a=t.shopId,r=t.keyword;n({shopId:a,keyword:r,reset:e.needReset})}},{key:"handleSend",value:function(e){var t=this.props,n=t.handleSendMessage,a=t.closePortal;n({type:"product",content:{product_id:e.id,shop_id:e.shop_id},textContent:e}),a&&a()}},{key:"handleSearch",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.props,n=t.fetchProductsRequested,a=t.shopId;n({shopId:a,keyword:e,reset:!0})}},{key:"render",value:function(){var e=this.props,t=e.listData,n=e.status,a=e.keyword,r=e.autoFocus;return!this.hasRenderedSearchBar&&n===O.HttpStatus.SUCCEED&&t.length>0&&(this.hasRenderedSearchBar=!0),m.a.createElement("section",{className:C.a.container},this.hasRenderedSearchBar&&m.a.createElement("div",{className:C.a.searchBar},m.a.createElement(R.a,{keyword:a,handleSearch:this.handleSearch,debounceWaitTime:500,debounceTimeSpan:99999,autoFocus:r})),m.a.createElement("div",{className:C.a.scrollContainer},m.a.createElement(S.a,{status:n,listData:t,makeItem:this.makeProductItemDom,onLoadMore:this.handleLoadMoreProduct,onRefresh:this.handleLoadMoreProduct})))}}]),a}(m.a.PureComponent);_.propTypes={shopId:y.a.number.isRequired,keyword:y.a.string,status:y.a.string.isRequired,listData:y.a.array.isRequired,fetchProductsRequested:y.a.func.isRequired,handleSendMessage:y.a.func.isRequired,currentConversation:y.a.object,closePortal:y.a.func,isSubAccount:y.a.bool,currentBuyer:y.a.object,autoFocus:y.a.bool},_.defaultProps={keyword:""},t.a=_}).call(this,n("kiXb").t)},DI0R:function(e,t,n){"use strict";(function(e){n("I5cv");var a=n("pVnL"),r=n.n(a),o=n("QILm"),s=n.n(o),c=n("lwsE"),i=n.n(c),u=n("W8MJ"),l=n.n(u),d=n("PJYZ"),p=n.n(d),h=n("7W2i"),f=n.n(h),v=n("a1gu"),m=n.n(v),g=n("Nsbk"),y=n.n(g),b=(n("2Spj"),n("q1tI")),S=n.n(b),R=n("T1DP"),E=n.n(R),O=n("17x9"),k=n.n(O),C=n("XftY"),M=n("FHw+"),_=n("ymbT"),w=n("kiWX"),I=n("XnKn"),j=n("tvxL"),T=["category","type","image"];function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=y()(e);if(t){var r=y()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return m()(this,n)}}var N=function(t){f()(a,t);var n=P(a);function a(e){var t;return i()(this,a),(t=n.call(this,e)).visitInSC=t.visitInSC.bind(p()(t)),t.visitOrderInSC=t.visitOrderInSC.bind(p()(t)),t.visitProductInSC=t.visitProductInSC.bind(p()(t)),t.renderCardHeader=t.renderCardHeader.bind(p()(t)),t}return l()(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.category,n=e.type,a=e.id,r=e.extraProps,o="".concat(n,"_message").concat("source"===t?"_source":""),s={};"source"===t?s["".concat(n,"_id")]=a:"offer"===n?s.itemid=a:s["".concat(n,"_id")]=a,Object(j.tracker)({shopId:r.shopId,section:"conversation_window",type:o,data:s,operation:"impression"})}},{key:"renderCardHeader",value:function(){var t=this.props.type,n=e(w.a.message[t]);return S.a.createElement("div",{className:E.a.header},n)}},{key:"visitInSC",value:function(){var e=this.props,t=e.category,n=e.type;"source"===t&&("product"===n?this.visitProductInSC():"order"===n&&this.visitOrderInSC())}},{key:"visitProductInSC",value:function(){var e=this.props.extraProps,t=e.isScChat,n=e.isSubAccount,a=e.scProductLink,r=e.mallProductLink,o=e.hasViewProductAccess,s=e.visitShopSellerCenterRequested,c=e.shopId,i=e.itemId;if(Object(j.tracker)({shopId:c,section:"conversation_window",type:"product_message_source",data:{product_id:i}}),t){var u=n?function(){s({shopId:c,itemId:i})}:a;Object(I.viewLinkWithAccess)(o,u)}else window.open(r)}},{key:"visitOrderInSC",value:function(){var e=this.props.extraProps,t=e.isScChat,n=e.hasViewOrderAccess,a=e.visitShopSellerCenterRequested,r=e.isSubAccount,o=e.shopId,s=e.orderLink,c=e.mallOrderLink,i=e.orderId;if(Object(j.tracker)({shopId:o,section:"conversation_window",type:"order_message_source",data:{order_id:i}}),t){var u=r?function(){a({shopId:o,orderId:i})}:s;Object(I.viewLinkWithAccess)(n,u)}else window.open(c)}},{key:"render",value:function(){var e=this.props,t=e.category,n=e.type,a=e.image,o=s()(e,T),c=o.extraProps,i=c.hasViewOrderAccess,u=c.hasViewProductAccess,l=c.isSend,d=i||u,p="".concat(E.a.root," ").concat("source"===t?E.a.source:E.a[n]);return S.a.createElement("div",{className:p,onClick:this.visitInSC,style:{cursor:d?"pointer":"default"}},"message"===t&&this.renderCardHeader(),"product"===n&&S.a.createElement(C.a,r()({category:t,image:a},o)),"order"===n&&S.a.createElement(M.a,r()({category:t,image:a},o)),"message"!==t||"order"!==n&&"product"!==n?S.a.createElement(_.a,r()({isSend:l,category:t,type:n},o)):null)}}]),a}(S.a.PureComponent);N.propTypes={id:k.a.oneOfType([k.a.number,k.a.string]),currentUser:k.a.object,category:k.a.string.isRequired,type:k.a.string.isRequired,image:k.a.string,extraProps:k.a.object.isRequired},N.defaultProps={category:"source"},t.a=N}).call(this,n("kiXb").t)},EzXa:function(e,t,n){"use strict";(function(e){n("I5cv");var a=n("pVnL"),r=n.n(a),o=n("lwsE"),s=n.n(o),c=n("W8MJ"),i=n.n(c),u=n("PJYZ"),l=n.n(u),d=n("7W2i"),p=n.n(d),h=n("a1gu"),f=n.n(h),v=n("Nsbk"),m=n.n(v),g=(n("2Spj"),n("0l/t"),n("Z2Ku"),n("q1tI")),y=n.n(g),b=n("17x9"),S=n.n(b),R=n("Hxv6"),E=n.n(R),O=n("2r9f"),k=n.n(O),C=n("MP93"),M=n("FBkk"),_=n("kLRj"),w=n("S7/o"),I=n("tvxL"),j=n("/IO4"),T=n.n(j);function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=m()(e);if(t){var r=m()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return f()(this,n)}}var N=["Unread","All","Pinned","Unreplied"],x=["Unread","Unreplied"],D=function(t){p()(a,t);var n=P(a);function a(e){var t;return s()(this,a),(t=n.call(this,e)).state={resetRowsMap:!1},t.listNode=null,t.scrollTop=0,t.needScrollToRow=!1,t.getListRef=t.getListRef.bind(l()(t)),t.handleListScroll=t.handleListScroll.bind(l()(t)),t.makeRenderedCell=t.makeRenderedCell.bind(l()(t)),t.markConversation=t.markConversation.bind(l()(t)),t.closeConversation=t.closeConversation.bind(l()(t)),t.handleRowRendered=t.handleRowRendered.bind(l()(t)),t.deleteConversation=t.deleteConversation.bind(l()(t)),t.restartConversation=t.restartConversation.bind(l()(t)),t.loadMoreRowsRequested=t.loadMoreRowsRequested.bind(l()(t)),t.handleClickConversation=t.handleClickConversation.bind(l()(t)),t.handleResetCacheMap=t.handleResetCacheMap.bind(l()(t)),t}return i()(a,[{key:"componentDidUpdate",value:function(e){var t=this.props.sortedConversations,n=e.sortedConversations.length,a=t.length;n<a&&(this.stopIndex=this.stopIndex+a-n,this.needScrollToRow=!0);var r=this.props,o=r.filter,s=r.conversationDirection;if(this.needScrollToRow&&x.includes(o)&&"latest"===s){var c=this.stopIndex<0||this.scrollTop<60?0:this.stopIndex;this.listNode&&this.listNode.scrollToRow(c)}this.needScrollToRow=!1}},{key:"getListRef",value:function(e){this.listNode=e}},{key:"handleListScroll",value:function(e){this.scrollTop=e}},{key:"handleRowRendered",value:function(e){this.needScrollToRow||(this.stopIndex=e)}},{key:"loadMoreRowsRequested",value:function(){(0,this.props.fetchConversationsRequested)({direction:"older"})}},{key:"makeRenderedCell",value:function(e,t){var n=this.props,a=n.keyword,r=n.currentUser,o=n.isSubAccount,s=n.updateOpenedMenu,c=n.currentConversation,i=n.pinConversationRequested,u=n.openedMenu,l=n.draftHash,d=n.isInSearch,p=n.isScChat;return d?y.a.createElement(C.a,{currentUser:r,style:t,keyword:a,conversation:e,isSubAccount:o,onClick:this.handleClickConversation}):y.a.createElement(M.a,{style:t,isScChat:p,draftHash:l,openedMenu:u,currentUser:r,conversation:e,isSubAccount:o,updateOpenedMenu:s,onClick:this.handleClickConversation,markConversation:this.markConversation,pinConversation:i,closeConversation:this.closeConversation,deleteConversation:this.deleteConversation,restartConversation:this.restartConversation,currentConversationId:c.id})}},{key:"markConversation",value:function(e,t,n,a,r){this.props.markMessagesRequested({shopId:e,latestMessageId:t,conversationId:n,isRead:a,unreadCount:r})}},{key:"deleteConversation",value:function(e,t){this.props.deleteConversationRequested({conversationId:e,shopId:t})}},{key:"closeConversation",value:function(e,t){this.props.changeConversationStatusRequested({shopId:e,conversationId:t,status:"closed"})}},{key:"restartConversation",value:function(e,t){this.props.changeConversationStatusRequested({shopId:e,conversationId:t,status:"activated"})}},{key:"handleClickConversation",value:function(e){var t=this.props,n=t.isInSearch,a=t.currentConversation,r=t.showConversationRequested,o=t.searchConversationsRequested,s=t.updateConversationDetailStatus,c=e.id,i=e.unread_count;if(n)return o({}),void r({conversation:e,read:!0,refresh:!0});a?c!==a.id&&(Object(I.tracker)({section:"chat_list",type:"chat_user",data:{rebbot:i}}),r({conversation:e,read:i>0,refresh:!0})):(Object(I.tracker)({section:"chat_list",type:"chat_user",data:{rebbot:i}}),r({conversation:e,read:i>0,refresh:!0}));s({shouldShowConversationDetail:!0})}},{key:"handleResetCacheMap",value:function(){this.setState({resetRowsMap:!1})}},{key:"render",value:function(){var t=this.props,n=t.results,a=t.keyword,o=t.listsHash,s=t.isInSearch,c=t.sortedConversations,i=t.currentConversation,u=t.openedMenu,l=t.conversationHttpStatus,d=t.searchConversationHttpStatus,p={};if(s)p={status:d,isInfinite:!1,listItems:n,extraProps:{keyword:a}};else{var h={openedMenu:u,listsHash:o,currentConversation:i};p={status:l,listItems:c,resetRowsMap:this.state.resetRowsMap,loadMoreRowsRequested:this.loadMoreRowsRequested,extraProps:h}}return 0===p.listItems.length&&"succeed"===p.status?y.a.createElement(_.a,{classname:T.a.empty,image:s?E.a:k.a,text:e("conversation_list.no_search_result")}):y.a.createElement(w.a,r()({},p,{needPaddingBottom:!0,getListRef:this.getListRef,handleListScroll:this.handleListScroll,makeRenderedCell:this.makeRenderedCell,handleRowRendered:this.handleRowRendered,onResetCacheMap:this.handleResetCacheMap}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=t.resetRowsMap,a=t.filter,r=e.filter,o=null;if(r!==a){o={filter:r};var s=N.includes(a)&&N.includes(r)&&a!==r;n!==s&&(o.resetRowsMap=s)}return o}}]),a}(y.a.PureComponent);D.propTypes={filter:S.a.string,results:S.a.array,keyword:S.a.string,isScChat:S.a.bool,listsHash:S.a.string,draftHash:S.a.object,isInSearch:S.a.bool,openedMenu:S.a.string,currentUser:S.a.object,isSubAccount:S.a.bool,currentUserId:S.a.number,updateOpenedMenu:S.a.func,sortedConversations:S.a.array,currentConversation:S.a.object,markMessagesRequested:S.a.func,conversationDirection:S.a.string,conversationHttpStatus:S.a.string,pinConversationRequested:S.a.func,showConversationRequested:S.a.func,fetchConversationsRequested:S.a.func,deleteConversationRequested:S.a.func,searchConversationsRequested:S.a.func,searchConversationHttpStatus:S.a.string,changeConversationStatusRequested:S.a.func,updateConversationDetailStatus:S.a.func},t.a=D}).call(this,n("kiXb").t)},FBkk:function(e,t,n){"use strict";var a=n("q1tI"),r=n.n(a),o=n("vTmi"),s=n("/MKj"),c=n("tvxL");t.a=Object(s.b)((function(e,t){return{lastMessage:Object(c.conversationLastMessageSelector)(t.conversation.id)(e)}}),{})((function(e){return r.a.createElement(o.a,e)}))},"FHw+":function(e,t,n){"use strict";(function(e){n("I5cv");var a=n("lwsE"),r=n.n(a),o=n("W8MJ"),s=n.n(o),c=n("PJYZ"),i=n.n(c),u=n("7W2i"),l=n.n(u),d=n("a1gu"),p=n.n(d),h=n("Nsbk"),f=n.n(h),v=(n("2Spj"),n("q1tI")),m=n.n(v),g=n("oL4b"),y=n.n(g),b=n("tIYL"),S=n.n(b),R=n("17x9"),E=n.n(R),O=n("4j81"),k=n("h4gR"),C=n("WNfc"),M=n.n(C),_=n("4Al/"),w=n.n(_),I=n("VZ59"),j=n.n(I),T=n("r92p"),P=n.n(T),N=n("tMYO"),x=n.n(N),D=n("6XUW"),q=n.n(D),L=n("XnKn");function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var W={unpaid:w.a,to_ship:j.a,shipping:P.a,completed:x.a,cancelled:q.a,refund:M.a},B=function(t){l()(a,t);var n=A(a);function a(e){var t;return r()(this,a),(t=n.call(this,e)).renderOrderStatus=t.renderOrderStatus.bind(i()(t)),t.renderOrderInfo=t.renderOrderInfo.bind(i()(t)),t}return s()(a,[{key:"renderOrderStatus",value:function(e){var t=e.status,n=e.statusText,a=W[t];return m.a.createElement("div",{className:y.a.orderStatus},m.a.createElement(k.Icon,{svg:a,className:"".concat(y.a.statusIcon," ").concat(y.a[t])}),m.a.createElement("div",{className:y.a.statusText,title:n},n))}},{key:"renderOrderInfo",value:function(t){var n=t.price;return(m.a.createElement("div",{className:y.a.orderInfo},m.a.createElement("div",{className:y.a.firstBlock},m.a.createElement("div",{className:y.a.payment},e("common.order.payment"),": "),m.a.createElement("div",{className:y.a.income},n))))}},{key:"render",value:function(){var t=this.props,n=t.category,a=t.image,r=t.price,o=t.extraProps,s=t.imageHash,c=o.itemCount,i=this.renderOrderStatus(o),u=e("conversation_detail.message_list.order_total_price",{orderTotalPrice:r}),l=e(Object(L.formatNumberKey)("conversation_detail.message_list.order_product_count",c),{orderProductCount:c});return m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:S.a.detailBlock},m.a.createElement("div",{className:S.a.image},m.a.createElement(O.Image,{src:a,hash:s}),m.a.createElement("div",{className:S.a.imageBorder})),m.a.createElement("div",{className:S.a.content},i,"source"===n?m.a.createElement("div",{className:y.a.detail},m.a.createElement("div",{className:y.a.payment,title:u},u),m.a.createElement("div",{className:S.a.divider}),m.a.createElement("div",{className:y.a.sourceCount,title:l},l)):m.a.createElement("div",{className:y.a.count},l))),"message"===n&&this.renderOrderInfo({price:r,extraProps:o}))}}]),a}(m.a.PureComponent);B.propTypes={image:E.a.string,price:E.a.string,category:E.a.string,extraProps:E.a.object.isRequired},t.a=B}).call(this,n("kiXb").t)},FO8H:function(e,t,n){"use strict";n("I5cv");var a=n("lwsE"),r=n.n(a),o=n("W8MJ"),s=n.n(o),c=n("7W2i"),i=n.n(c),u=n("a1gu"),l=n.n(u),d=n("Nsbk"),p=n.n(d),h=n("q1tI"),f=n.n(h),v=n("/MKj"),m=n("tvxL"),g=(n("RW0V"),n("ioFf"),n("0l/t"),n("mYba"),n("8+KV"),n("jm62"),n("WLL4"),n("HAE/"),n("lSNA")),y=n.n(g),b=n("PJYZ"),S=n.n(b),R=(n("2Spj"),n("17x9")),E=n.n(R),O=n("pVnL"),k=n.n(O),C=n("QILm"),M=n.n(C),_=(n("dZ+Y"),n("INYr"),n("L9s1"),n("Z2Ku"),n("I78e"),n("bWfx"),n("91GP"),n("YJVH"),n("C5SH")),w=n("s3ZY"),I=n("GqUL"),j=n("Iatj"),T=n("gfNt"),P=n("h4gR"),N=n("6HER"),x=n.n(N),D=n("615J"),q=n.n(D);function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return l()(this,n)}}var A=function(e){i()(n,e);var t=L(n);function n(){return r()(this,n),t.apply(this,arguments)}return s()(n,[{key:"componentDidMount",value:function(){Object(m.tracker)({section:"conversation_window",type:"latest_message",operation:"impression"})}},{key:"render",value:function(){var e=this.props,t=e.username,n=e.message,a=e.onClick;return(f.a.createElement("div",{className:q.a.root,onClick:function(){Object(m.tracker)({section:"conversation_window",type:"latest_message"}),a&&a()}},f.a.createElement("span",{className:q.a.newMessageUsername},t,":"),f.a.createElement("div",{className:q.a.newMessageContent},Object(m.previewMessage)(n)),f.a.createElement(P.Icon,{svg:x.a,className:q.a.newMessageArrow})))}}]),n}(f.a.PureComponent);A.propTypes={username:E.a.string,message:E.a.object,onClick:E.a.func.isRequired};var W=A,B=n("furG"),F=n("se/o"),U=n("XnKn"),H=n("yghM"),G=n("KmjB"),K=n("HSHk"),V=n("Mqqo"),Y=n("q+Hb"),X=n.n(Y);function J(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return l()(this,n)}}var z=U.MessageTypes.MSG_TYPE_IMAGE,Z=U.MessageTypes.MSG_TYPE_TEXT,Q=U.MessageTypes.MSG_TYPE_WEBVIEW,$=U.MessageTypes.MSG_TYPE_NOTIFICATION,ee=U.MessageTypes.MSG_TYPE_RATE_CARDS,te=U.MessageTypes.MSG_TYPE_VOUCHER_WEB,ne=U.MessageTypes.MSG_TYPE_FEED_STORY,ae=U.MessageTypes.MSG_TYPE_CART_REMINDER,re=function(e){i()(n,e);var t=J(n);function n(e){var a;return r()(this,n),(a=t.call(this,e)).keyMapper=a.keyMapper.bind(S()(a)),a.getListRef=a.getListRef.bind(S()(a)),a.handleWheel=a.handleWheel.bind(S()(a)),a.rowRenderer=a.rowRenderer.bind(S()(a)),a.handleScroll=a.handleScroll.bind(S()(a)),a.handleRowsRender=a.handleRowsRender.bind(S()(a)),a.handleRecomputeRow=a.handleRecomputeRow.bind(S()(a)),a.handleMessageListChanged=a.handleMessageListChanged.bind(S()(a)),a.handleConversationChanged=a.handleConversationChanged.bind(S()(a)),a.handleMessageListLengthUnchanged=a.handleMessageListLengthUnchanged.bind(S()(a)),a.addExposedMessageId=a.addExposedMessageId.bind(S()(a)),a.debounceShouldFetchPrevMessage=Object(H.a)(a.shouldFetchPrevMessage.bind(S()(a))),a.scrollUpHandler=Object(H.b)(G.g,10),a.viewNewMessage=a.markMessage.bind(S()(a)),a.containerProps={onWheel:a.handleWheel},a._cache=new j.a({fixedWidth:!0,keyMapper:a.keyMapper}),a.imgCache={},a.listNode=null,a.targetIndex=null,a.startIndex=0,a.stopIndex=0,a.scrollTop=0,a.hasSourceMessageMap={},a.state={firstUnreadMsgId:null,shouldRenderNewMessageTip:!1},a.exposedMessageIds=[],a}return s()(n,[{key:"addExposedMessageId",value:function(e){this.exposedMessageIds.push(e)}},{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e.handleConversationChanged(e.props)}))}},{key:"shouldComponentUpdate",value:function(e,t){var n=this,a=Object.keys(e),r=Object.keys(this.props);return a.length!==r.length||(t.shouldRenderNewMessageTip!==this.state.shouldRenderNewMessageTip||a.some((function(t){var a=e[t],r=n.props[t],o=!1;switch(t){case"currentConversation":o=a.id!==r.id;break;case"unreadMessageIds":o=!Object(G.a)(a,r);break;case"messageList":o=!Object(m.areDeepEqualMessageList)(a,r);break;default:o=a!==r}return o})))}},{key:"componentDidUpdate",value:function(e){var t=e.hasMoreOlderMessage,n=e.messageList,a=e.unreadMessageIds,r=e.currentConversation,o=this.props,s=o.hasMoreOlderMessage,c=o.messageList,i=o.unreadMessageIds,u=o.currentConversation,l={hasMoreOlderMessage:t,messageList:n,conversation:r,unreadMessageIds:a},d={hasMoreOlderMessage:s,messageList:c,unreadMessageIds:i,currentConversationCanRead:o.currentConversationCanRead,conversation:u};u.id===r.id?c.length===n.length?this.handleMessageListLengthUnchanged(l,d):this.handleMessageListChanged(l,d):(this.handleConversationChanged(d),this.exposedMessageIds=[])}},{key:"handleConversationChanged",value:function(e){this.startIndex=0,this.stopIndex=0,this.hasSourceMessageMap={},this.cleanTargetIndex(),this.scrollUpHandler.reset(),this.listNode&&(this.listNode.Grid._rowSizeAndPositionManager.arrangeOffsetData(),this.listNode.forceUpdateGrid(),this.listNode.scrollToPosition(200)),this._cache.clearAll();var t=e.messageList,n=e.unreadMessageIds,a=n.length?n[0]:null,r=a?t.findIndex((function(e){return e.id===a})):null;this.handleAppendMessage({index:r}),this.setState({firstUnreadMsgId:a,shouldRenderNewMessageTip:!1})}},{key:"handleMessageListLengthUnchanged",value:function(e,t){var n=t.messageList,a=t.unreadMessageIds,r=t.currentConversationCanRead,o=this.checkForceRerender(e.messageList,n),s=e.hasMoreOlderMessage&&!t.hasMoreOlderMessage;(o||s)&&this.listNode&&this.listNode.forceUpdateGrid(),(r||e.unreadMessageIds.length&&!a.length)&&this.setState({shouldRenderNewMessageTip:!1});var c=Object(G.d)(n),i=Object(G.d)(e.messageList);if(c&&i){var u=c.type,l=c.request_id,d=c.errorCode,p=c.message_option,h=i.request_id,f=i.retryRequestId,v=i.errorCode,m=i.message_option;(i.id!==c.id&&c.isFaking||u===Z&&(l===h&&d!==v&&43===d||(l===h||l===f)&&p!==m&&0!==p)||u===ae&&i.fetchStatus.includes("pending")&&"done"===c.fetchStatus)&&this.handleAppendMessage()}}},{key:"handleMessageListChanged",value:function(e,t){var n=t.messageList,a=t.unreadMessageIds,r=t.conversation,o=t.currentConversationCanRead,s=n.length,c=e.messageList.length,i=0===c&&s>0||this.checkAppend(n,e.messageList),u=(Object(G.d)(n)||{}).to_id===r.to_id&&s>c,l=n.findIndex((function(e){return e.id===r.last_read_message_id})),d=!0;(u||!a.length||this.stopIndex>=l||o)&&(d=!1),this.setState({shouldRenderNewMessageTip:d}),!i||!u&&c&&c-1!==this.stopIndex||(this.cleanTargetIndex(),this.handleAppendMessage()),i||(this.cleanTargetIndex(),this.scrollToTarget=this.startIndex+s-c,this.bufferScrollTop=this.scrollTop,this.handlePrependMessage())}},{key:"getListRef",value:function(e){this.listNode=e}},{key:"keyMapper",value:function(e){var t=this.props.messageList[e];return t&&t.id}},{key:"handleWheel",value:function(e){this.targetIndex&&e.deltaY<0&&this.cleanTargetIndex()}},{key:"markMessage",value:function(e){var t=this.props,n=t.showChatWindow,a=t.showConversationDetail,r=t.markMessagesRequested,o=t.currentConversation,s=o.status,c=o.shop_id,i=o.id,u=o.unread_count,l=o.latest_message_id;n&&a&&"closed"!==s&&u>0&&r({shopId:c,isRead:!0,conversationId:i,latestMessageId:l,unreadCount:u}),!e&&this.handleAppendMessage()}},{key:"checkForceRerender",value:function(e,t){var n=e.slice(this.startIndex,this.stopIndex+1),a=t.slice(this.startIndex,this.stopIndex+1);return!Object(m.areDeepEqualMessageList)(n,a)}},{key:"checkAppend",value:function(e,t){return(t.length?t[0].id:null)===(e.length?e[0].id:null)}},{key:"handleAppendMessage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.props.messageList.length){var t=e.alignment,n=void 0===t?"end":t,a=e.index,r=void 0===a?null:a,o=r||this.props.messageList.length-1;"end"===n&&(this.targetIndex={index:o,range:this.makeCheckRange(this.startIndex,o)});var s=this.listNode&&"end"!==n?this.listNode.getOffsetForRow({index:o,alignment:n}):null;this.goToBottom({toRow:"end"===n,index:o<0?0:o,position:s})}}},{key:"handlePrependMessage",value:function(){if(this.listNode){var e=this.listNode.getOffsetForRow({index:this.scrollToTarget,alignment:"start"});this.listNode.scrollToPosition(e+this.bufferScrollTop),this._resolveGridPosition()}}},{key:"rowRenderer",value:function(e){var t=this,n=e.index,a=(e.key,e.parent),r=e.style,o=this.props,s=o.messageList,c=o.hasMoreOlderMessage,i=o.isSubAccount,u=o.currentUser,l=s[n];if(!l)return null;var d=s[n-1]||{},p=d.type,h=d.created_timestamp,v=d.content,m=void 0===v?{}:v,g=d.to_id,y=1e3*l.created_timestamp,b=1e3*h,S=y&&!b||y-b>3e5||0===n&&!c?Object(U.customizeTime)(y):null,R=l.id===this.state.firstUnreadMsgId,E=n===s.length-1,O=p===$||p===Q&&m&&m.type===ee&&(u.id!==g||i);return f.a.createElement(I.a,{key:l.id,parent:a,rowIndex:n,columnIndex:0,cache:this._cache},(function(e){var a=e.measure;return t.renderMessage({index:n,style:r,message:l,measure:a,timeFlag:S,isLastMessage:E,newMessageFlag:R,isLastSystemMessage:O})}))}},{key:"handleScroll",value:function(e){var t=e.clientHeight,n=e.scrollHeight,a=e.scrollTop,r=this.props,o=r.hasMoreOlderMessage,s=r.handleComponentScroll;!1!==o&&a<200&&0!==t&&a<this.scrollTop&&this.debounceShouldFetchPrevMessage("older"),this.targetIndex&&this.scrollUpHandler.check(this.scrollTop,a)&&this.cleanTargetIndex(),this.scrollTop>a?s("up"):s("down"),this.scrollTop=a,t+a===n&&Object(H.a)(this.viewNewMessage,250)(!0)}},{key:"handleRecomputeRow",value:function(e){this.targetIndex&&(this.targetIndex.range=this.targetIndex.range.map((function(t){return t.index!==e?t:Object.assign({},t,{measured:t.measured-1})})),this.listNode&&this.listNode.scrollToRow(this.targetIndex.index),this._resolveGridPosition(),this.targetIndex.range.every((function(e){return 0===e.measured}))&&this.cleanTargetIndex())}},{key:"cleanTargetIndex",value:function(){this.targetIndex=null}},{key:"makeCheckRange",value:function(e,t){for(var n=[],a=this._cache,r=e<t?e:0;r<=t;){var o=this.props.messageList[r],s=o.id,c=o.type,i=o.textContent,u=o.translateStatus,l=a.has(r),d=c===z&&!this.imgCache[s],p=c===Z&&"enabled"===this.props.autoTranslation&&"succeed"!==u,h=c===ne&&i&&!i.id,f=d||p||h;l?f&&n.push({index:r,measured:2}):n.push({index:r,measured:f?2:1}),r++}return n}},{key:"handleRowsRender",value:function(e){var t=e.startIndex,n=e.stopIndex,a=this.props,r=a.messageList,o=a.currentConversationCanRead,s=a.setCurrentConversationCanRead;if(this.startIndex=t,this.stopIndex=n,this.targetIndex){var c=this.targetIndex.range.filter((function(e){return e.index>=t&&e.measured>0}));c.length?this.targetIndex.range=c:this.cleanTargetIndex()}this.stopIndex<r.length-1&&o?s({canRead:!1}):this.stopIndex!==r.length-1||o||s({canRead:!0})}},{key:"shouldFetchPrevMessage",value:function(e){if(this.scrollTop<200){var t=this.props;(0,t.fetchRequested)({conversation:t.currentConversation,direction:e})}}},{key:"goToBottom",value:function(e){var t=this,n=e.toRow,a=e.index,r=e.position;n?this.listNode&&this.listNode.scrollToRow(a):this.listNode&&this.listNode.scrollToPosition(r),setTimeout((function(){n?t.listNode&&t.listNode.scrollToRow(a):t.listNode&&t.listNode.scrollToPosition(r),t._resolveGridPosition()}))}},{key:"_resolveGridPosition",value:function(){this.listNode&&(this.listNode.measureAllRows(),this.listNode.Grid._rowSizeAndPositionManager.resetCell(0),this.listNode.Grid._rowSizeAndPositionManager.getTotalSize())}},{key:"renderMessage",value:function(e){var t=e.index,n=e.style,a=e.message,r=e.measure,o=e.timeFlag,s=e.fromSameUser,c=e.isLastMessage,i=e.newMessageFlag,u=e.isLastSystemMessage,l=this.props,d=l.isScChat,p=l.currentUser,h=l.currentBuyer,v=l.isSubAccount,m=l.visitMallRequested,g=l.currentConversation,y=l.resendMessageRequested,b=l.populateMessageRequested,S=l.visitShopSellerCenterRequested,R=l.sendMessagesRequested,E=l.showFaqHistoryModal,O=l.cancelSendingMessageRequested,k=l.showWarningMessageIds,C=a.type,M=a.content,_=void 0===M?{}:M,w=a.to_id,I=Object(B.a)(C);if(a.type===Q){var j=a.content.type;j===te||_.url&&_.url.includes("voucher")?(I=K.a,a.textContent=a.content):j===ee&&w===p.id&&(I=V.a)}return(f.a.createElement(I,{index:t,style:n,message:a,measure:r,timeFlag:o,isScChat:d,imgCache:this.imgCache,currentUser:p,currentBuyer:h,fromSameUser:s,isSubAccount:v,isLastMessage:c,newMessageFlag:i,conversation:g,visitMallRequested:m,isLastSystemMessage:u,hasSourceMessageMap:this.hasSourceMessageMap,resendMessageRequested:y,populateMessageRequested:b,visitShopSellerCenterRequested:S,sendMessagesRequested:R,showFaqHistoryModal:E,addExposedMessageId:this.addExposedMessageId,exposedMessageIds:this.exposedMessageIds,cancelSendingMessageRequested:O,showWarningMessageIds:k}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.currentUser,a=t.messageList,r=void 0===a?[]:a,o=t.unreadMessageIds,s=void 0===o?[]:o,c=t.currentConversation,i=t.translateTips,u=t.updateTranslateTips,l=t.autoTranslation,d=t.isSubAccount,p=c.status,h=c.shop_id,v=c.to_name,m=c.auto_translation,g=r.filter((function(e){return s.includes(e.id)})),y=g.length?g[g.length-1]:null,b=!i[h]||"closed"!==i[h],S=d&&b&&m||!d&&"enabled"===l&&b,R=r.length||1;return f.a.createElement("div",{className:X.a.messageSection},f.a.createElement(w.a,null,(function(t){var n=t.width,a=t.height;return(f.a.createElement(_.a,{width:n,height:a,containerStyle:{},ref:e.getListRef,overscanRowCount:10,className:X.a.grid,onScroll:e.handleScroll,rowCount:R,rowRenderer:e.rowRenderer,rowHeight:e._cache.rowHeight,containerProps:e.containerProps,onRowsRendered:e.handleRowsRender,deferredMeasurementCache:e._cache,onRecomputeGrid:e.handleRecomputeRow}))})),this.state.shouldRenderNewMessageTip&&"closed"!==p&&f.a.createElement(W,{currentUser:n,username:v,message:y||{},onClick:this.viewNewMessage}),S&&f.a.createElement(T.a,{currentConversation:c,updateTranslateTips:u}))}}]),n}(f.a.Component);re.propTypes={hasMoreOlderMessage:E.a.bool,isScChat:E.a.bool,messageList:E.a.array,currentUser:E.a.object,isSubAccount:E.a.bool,currentBuyer:E.a.object,translateTips:E.a.object,fetchRequested:E.a.func,autoTranslation:E.a.string,unreadMessageIds:E.a.array,visitMallRequested:E.a.func,updateTranslateTips:E.a.func,currentConversation:E.a.object,handleComponentScroll:E.a.func,markMessagesRequested:E.a.func,resendMessageRequested:E.a.func,populateMessageRequested:E.a.func,currentConversationCanRead:E.a.bool,setCurrentConversationCanRead:E.a.func,visitShopSellerCenterRequested:E.a.func,showChatWindow:E.a.bool,showConversationDetail:E.a.bool,sendMessagesRequested:E.a.func,showFaqHistoryModal:E.a.func,cancelSendingMessageRequested:E.a.func,showWarningMessageIds:E.a.array};var oe=Object(F.a)(re,"revered"),se=n("empP"),ce=["fetchMessagesRequested","messageHttpStatus"];function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return l()(this,n)}}var de=function(e){i()(n,e);var t=le(n);function n(e){var a;return r()(this,n),(a=t.call(this,e)).fetchRequested=a.fetchRequested.bind(S()(a)),a}return s()(n,[{key:"fetchRequested",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.needReset,n=void 0!==t&&t,a=e.direction,r=this.props,o=r.messageList,s=r.currentConversation,c=r.fetchMessagesRequested,i={conversation:s,direction:"up"===a||"older"===a?"older":"latest"};if(n)i.read=!0,i.reset=!0;else if(!o.length)return;c(ue({},i))}},{key:"render",value:function(){var e=this.props,t=(e.fetchMessagesRequested,e.messageHttpStatus),n=M()(e,ce);return(f.a.createElement(oe,k()({},n,{status:t,fetchRequested:this.fetchRequested})))}}]),n}(f.a.PureComponent),pe={showFaqHistoryModal:m.showFaqHistoryModal,visitMallRequested:se.a,updateTranslateTips:m.updateTranslateTips,markMessagesRequested:m.markMessagesRequested,fetchMessagesRequested:m.fetchMessagesRequested,resendMessageRequested:m.resendMessageRequested,populateMessageRequested:m.populateMessageRequested,setCurrentConversationCanRead:m.setCurrentConversationCanRead,visitShopSellerCenterRequested:se.b,cancelSendingMessageRequested:m.cancelSendingMessageRequested};de.propTypes={messageList:E.a.array,messageHttpStatus:E.a.string,currentConversation:E.a.object,fetchMessagesRequested:E.a.func};var he=Object(v.b)((function(e){return{isScChat:Object(m.isScChatSelector)(e),translateTips:Object(m.tipsSelector)(e),hasMoreOlderMessage:Object(m.hasMoreOlderMessageSelector)(e),autoTranslation:Object(m.autoTranslation)(e),isSubAccount:Object(m.isSubAccountSelector)(e),messageList:Object(m.messagesWithSourceSelector)(e),currentBuyer:Object(m.currentBuyerSelector)(e)||{},showChatWindow:Object(m.showChatWindowSelector)(e),unreadMessageIds:Object(m.unreadMessageIdsSelector)(e),currentUserShopId:Object(m.currentUserShopIdSelector)(e),messageHttpStatus:Object(m.messageHttpStatusSelector)(e),showConversationDetail:Object(m.showConversationDetailSelector)(e),currentConversationCanRead:Object(m.currentConversationCanReadSelector)(e),showWarningMessageIds:Object(m.showWarningMessageIdsSelector)(e)}}),pe)(de),fe=n("l6+b"),ve=n("cOd3"),me=n("OVuk"),ge=n("R/fK"),ye=n("Hz2s"),be=n("3y6x"),Se=n("czRn"),Re=n("fRyB"),Ee=n("JwiM"),Oe=n.n(Ee);function ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Me(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return l()(this,n)}}var _e=function(e){i()(n,e);var t=Me(n);function n(e){var a;return r()(this,n),(a=t.call(this,e)).editorRef=null,a.handleEnterEsc=a.handleEnterEsc.bind(S()(a)),a.handleSendValue=a.handleSendValue.bind(S()(a)),a.handleSendMessage=a.handleSendMessage.bind(S()(a)),a.getEditorWrapNodeRef=a.getEditorWrapNodeRef.bind(S()(a)),a.resetShortcutInserted=a.resetShortcutInserted.bind(S()(a)),a.handleSelectMessageShortcut=a.handleSelectMessageShortcut.bind(S()(a)),a.state={shortcutInserted:!1},a}return s()(n,[{key:"handleEnterEsc",value:function(){var e=(this.editorRef||{}).editor;e&&e.focus()}},{key:"handleSelectMessageShortcut",value:function(e,t){var n=this;this.setState({shortcutInserted:!0},(function(){var t=n.editorRef||{},a=t.handleChange,r=t.editor;a&&a(e),r&&r.focus()}))}},{key:"resetShortcutInserted",value:function(){this.setState({shortcutInserted:!1})}},{key:"handleSendValue",value:function(e){var t=this;return e.map((function(e){return Ce(Ce({},e),{},{shopId:t.props.currentConversation.shop_id})}))}},{key:"getEditorWrapNodeRef",value:function(e){e&&this.setState({editorWrapRef:e})}},{key:"handleSendMessage",value:function(e){var t=e.type,n=e.content,a=e.textContent,r=this.props,o=r.currentConversation,s=r.sendVideoMessageRequested,c=r.sendMessagesRequested,i=o.id,u=o.to_id,l=o.shop_id,d={conversationId:i,conversationUserId:u};"video"===t?s(Ce(Ce({},d),{},{message:{type:t,shopId:l,content:n}})):c(Ce(Ce({},d),{},{messages:[{type:t,shopId:l,content:n,textContent:a}]}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.draft,a=t.isScChat,r=t.saveDraft,o=t.currentUser,s=t.drawerMedias,c=t.isSubAccount,i=t.clearMediaFile,u=t.currentConversation,l=t.handleErrorWithToast,d=t.handleWarnWithToast,p=t.currentAllMessageShortcuts,h=t.isMessageShortcutHintEnabled,v=t.changeConversationStatusRequested,m=this.state.shortcutInserted,g=u.status,y=u.id,b=u.shop_id,S=u.to_name,R=u.to_status,E=u.is_blocked,O=["deleted","banned"].includes(R),C=E||O,M=!1;return c&&"closed"===g&&(M=!0),f.a.createElement("div",{className:Oe.a.root},M?f.a.createElement(Se.a,{currentUser:o,shopId:b,conversationId:y,changeConversationStatusRequested:v}):u?C?f.a.createElement(Re.a,{buyerName:S,isAbnormal:O}):f.a.createElement("div",{className:Oe.a.inpputWrapper},f.a.createElement("div",{className:Oe.a.chatEditor,ref:this.getEditorWrapNodeRef},f.a.createElement(be.a,{draft:n,shopId:b,isScChat:a,saveDraft:r,drawerMedias:s,clearMediaFile:i,conversationId:y,shortcutInserted:m,resetShortcutInserted:this.resetShortcutInserted,messageShortcuts:p,isMessageShortcutHintEnabled:h,currentUser:o,onSendMessage:this.handleSendMessage,handleErrorWithToast:l,handleWarnWithToast:d,getEditorRef:function(t){e.editorRef=t},onSelectMessageShortcut:function(t){e.handleSelectMessageShortcut(t,"fromHint")}})),f.a.createElement("div",{className:Oe.a.toolbar},f.a.createElement(ye.a,k()({onEnterEsc:this.handleEnterEsc,onSendMessage:this.handleSendMessage,handleErrorWithToast:l,onSelectMessageShortcut:function(t){e.handleSelectMessageShortcut(t,"fromList")}},this.props)))):null)}}]),n}(f.a.Component);_e.propTypes={draft:E.a.string,isScChat:E.a.bool,isSubAccount:E.a.bool,stickerHttpStatus:E.a.string,stickers:E.a.array.isRequired,saveDraft:E.a.func.isRequired,currentUser:E.a.object.isRequired,handleErrorWithToast:E.a.func.isRequired,handleWarnWithToast:E.a.func.isRequired,currentConversation:E.a.object.isRequired,sendMessagesRequested:E.a.func.isRequired,sendVideoMessageRequested:E.a.func.isRequired,changeConversationStatusRequested:E.a.func.isRequired,drawerMedias:E.a.array,clearMediaFile:E.a.func,messageShortcuts:E.a.array,currentAllMessageShortcuts:E.a.array,isMessageShortcutHintEnabled:E.a.bool};var we=_e;function Ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return l()(this,n)}}var je=function(e){i()(n,e);var t=Ie(n);function n(){return r()(this,n),t.apply(this,arguments)}return s()(n,[{key:"render",value:function(){return f.a.createElement(we,this.props)}}]),n}(f.a.PureComponent),Te={saveDraft:m.saveDraft,fetchShopDetailInfo:me.a,fetchOrdersRequested:ge.c,fetchAllOrdersRequested:ge.b,fetchStickersRequested:m.fetchStickersRequested,sendVideoMessageRequested:m.sendVideoMessageRequested,fetchMessageShortcutsGroupRequested:m.fetchMessageShortcutsGroupRequested},Pe=Object(v.b)((function(e){return{isScChat:Object(m.isScChatSelector)(e),stickers:Object(m.stickersSelector)(e),draft:Object(m.currentDraftSelector)(e),myOrderData:Object(ve.f)(e),hisOrderData:Object(ve.e)(e),stickerHttpStatus:Object(m.stickerHttpStatusSelector)(e),packHttpStatus:Object(m.packHttpStatusSelector)(e),fetchOrdersStatus:Object(ve.d)(e),messageShortcuts:Object(m.messageShortcutsSelector)(e),messageShortcutStatus:Object(m.messageShortcutsStatusSelector)(e),currentAllMessageShortcuts:Object(m.currentAllMessageShortcutsSelector)(e),isMessageShortcutHintEnabled:"enabled"===Object(m.messageShortcutsStatusSelector)(e)}}),Te)(je),Ne=n("4j81"),xe=n("TOFB"),De=n.n(xe);function qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return l()(this,n)}}var Ae=function(e){i()(n,e);var t=Le(n);function n(e){var a;return r()(this,n),(a=t.call(this,e)).state={dragIn:!1},a.sendTracker=a.sendTracker.bind(S()(a)),a.handleDeleteFile=a.handleDeleteFile.bind(S()(a)),a.handleClearFiles=a.handleClearFiles.bind(S()(a)),a.handleDragEnter=a.handleDragEnter.bind(S()(a)),a.handleDragLeave=a.handleDragLeave.bind(S()(a)),a.handleAddFile=a.handleAddFile.bind(S()(a)),a.handleErrorWithToast=a.handleErrorWithToast.bind(S()(a)),a.handleWarnWithToast=a.handleWarnWithToast.bind(S()(a)),a}return s()(n,[{key:"sendTracker",value:function(e){var t=this.props.currentConversation.shop_id;Object(m.tracker)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qe(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({shopId:t,section:"conversation_window"},e))}},{key:"handleDragEnter",value:function(e){e.preventDefault(),this.state.dragIn||this.setState({dragIn:!0})}},{key:"handleDragLeave",value:function(e){e.preventDefault(),this.state.dragIn&&this.setState({dragIn:!1})}},{key:"handleAddFile",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.props,a=n.currentConversation,r=n.addMediaFile;r({medias:e,conversationId:a.id}),t&&this.sendTracker({operation:"action_drag_video"})}},{key:"handleClearFiles",value:function(){var e=this.props;(0,e.clearMediaFile)({conversationId:e.currentConversation.id}),this.sendTracker({operation:"close_preview_media"})}},{key:"handleDeleteFile",value:function(e){var t=this.props;(0,t.deleteMediaFile)({id:e,conversationId:t.currentConversation.id}),this.sendTracker({operation:"delete_preview_media"})}},{key:"handleErrorWithToast",value:function(e){this.props.setToastInformation({toast:{show:!0,type:"fail",message:e}})}},{key:"handleWarnWithToast",value:function(e){this.props.setToastInformation({toast:{show:!0,type:"warn",message:e}})}},{key:"render",value:function(){var e=this.props,t=e.isScChat,n=e.openedMenu,a=e.currentUser,r=e.currentBuyer,o=e.isSubAccount,s=e.updateOpenedMenu,c=e.currentConversation,i=e.sendMessagesRequested,u=e.changeConversationStatusRequested,l=e.showModal,d=e.closeModal,p=e.blockUserRequested,h=e.addMediaFile,v=e.drawerMedias,m=e.clearMediaFile,g=e.hasVideoPermission;return(f.a.createElement(f.a.Fragment,null,f.a.createElement("div",{className:De.a.header},f.a.createElement(fe.a,{openedMenu:n,currentUser:a,currentBuyer:r,isSubAccount:o,updateOpenedMenu:s,currentConversation:c,showModal:l,closeModal:d,blockUserRequested:p,isScChat:t})),f.a.createElement("div",{className:De.a.zone,onDragEnter:this.handleDragEnter},this.state.dragIn&&f.a.createElement(Ne.MediaDropper,{onSuccess:this.handleAddFile,onDragOver:function(e){return e.preventDefault()},onDragLeave:this.handleDragLeave,onDrop:this.handleDragLeave,receiverName:c.to_name,hasVideoPermission:g,currentMediaNum:v.length,onError:this.handleErrorWithToast}),f.a.createElement("div",{id:"messagesContainer",className:De.a.message},f.a.createElement(he,{currentUser:a,currentConversation:c,sendMessagesRequested:i})),v.length>0&&f.a.createElement("div",{className:De.a.mediaPreviewerWrap},f.a.createElement(Ne.MediaPreviewer,{medias:v,onClear:this.handleClearFiles,onDelete:this.handleDeleteFile,onAddSuccess:this.handleAddFile,onError:this.handleErrorWithToast,hasVideoPermission:g,tracker:this.sendTracker})),f.a.createElement("div",{className:De.a.input},f.a.createElement(Pe,{isScChat:t,currentUser:a,currentBuyer:r,isSubAccount:o,addMediaFile:h,drawerMedias:v,clearMediaFile:m,hasVideoPermission:g,currentConversation:c,handleErrorWithToast:this.handleErrorWithToast,handleWarnWithToast:this.handleWarnWithToast,sendMessagesRequested:i,changeConversationStatusRequested:u})))))}}]),n}(f.a.PureComponent);Ae.propTypes={isScChat:E.a.bool,openedMenu:E.a.string,isSubAccount:E.a.bool,currentUser:E.a.object,currentBuyer:E.a.object,updateOpenedMenu:E.a.func,currentConversation:E.a.object,setToastInformation:E.a.func.isRequired,sendMessagesRequested:E.a.func.isRequired,changeConversationStatusRequested:E.a.func.isRequired,showModal:E.a.func,closeModal:E.a.func,blockUserRequested:E.a.func,addMediaFile:E.a.func.isRequired,deleteMediaFile:E.a.func.isRequired,clearMediaFile:E.a.func.isRequired,drawerMedias:E.a.array,hasVideoPermission:E.a.bool};var We=Ae;function Be(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return l()(this,n)}}var Fe=function(e){i()(n,e);var t=Be(n);function n(){return r()(this,n),t.apply(this,arguments)}return s()(n,[{key:"render",value:function(){return f.a.createElement(We,this.props)}}]),n}(f.a.PureComponent),Ue={showModal:m.showModal,closeModal:m.closeModal,addMediaFile:m.addMediaFile,deleteMediaFile:m.deleteMediaFile,clearMediaFile:m.clearMediaFile,sendMessagesRequested:m.sendMessagesRequested,blockUserRequested:m.blockUserRequested};t.a=Object(v.b)((function(e){return{drawerMedias:Object(m.mediaListSelector)(e),hasVideoPermission:Object(m.hasVideoPermissionSelector)(e)}}),Ue)(Fe)},GIDq:function(e,t,n){"use strict";(function(e){n("I5cv");var a=n("lwsE"),r=n.n(a),o=n("W8MJ"),s=n.n(o),c=n("7W2i"),i=n.n(c),u=n("a1gu"),l=n.n(u),d=n("Nsbk"),p=n.n(d),h=(n("L9s1"),n("Z2Ku"),n("pIFo"),n("f3/d"),n("q1tI")),f=n.n(h),v=n("17x9"),m=n.n(v),g=n("4j81"),y=n("XnKn"),b=n("hRrX"),S=n("B98/"),R=n.n(S);function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return l()(this,n)}}var O=function(t){i()(a,t);var n=E(a);function a(e){var t;return r()(this,a),(t=n.call(this,e)).state={showBuyerEvaluation:!1},t}return s()(a,[{key:"render",value:function(){var t=this.props,n=t.shopId,a=t.country,r=t.isSubAccount,o=t.product,s=o.count,c=o.price,i=o.image,u=o.image_hash,l=o.title,d=o.status,p=o.product_id,h=o.model_name,v=void 0===h?"":h,m=v.includes(",")?v.replace(/,/g,"  "):v,S=d===b.b.RETURNED||d===b.b.RETURN_RATED,E=!!m||S;return f.a.createElement("div",{className:"".concat(R.a.product," ").concat(S?R.a.refunded:"")},f.a.createElement("div",{className:"".concat(R.a.left," ").concat(E?"":R.a.center)},f.a.createElement(g.Image,{src:i,hash:u,className:R.a.picture,onClick:function(){return Object(y.goToPcMall)(r,a,p,n)}}),f.a.createElement("div",null,f.a.createElement("div",{title:l,className:R.a.name,onClick:function(){return Object(y.goToPcMall)(r,a,p,n)}},l),f.a.createElement("div",{className:R.a.details},!!m&&f.a.createElement("div",null,m),S&&f.a.createElement("div",{className:R.a.tag},e("conversation_detail.workstation.order_panel.order.refund_successfully"))))),f.a.createElement("div",{className:R.a.right},f.a.createElement("div",{className:R.a.money},Object(y.formatPrice)(c,a)),f.a.createElement("div",{className:R.a.count},"x".concat(s))))}}]),a}(h.PureComponent);O.propTypes={product:m.a.object,isSubAccount:m.a.bool,country:m.a.string,shopId:m.a.number},t.a=O}).call(this,n("kiXb").t)},HSHk:function(e,t,n){"use strict";var a=n("q1tI"),r=n.n(a),o=n("/MKj"),s=n("+iqz"),c=n("4j81"),i=n("tvxL"),u=n("empP"),l={claimVoucherRequested:i.claimVoucherRequested,visitShopSellerCenterRequested:u.b};t.a=Object(s.a)(Object(o.b)((function(e){return{locale:Object(i.localeSelector)(e),isSubAccount:Object(i.isSubAccountSelector)(e),hasViewVoucherAccess:Object(i.hasViewVoucherAccessSelector)(e)}}),l)((function(e){return r.a.createElement(c.VoucherMessage,e)})))},Hxv6:function(e,t,n){e.exports=n.p+"562e3d10ebf525cd541dd028a0acc192.png"},Hz2s:function(e,t,n){"use strict";(function(e){n("I5cv");var a,r=n("lwsE"),o=n.n(r),s=n("W8MJ"),c=n.n(s),i=n("PJYZ"),u=n.n(i),l=n("7W2i"),d=n.n(l),p=n("a1gu"),h=n.n(p),f=n("Nsbk"),v=n.n(f),m=n("lSNA"),g=n.n(m),y=(n("2Spj"),n("Z2Ku"),n("q1tI")),b=n.n(y),S=n("17x9"),R=n.n(S),E=n("h4gR"),O=n("XnKn"),k=n("4j81"),C=n("hruB"),M=n("PCWH"),_=n("dYmL"),w=n("1X8k"),I=n("tvxL"),j=n("87Cs"),T=n("dV/y"),P=n.n(T),N=n("HSlW"),x=n.n(N),D=n("jb4p"),q=n.n(D),L=n("Fb+L"),A=n.n(L),W=n("Gy+D"),B=n.n(W),F=n("raV7"),U=n.n(F),H=n("r1Pp"),G=n.n(H);function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return h()(this,n)}}var V=O.MessageShortcutGroupType.PERSONAL,Y=O.MessageShortcutGroupType.TEAM,X="orders",J={transform:"translateX(50px)",background:"#fff",boxShadow:"0 2px 12px 0 rgba(74,74,78,0.40)",border:"0",borderRadius:"3px",overflow:"hidden"},z=(a={},g()(a,"stickers",x.a),g()(a,"video",U.a),g()(a,"image",q.a),g()(a,"message_shortcuts",A.a),g()(a,X,B.a),g()(a,"products",G.a),a),Z=["MX","CO","CL","AR","FR","PL","ES","IN"],Q=function(t){d()(a,t);var n=K(a);function a(e,t){var r;return o()(this,a),(r=n.call(this,e,t)).renderLabel=r.renderLabel.bind(u()(r)),r.getPopperContent=r.getPopperContent.bind(u()(r)),r.handleOpenOrderPanel=r.handleOpenOrderPanel.bind(u()(r)),r.handleSelectMediaSucceed=r.handleSelectMediaSucceed.bind(u()(r)),r.state={toolBarTop:0,activeTab:""},r.toolBarRef=null,r}return c()(a,[{key:"componentDidMount",value:function(){this.toolBarRef&&this.setState({toolBarTop:Object(j.a)(this.toolBarRef).top});var e=this.props,t=e.fetchMessageShortcutsGroupRequested,n=e.isSubAccount,a=e.isScChat,r=e.currentConversation.shop_id;a&&(t({groupType:V,shopId:r}),n&&t({groupType:Y,shopId:r}))}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.fetchMessageShortcutsGroupRequested,a=t.isSubAccount,r=t.isScChat,o=t.currentConversation.shop_id,s=e.currentConversation.shop_id;a&&r&&o!==s&&n({groupType:Y,shopId:o})}},{key:"renderLabel",value:function(t,n){var a=this,r=this.props.currentConversation,o=z[t];return function(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=s.isOpen,i=b.a.createElement(E.Icon,{svg:o,className:"".concat(P.a[t]," ").concat(c?P.a.activeLabel:P.a.inactiveLabel),onClick:function(){c||(t===X&&a.handleOpenOrderPanel(),Object(I.tracker)({type:"".concat(t,"_button"),shopId:r.shop_id}))}});return c?i:b.a.createElement(E.Tooltip,{content:n?e(Object(O.formatNumberKey)("label.exceed_media_limit.num",O.MAX_MEDIA_NUM),{number:O.MAX_MEDIA_NUM}):e("conversation_detail.input_field.toolbar.".concat(t,".tip"))},i)}}},{key:"handleOpenOrderPanel",value:function(){var e=this.props,t=e.isScChat,n=e.fetchAllOrdersRequested,a=e.currentConversation,r=e.fetchShopDetailInfo,o=e.fetchOrdersRequested,s=a.to_id,c=a.shop_id,i=a.to_shop_id;t?o({shopId:c,userId:s,reset:!0}):(r({shopId:i}),n({shopId:c,buyerShopId:i,userId:s}))}},{key:"getPopperContent",value:function(e,t){var n=this,a=this.props,r=a.isScChat,o=a.currentConversation,s=a.onSendMessage,c=a.isSubAccount,i=a.onSelectMessageShortcut,u=a.onEnterEsc;return b.a.createElement("div",{className:P.a.popperContent},function(){switch(t){case X:var a=n.props,l=a.currentUser,d=a.currentBuyer,p=a.fetchOrdersStatus,h=a.fetchOrdersRequested;return(b.a.createElement(C.a,{status:p,isScChat:r,closePortal:e,currentUser:l,isSubAccount:c,currentBuyer:d,fetchRequested:n.handleOpenOrderPanel,currentConversation:o,fetchOrdersRequested:h,handleSendMessage:s}));case"products":return b.a.createElement(M.a,{closePortal:e,isSubAccount:c,handleSendMessage:s});case"stickers":var f=n.props,v=f.stickers,m=f.stickerHttpStatus,g=f.packHttpStatus,y=f.fetchStickersRequested,S=o.id,R=o.shop_id,E=o.to_id,O=o.shop,k=void 0===O?{}:O;return b.a.createElement(w.a,{closePortal:e,status:g,stickerHttpStatus:m,stickers:v,shopId:R,buyerId:E,conversationId:S,handleSendMessage:s,fetchRequested:function(){return y({region:(k.country||"").toLowerCase()})}});case"message_shortcuts":return b.a.createElement(_.a,{closePortal:e,onSelectMessageShortcut:i,onEnterEsc:u})}}())}},{key:"handleSelectMediaSucceed",value:function(e){var t=this.props;(0,t.addMediaFile)({medias:e,conversationId:t.currentConversation.id})}},{key:"render",value:function(){var e=this,t=this.props,n=t.isScChat,a=t.drawerMedias,r=t.hasVideoPermission,o=t.handleErrorWithToast,s=t.currentConversation.shop,c=(void 0===s?{}:s).country||"VN",i=a.length,u=i>=O.MAX_MEDIA_NUM;return b.a.createElement("div",{className:P.a.root,ref:function(t){e.toolBarRef=t}},b.a.createElement("div",{className:P.a.left},!Z.includes(c)&&b.a.createElement("div",{className:P.a.drawer},b.a.createElement(E.Popover,{popoverStyle:J,content:function(t){var n=t.close;return e.getPopperContent(n,"stickers")},trigger:"click"},this.renderLabel("stickers"))),b.a.createElement("div",{className:P.a.drawer},b.a.createElement(k.MediaFileSelector,{multiple:!0,type:"image",disabled:u,onError:o,onSuccess:this.handleSelectMediaSucceed,currentMediaNum:i},this.renderLabel("image",u)())),r&&b.a.createElement("div",{className:P.a.drawer},b.a.createElement(k.MediaFileSelector,{multiple:!0,type:"video",disabled:u,onError:o,onSuccess:this.handleSelectMediaSucceed,currentMediaNum:i},this.renderLabel("video",u)())),b.a.createElement("div",{className:P.a.drawer},b.a.createElement(E.Popover,{popoverStyle:J,content:function(t){var n=t.close;return e.getPopperContent(n,"products")},trigger:"click"},this.renderLabel("products"))),b.a.createElement("div",{className:P.a.drawer},b.a.createElement(E.Popover,{popoverStyle:J,content:function(t){var n=t.close;return e.getPopperContent(n,X)},trigger:"click"},this.renderLabel(X))),n&&b.a.createElement("div",{className:P.a.drawer},b.a.createElement(E.Popover,{popoverStyle:J,content:function(t){var n=t.close;return e.getPopperContent(n,"message_shortcuts")},trigger:"click"},this.renderLabel("message_shortcuts")))))}}]),a}(b.a.PureComponent);Q.propTypes={stickers:R.a.array,currentUser:R.a.object,stickerHttpStatus:R.a.string,packHttpStatus:R.a.string,onSendMessage:R.a.func,hasVideoPermission:R.a.bool,currentConversation:R.a.object.isRequired,onSelectMessageShortcut:R.a.func,onEnterEsc:R.a.func,isScChat:R.a.bool,isSubAccount:R.a.bool,currentBuyer:R.a.object,fetchOrdersStatus:R.a.string,fetchShopDetailInfo:R.a.func,fetchOrdersRequested:R.a.func,fetchAllOrdersRequested:R.a.func,handleErrorWithToast:R.a.func,fetchStickersRequested:R.a.func,addMediaFile:R.a.func,drawerMedias:R.a.array,fetchMessageShortcutsGroupRequested:R.a.func},t.a=Q}).call(this,n("kiXb").t)},Jitt:function(e,t,n){"use strict";n("I5cv");var a=n("lwsE"),r=n.n(a),o=n("W8MJ"),s=n.n(o),c=n("7W2i"),i=n.n(c),u=n("a1gu"),l=n.n(u),d=n("Nsbk"),p=n.n(d),h=n("q1tI"),f=n.n(h),v=n("17x9"),m=n.n(v),g=n("5BYv"),y=n.n(g);function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return l()(this,n)}}var S=function(e){i()(n,e);var t=b(n);function n(){return r()(this,n),t.apply(this,arguments)}return s()(n,[{key:"render",value:function(){var e=this.props.theme,t="".concat(y.a.root," ").concat("light"===e?y.a.lightLoading:"");return f.a.createElement("div",{className:t})}}]),n}(h.PureComponent);S.propTypes={theme:m.a.string},t.a=S},KCyL:function(e,t,n){"use strict";(function(e){n("I5cv");var a=n("lwsE"),r=n.n(a),o=n("W8MJ"),s=n.n(o),c=n("PJYZ"),i=n.n(c),u=n("7W2i"),l=n.n(u),d=n("a1gu"),p=n.n(d),h=n("Nsbk"),f=n.n(h),v=(n("2Spj"),n("f3/d"),n("bWfx"),n("I78e"),n("L9s1"),n("Z2Ku"),n("q1tI")),m=n.n(v),g=n("17x9"),y=n.n(g),b=n("GIDq"),S=n("O/mE"),R=n("SUBy"),E=n("XnKn"),O=n("tvxL"),k=n("hRrX"),C=n("h4gR"),M=n("WNfc"),_=n.n(M),w=n("4Al/"),I=n.n(w),j=n("VZ59"),T=n.n(j),P=n("r92p"),N=n.n(P),x=n("tMYO"),D=n.n(x),q=n("6XUW"),L=n.n(q),A=n("mtoF"),W=n.n(A),B=n("L1Nj"),F=n.n(B),U=n("xZBc"),H=n.n(U);function G(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var K={unpaid:I.a,to_ship:T.a,shipping:N.a,completed:D.a,cancelled:L.a,refund:_.a},V=function(t){l()(a,t);var n=G(a);function a(e){var t;return r()(this,a),(t=n.call(this,e)).toogleShow=t.toogleShow.bind(i()(t)),t.viewDetails=t.viewDetails.bind(i()(t)),t.getCancelString=t.getCancelString.bind(i()(t)),t.sendOrderMessage=t.sendOrderMessage.bind(i()(t)),t.state={shouldShowAllProducts:!1},t}return s()(a,[{key:"toogleShow",value:function(e){e.nativeEvent.stopImmediatePropagation();var t=this.state.shouldShowAllProducts;this.setState({shouldShowAllProducts:!t})}},{key:"viewDetails",value:function(){var e=this.props,t=e.order,n=e.currentBuyer,a=e.isSubAccount,r=e.currentConversation,o=e.visitShopSellerCenterRequested,s=t.id,c=t.buyer_id,i=r.shop_id,u=n.id===c;if(Object(O.tracker)({shopId:i,section:"order_information_tab",type:"order_view_detail",data:{tabid:0}}),u)a?o({shopId:i,orderId:s}):window.open("https://".concat(Object(E.getSellerCenterUrl)(),"/portal/sale/").concat(s));else{var l=Object(E.getMallOrderUrl)(t,r.shop_id);window.open(l)}}},{key:"getCancelString",value:function(){var t=this.props,n=t.order,a=t.currentBuyer,r=n.status,o=n.buyer_id,s=n.status_ext,c=n.cancel_user_id,i=a.id===o,u=c===o?"buyer":c<0?"system":"seller";return s===k.c.ORDER_EXT_CANCEL_PENDING?e("conversation_detail.workstation.order_panel.order.".concat(i?"":"his_","cancel_title")):r===k.a.CANCELLED?e("conversation_detail.workstation.order_panel.order.cancel_by_".concat(i?"":"his_").concat(u)):void 0}},{key:"sendOrderMessage",value:function(){var e=this.props,t=e.order,n=e.closePortal,a=e.currentBuyer,r=e.currentConversation,o=e.handleSendMessage,s=r.shop_id;a.is_blocked||"abnormal"===a.status||(Object(O.tracker)({shopId:s,section:"order_information_tab",type:"order_sendlink",data:{tabid:0}}),n(),o({type:"order",textContent:t,content:{order_id:t.id,shop_id:t.shop_id}}))}},{key:"render",value:function(){var t=this.state.shouldShowAllProducts,n=this.props,a=n.order,r=n.noMarginTop,o=n.isSubAccount,s=n.currentBuyerShop,c=s.name,i=s.avatar,u=n.currentBuyer,l=(u=void 0===u?{}:u).id,d=u.is_blocked,p=u.status,h=n.currentConversation,f=h.shop,v=void 0===f?{}:f,g=h.hasViewOrderAccess,y=a.status,O=a.products,M=void 0===O?[]:O,_=a.serial_number,w=a.buyer_id,I=a.shop_id,j=a.products_count,T=void 0===j?0:j,P=M.length>2,N=d||"abnormal"===p,x=Object(E.getOrderPayment)(a,v.country).payment,D=this.getCancelString(),q=l===w,L=e(Object(E.formatNumberKey)("conversation_detail.message_list.order_product_count",T),{orderProductCount:T}),A=K[y];return m.a.createElement("div",{className:H.a.root,style:r?{marginTop:0}:{}},m.a.createElement("div",{className:H.a.header},q?m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:"".concat(H.a.status)},m.a.createElement(C.Icon,{svg:A,className:"".concat(H.a.statusIcon," ").concat(H.a[y])}),e(E.OrderStatusTextMap[y])),m.a.createElement("div",{className:H.a.number},m.a.createElement("div",{className:H.a.text},_),m.a.createElement(S.a,{content:_}))):m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:H.a.shop},m.a.createElement("div",{className:H.a.avatar},m.a.createElement(R.a,{avatar:i,origin:"shop"})),m.a.createElement("div",{className:H.a.name},c)),m.a.createElement("div",{className:"".concat(H.a.status)},m.a.createElement(C.Icon,{svg:A,className:"".concat(H.a.statusIcon," ").concat(H.a[y])}),e(E.OrderStatusTextMap[y])))),m.a.createElement("div",{className:H.a.products},(P&&!t?M.slice(0,2):M).map((function(e){return m.a.createElement(b.a,{shopId:I,product:e,country:v.country,isSubAccount:o,key:"".concat(e.product_id,"_").concat(e.model_id)})})),P&&m.a.createElement("div",{className:H.a.over,onClick:this.toogleShow},m.a.createElement("div",{className:H.a.all},e(t?"common.collapse":"conversation_detail.workstation.order_panel.view_all")),m.a.createElement(C.Icon,{svg:t?F.a:W.a,className:H.a.base}))),m.a.createElement("div",{className:H.a.details},m.a.createElement("div",{className:H.a.label},e("common.total")),m.a.createElement("div",{className:H.a.content},m.a.createElement("div",{className:H.a.counts},L),m.a.createElement("div",{className:H.a.payment},x))),[k.a.TO_SHIP,k.a.CANCELLED].includes(y)&&D&&m.a.createElement("div",{className:H.a.cancel},D),m.a.createElement("div",{className:H.a.toolbar},(!q||g)&&m.a.createElement("div",{className:H.a.button,onClick:this.viewDetails},e("common.details")),m.a.createElement("div",{onClick:this.sendOrderMessage,className:"".concat(H.a.button," ").concat(N?H.a.disabled:"")},e("conversation_detail.input_field.send"))))}}]),a}(m.a.PureComponent);V.propTypes={order:y.a.object,noMarginTop:y.a.bool,closePortal:y.a.func,isSubAccount:y.a.bool,currentBuyer:y.a.object,currentBuyerShop:y.a.object,handleSendMessage:y.a.func,currentConversation:y.a.object,visitShopSellerCenterRequested:y.a.func},t.a=V}).call(this,n("kiXb").t)},KmjB:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return a})),n.d(t,"g",(function(){return r})),n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return c})),n.d(t,"e",(function(){return i})),n.d(t,"h",(function(){return u})),n.d(t,"f",(function(){return l}));n("YJVH"),n("Vd3H"),n("8+KV"),n("V+eJ"),n("KKXr"),n("L9s1"),n("Z2Ku"),n("Tze0"),n("RW0V"),n("mGWK"),n("LK8F"),n("Oyvg"),n("pIFo"),n("bWfx"),n("Btvt"),n("h7Nl"),n("a1Th"),n("r1bV"),n("NO8f"),n("I78e"),n("f3/d"),n("ioFf"),n("HEwt"),n("XfO3"),n("yt8O"),n("rGqo");var a=function(e,t){return e.length===t.length&&e.every((function(e,n){return e===t[n]}))},r=function(e,t){return e>t},o=function(e){return e[e.length-1]},s=function(e){return"string"==typeof e&&(e=e.trim()),!(!e||0===Object.keys(e).length)},c=function(e,t){var n=null;return function(){for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];n&&(clearTimeout(n),n=null),n=setTimeout((function(){e.apply(void 0,r)}),t)}},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=document.createElement("input"),a=document.getElementById(window.miniChatContainerId)||document.body;n.setAttribute("readonly","readonly"),n.setAttribute("value",e),a.appendChild(n),n.focus(),n.setSelectionRange(0,-1),document.execCommand("copy")&&t&&t(),a.removeChild(n)},u=function(t){return"string"==typeof t?t:e(t.key,t.vars)};var l=function(e,t){return(e&t)===t}}).call(this,n("kiXb").t)},L4yU:function(e,t,n){"use strict";(function(e){var a=n("q1tI"),r=n.n(a),o=n("17x9"),s=n.n(o),c=n("3E0+"),i=n.n(c),u=n("A5hp"),l=n("Z58h"),d=function(t){var n=t.closeModal,a=t.updateCurrentFaqId;return r.a.createElement("div",{className:i.a.root},r.a.createElement(u.a,{closeModal:function(){a({id:null}),n()},title:e("conversation_list.conversation_cell.new_bundle_message_message")}),r.a.createElement(l.a,null))};d.propTypes={closeModal:s.a.func,updateCurrentFaqId:s.a.func},t.a=d}).call(this,n("kiXb").t)},LcIU:function(e,t,n){"use strict";(function(e){n("I5cv");var a=n("lwsE"),r=n.n(a),o=n("W8MJ"),s=n.n(o),c=n("7W2i"),i=n.n(c),u=n("a1gu"),l=n.n(u),d=n("Nsbk"),p=n.n(d),h=(n("bWfx"),n("0l/t"),n("q1tI")),f=n.n(h),v=n("17x9"),m=n.n(v),g=n("+iqz"),y=n("TSYQ"),b=n.n(y),S=n("4j81"),R=n("XnKn"),E=n("tvxL"),O=n("P3mV"),k=n.n(O);function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return l()(this,n)}}var M=function(t){i()(a,t);var n=C(a);function a(){return r()(this,a),n.apply(this,arguments)}return s()(a,[{key:"render",value:function(){var t=this.props,n=t.id,a=t.conversation.shop_id,r=t.isSend,o=t.content.messages,s=void 0===o?[]:o,c=t.textContent,i=void 0===c?{}:c,u=t.showFaqHistoryModal,l=t.handleReload,d=i.messages,p=void 0===d?[]:d,h=i.error,v=b()(k.a.root,r?k.a.send:k.a.receive),m=p.filter((function(e){return"webview"!==e.type})).map((function(e){var t,n={username:(t=e).from_user_name,content:Object(E.previewMessage)(t)},a=n.username,r=n.content;return(f.a.createElement("div",{key:e.id,className:k.a.preview},"".concat(a,": ").concat(r)))}));if(h)return f.a.createElement(S.Processor,{type:"reload",messageType:R.MessageTypes.MSG_TYPE_FAQ_HISTORY,reloadRequest:l});var g=s.length>3?3:s.length,y={height:"".concat(18*g,"px")};return f.a.createElement("div",{className:v,onClick:function(){return u({sourceId:n,shopId:a})}},f.a.createElement("div",{className:k.a.header},e("conversation_list.conversation_cell.new_bundle_message_message")),f.a.createElement("div",{style:y},m),f.a.createElement("div",{className:k.a.footer},e("faq_history.see_all")))}}]),a}(f.a.PureComponent);M.propTypes={id:m.a.string,isSend:m.a.bool,content:m.a.object,textContent:m.a.object,handleReload:m.a.func,conversation:m.a.object,showFaqHistoryModal:m.a.func},t.a=Object(g.a)(M)}).call(this,n("kiXb").t)},MP93:function(e,t,n){"use strict";var a=n("q1tI"),r=n.n(a),o=n("17x9"),s=n.n(o),c=n("SUBy"),i=n("WBRc"),u=n("/IO4"),l=n.n(u),d=n("tvxL"),p=function(e){var t=e.style,n=e.conversation,a=e.keyword,o=e.isSubAccount,s=e.onClick,u=e.shopFilter,p=n.avatar,h=n.avatar_hash,f=n.to_name,v=n.shop_name;return r.a.createElement("div",{style:t,className:l.a.root,onClick:function(){Object(d.tracker)({type:"search_name_result"}),s(n)}},r.a.createElement("div",{className:l.a.avatar},r.a.createElement(c.a,{avatar:p,avatarHash:h})),r.a.createElement("div",{className:l.a.wrapper},r.a.createElement("div",{className:l.a.username},r.a.createElement(i.a,{highlightClassName:l.a.keyword,searchWords:a,textToHighlight:f})),o&&!u&&r.a.createElement("div",{className:l.a.shop},r.a.createElement("div",{className:l.a.text,title:v},v))))};p.propTypes={style:s.a.object,conversation:s.a.object,keyword:s.a.string,shopFilter:s.a.object,isSubAccount:s.a.bool,onClick:s.a.func.isRequired},t.a=p},Mqqo:function(e,t,n){"use strict";var a=n("q1tI"),r=n.n(a),o=n("17x9"),s=n.n(o),c=n("+iqz"),i=n("4j81"),u=function(e){var t=e.measure,n=e.content,a=e.evaluationRequested,o=e.handleReload,s=e.rateShopId;return(r.a.createElement(i.EvaluationMessage,{measure:t,content:n,handleReload:o,rateShopId:s,onSubmit:function(e){return a(e)}}))};u.propTypes={measure:s.a.func,content:s.a.object,handleReload:s.a.func,evaluationRequested:s.a.func,rateShopId:s.a.number};var l=Object(c.a)(u),d=n("/MKj"),p={evaluationRequested:n("tvxL").evaluationRequested};t.a=Object(d.b)((function(){return{}}),p)((function(e){return r.a.createElement(l,e)}))},"O/mE":function(e,t,n){"use strict";(function(e){n("I5cv");var a=n("lwsE"),r=n.n(a),o=n("W8MJ"),s=n.n(o),c=n("7W2i"),i=n.n(c),u=n("a1gu"),l=n.n(u),d=n("Nsbk"),p=n.n(d),h=n("q1tI"),f=n.n(h),v=n("wNa6"),m=n("17x9"),g=n.n(m),y=n("KmjB"),b=n("h4gR"),S=n("t4Uy"),R=n.n(S),E=n("tvxL"),O=n("jZ4q"),k=n.n(O);function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return l()(this,n)}}var M=function(t){i()(a,t);var n=C(a);function a(t){var o;return r()(this,a),(o=n.call(this,t)).text=e("common.copy"),o}return s()(a,[{key:"handleClick",value:function(t){t.stopPropagation();var n=this.props.content;Object(y.e)(n,(function(){return v.store.dispatch(Object(E.setToastInformation)({toast:Object(E.getToastInformation)(!0,{message:e("common.successful_copied")})}))})),Object(y.e)(n)}},{key:"render",value:function(){var e=this;return(f.a.createElement(b.Tooltip,{content:this.text},f.a.createElement(b.Icon,{svg:R.a,className:k.a.root,onClick:function(t){return e.handleClick(t)}})))}}]),a}(f.a.PureComponent);M.propTypes={content:g.a.oneOfType([g.a.string,g.a.number])},t.a=M}).call(this,n("kiXb").t)},OTLN:function(e,t,n){"use strict";n("I5cv"),n("RW0V"),n("ioFf"),n("0l/t"),n("mYba"),n("8+KV"),n("jm62"),n("WLL4"),n("HAE/");var a=n("lSNA"),r=n.n(a),o=n("lwsE"),s=n.n(o),c=n("W8MJ"),i=n.n(c),u=n("7W2i"),l=n.n(u),d=n("a1gu"),p=n.n(d),h=n("Nsbk"),f=n.n(h),v=n("q1tI"),m=n.n(v),g=n("17x9"),y=n.n(g),b=n("8Oat"),S=n.n(b),R=n("S3Uj"),E=n.n(R),O=n("h4gR"),k=n("2Bv0"),C=n.n(k),M=n("LaU4"),_=n.n(M),w=n("+VhR"),I=n.n(w),j=n("R4Uw"),T=n.n(j),P=n("i8i4");function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var q={transition:"opacity ".concat(200,"ms ease-in-out"),opacity:0},L={success:C.a,fail:_.a,error:_.a,info:T.a,warn:I.a},A={entering:{opacity:0},entered:{opacity:1},exiting:{opacity:1},exited:{opacity:0}},W=function(e){l()(n,e);var t=D(n);function n(e){var a;return s()(this,n),(a=t.call(this,e)).state={show:!1},a.timer=null,a.eventListenerAdded=!1,a}return i()(n,[{key:"componentWillUnmount",value:function(){this.timer&&clearTimeout(this.timer)}},{key:"render",value:function(){var e=this,t=this.props,n=t.toast,a=n.type,r=n.message,o=t.isScChat,s=this.state.show,c="".concat(o?S.a.root:S.a.mall," ").concat(s?S.a.show:""),i="".concat(S.a.icon," ").concat(S.a[a]),u=L[a];return Object(P.createPortal)(m.a.createElement(E.a,{in:s,timeout:200,addEndListener:function(t){e.eventListenerAdded||(t.addEventListener("transitionend",(function(){e.state.show&&(e.timer&&clearTimeout(e.timer),e.timer=setTimeout((function(){e.setState({show:!1},(function(){e.timer&&clearTimeout(e.timer),e.props.setToastInformation({toast:{type:"",message:"",show:!1}})}))}),1500))}),!1),e.eventListenerAdded=!0)}},(function(e){return m.a.createElement("div",{className:c,style:x(x({},q),A[e])},u&&m.a.createElement(O.Icon,{svg:u,className:i}),m.a.createElement("div",{className:S.a.message},r))})),document.body)}}],[{key:"getDerivedStateFromProps",value:function(e){var t=e.toast,n=t.message,a=t.show;return n?a?{show:a}:null:{show:!1}}}]),n}(m.a.PureComponent);W.propTypes={toast:y.a.object,isScChat:y.a.bool,setToastInformation:y.a.func},t.a=W},OVuk:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return l}));var a=n("o0o1"),r=n.n(a),o=n("5rFJ"),s=n("tvxL"),c=n("FH7K"),i=r.a.mark(l),u=Object(c.a)({FETCH_SHOP_DETAIL_INFO:function(e){return{shopId:e.shopId}}}).fetchShopDetailInfo;function l(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.takeEvery)(u,s.showShop);case 2:case"end":return e.stop()}}),i)}},OW4m:function(e,t,n){"use strict";n("RW0V"),n("ioFf"),n("0l/t"),n("mYba"),n("8+KV"),n("jm62"),n("WLL4"),n("HAE/");var a=n("lSNA"),r=n.n(a),o=n("XnKn");function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var i=null,u=null,l="";window.addEventListener("message",(function(e){e.data.received&&window.clearInterval(u)}),!1),t.a=function(e){var t=e.currentConversation,n=void 0===t?{}:t,a=e.webChatUrl;return Object(o.getItem)("mini-sc_redirect").then((function(e){e&&e.conversationId===n.id||(e={shopId:n.shop_id,userId:n.to_id});var t=c(c({},e),{},{type:"MiniChatRedirect"});i&&!i.closed?(l!==a&&(i.location.href=a),i.focus()):i=window.open("".concat(a),"_blank"),l=a,u&&window.clearInterval(u),u=window.setInterval((function(){try{i.postMessage(t,a)}catch(e){i=null,window.clearInterval(u)}}),1e3)}))}},PCWH:function(e,t,n){"use strict";n("I5cv");var a=n("lwsE"),r=n.n(a),o=n("W8MJ"),s=n.n(o),c=n("7W2i"),i=n.n(c),u=n("a1gu"),l=n.n(u),d=n("Nsbk"),p=n.n(d),h=n("q1tI"),f=n.n(h),v=n("/MKj"),m=n("nbEg"),g=n("WnRE"),y=n("OVuk"),b=n("hrAk"),S=n("tvxL");function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return l()(this,n)}}var E=function(e){i()(n,e);var t=R(n);function n(){return r()(this,n),t.apply(this,arguments)}return s()(n,[{key:"render",value:function(){return f.a.createElement(b.a,this.props)}}]),n}(f.a.PureComponent),O={fetchProductsRequested:g.c,fetchAllProductsRequested:g.b,updateSelectedProductTab:g.d,fetchShopDetailInfo:y.a};t.a=Object(v.b)((function(e){return{myShopProducts:Object(m.c)(e),otherShopProducts:Object(m.f)(e),myShopSearchStatus:Object(m.e)(e),otherShopSearchStatus:Object(m.h)(e),myShopSearchKeyword:Object(m.d)(e),otherShopSearchKeyword:Object(m.g)(e),currentUser:Object(S.currentUserSelector)(e),currentConversation:Object(S.currentConversationSelector)(e),isSubAccount:Object(S.isSubAccountSelector)(e),currentBuyer:Object(S.currentBuyerSelector)(e),isScChat:Object(S.isScChatSelector)(e),allShopSearchStatus:Object(m.a)(e),selectedProductTab:Object(m.i)(e),myShop:Object(S.myShopSelector)(e),currentBuyerShop:Object(S.currentBuyerShopSelector)(e)}}),O)(E)},PwGw:function(e,t,n){"use strict";(function(e){n("I5cv");var a=n("lwsE"),r=n.n(a),o=n("W8MJ"),s=n.n(o),c=n("PJYZ"),i=n.n(c),u=n("7W2i"),l=n.n(u),d=n("a1gu"),p=n.n(d),h=n("Nsbk"),f=n.n(h),v=(n("2Spj"),n("L9s1"),n("Z2Ku"),n("bWfx"),n("f3/d"),n("q1tI")),m=n.n(v),g=n("17x9"),y=n.n(g),b=n("se/o"),S=n("8Wdg"),R=n("OW4m"),E=n("m2L4"),O=n.n(E),k=n("3XcH"),C=n.n(k),M=n("oLbX"),_=n.n(M),w=n("XnKn"),I=n("yghM"),j=n("L0c6"),T=n.n(j),P=n("Q83b"),N=n("h4gR"),x=n("DFPT"),D=n.n(x),q=n("2dPg"),L=n.n(q),A=n("VyfW"),W=n.n(A);function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var F=w.MessageShortcutGroupType.PERSONAL,U=w.MessageShortcutGroupType.TEAM,H=0,G=function(t){l()(a,t);var n=B(a);function a(t,o){var s;return r()(this,a),(s=n.call(this,t,o)).getRef=s.getRef.bind(i()(s)),s.getListRef=s.getListRef.bind(i()(s)),s.handleMouseMove=s.handleMouseMove.bind(i()(s)),s.handleKeyDown=s.handleKeyDown.bind(i()(s)),s.selectMessage=s.selectMessage.bind(i()(s)),s.handleAppendMessage=s.handleAppendMessage.bind(i()(s)),s.handleClick=s.handleClick.bind(i()(s)),s.redirectToSettings=s.redirectToSettings.bind(i()(s)),s.handleGoMessageShortcuts=s.handleGoMessageShortcuts.bind(i()(s)),s._updateScrollButton=s._updateScrollButton.bind(i()(s)),s.updateScrollButton=Object(I.a)(s._updateScrollButton,200,0),s.handleClickGroup=s.handleClickGroup.bind(i()(s)),s.handleLeftClick=s.handleLeftClick.bind(i()(s)),s.handleRightClick=s.handleRightClick.bind(i()(s)),s.listNode=null,s.messageListNode=null,s.groupHeaderRef=null,s.scrollHeaderRef=null,s.state={activeIndex:0,scrollButton:{start:!1,end:!1}},s.title=e("speech_bubble_guide.step2.title"),s.subTitle=e("speech_bubble_guide.step2.sub_title"),s.messageListSelecteTips=e("conversation_detail.input_field.chat_editor.hints.to_select"),s}return s()(a,[{key:"componentDidMount",value:function(){this.props.currentGroupId||(H=0),this.updateScrollButton(!0),window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(e){var t=e.currentGroupType;this.props.currentGroupType!==t&&this.updateScrollButton(!0)}},{key:"getRef",value:function(e){this.listNode=e}},{key:"getListRef",value:function(e){this.messageListNode=e}},{key:"handleMouseMove",value:function(e){this.state.activeIndex!==e&&this.setState({activeIndex:e})}},{key:"redirectToSettings",value:function(e){var t,n=Object(w.getWebChatPureUrl)();t="edit"===e?"/settings/message_shortcuts":"/settings/message_shortcuts?type=add",Object(R.a)({currentConversation:{},webChatUrl:"".concat(n).concat(t)})}},{key:"redirectToScSetting",value:function(e){var t="https://".concat(Object(w.getSellerCenterUrl)(),"/portal/assistant/basic/messageShortcuts").concat("add"===e?"/create":"");window.open(t)}},{key:"handleGoMessageShortcuts",value:function(e){var t=this.props,n=t.isSubAccount,a=t.currentUserRole,r=t.currentGroupType;n&&!a.includes(P.a.NORMAL)&&r===F?this.redirectToSettings(e):this.redirectToScSetting(e)}},{key:"selectMessage",value:function(e){var t,n=this.state.activeIndex,a=this.props.messageShortcuts.length;if(t="up"===e?n-1<0?n-1+a:n-1:n+1>=a?(n+1)%a:n+1,this.messageListNode){var r=this.messageListNode,o=r.children[t];o.offsetTop>r.offsetHeight+r.scrollTop?r.scrollTop=o.offsetTop-r.offsetHeight:o.offsetTop<=r.offsetHeight+r.scrollTop&&(o.offsetTop<r.scrollTop?r.scrollTop=0:r.scrollTop-=o.offsetHeight)}this.setState({activeIndex:t})}},{key:"handleClick",value:function(){var e=this.props.closePortal;return this.handleAppendMessage(),e(),!1}},{key:"handleAppendMessage",value:function(){var e=this.props,t=e.messageShortcuts,n=e.onSelectMessageShortcut;t.length&&n(t[this.state.activeIndex].content)}},{key:"handleScrollToTop",value:function(){this.setState({activeIndex:0}),this.messageListNode&&(this.messageListNode.scrollTop=0)}},{key:"handleKeyDown",value:function(e){var t=this.props,n=t.closePortal,a=t.onEnterEsc;switch(e.keyCode){case 13:e.preventDefault(),this.handleAppendMessage(),n();break;case 27:a(),n();break;case 38:this.selectMessage("up");break;case 40:this.selectMessage("down")}e.stopPropagation()}},{key:"_updateScrollButton",value:function(e){var t=this.scrollHeaderRef;if(!t)return null;var n=t.children,a=n.length;if(!a)return null;e&&(t.scrollLeft=H);var r=t.scrollLeft,o=t.offsetWidth,s=n[0].offsetWidth,c=n[a-1],i=r>s,u=c.offsetLeft+c.offsetWidth>r+o;this.setState({scrollButton:{start:i,end:u}})}},{key:"handleClickGroup",value:function(e){if(e.target){var t=this.scrollHeaderRef;H=t.scrollLeft}}},{key:"handleLeftClick",value:function(e){var t=this.scrollHeaderRef,n=t.offsetWidth,a=t.children;if(!a.length)return null;var r=t.scrollLeft-n,o=a[0].offsetWidth;t.scrollLeft=r>o?r:0,e.nativeEvent.stopImmediatePropagation(),this.updateScrollButton()}},{key:"handleRightClick",value:function(e){var t=this.scrollHeaderRef,n=t.offsetWidth;t.scrollLeft+=n,e.nativeEvent.stopImmediatePropagation(),this.updateScrollButton()}},{key:"render",value:function(){var t=this,n=this.state,a=n.scrollButton,r=a.start,o=a.end,s=n.activeIndex,c=this.props,i=c.isSubAccount,u=c.messageShortcutGroupContent,l=c.setCurrentGroupId,d=c.currentUserRole,p=c.currentGroupType,h=c.messageShortcuts,f=void 0===h?[]:h,v=u.groups,g=void 0===v?[]:v,y=u.currentGroupId,b=i&&d.includes(P.a.NORMAL);return m.a.createElement("div",{className:T.a.root,ref:this.getRef},m.a.createElement("div",{className:T.a.groupHeader,ref:function(e){return t.groupHeaderRef=e}},r&&m.a.createElement(N.Icon,{svg:L.a,className:T.a.arrowLeft,onClick:function(e){return t.handleLeftClick(e)}}),m.a.createElement("div",{onScroll:function(){t.updateScrollButton()},className:T.a.scrollHeadr,ref:function(e){return t.scrollHeaderRef=e}},g.map((function(e){var n=e.id,a=e.name;return(m.a.createElement("div",{key:n,title:a,className:"".concat(T.a.groupItem," ").concat(n===y?T.a.active:""),onClick:function(e){t.handleClickGroup(e),l({groupType:p,currentGroupId:n})}},a))}))),o&&m.a.createElement(N.Icon,{svg:W.a,className:T.a.arrowRight,onClick:function(e){t.handleRightClick(e)}}),!(g.length>0)||p===U&&i&&b?null:m.a.createElement(N.Icon,{svg:D.a,onClick:function(){t.handleGoMessageShortcuts("edit")},className:T.a.editEntry,title:e(p===F&&i?"common.edit.edit_in_chat":"common.edit")})),f.length>0?m.a.createElement("div",{className:T.a.messageList,ref:function(e){return t.messageListNode=e}},f.map((function(e,n){return m.a.createElement("div",{className:"".concat(T.a.content," ").concat(s===n?T.a.activeContent:""),key:e.id,onMouseMove:function(e){return t.handleMouseMove(n,e)},onClick:function(e){return t.handleClick(e)},id:"".concat(0===n?"first-message":""),title:e.content},m.a.createElement(O.a,{clamp:2},e.content))}))):m.a.createElement("div",{className:T.a.emptyList},m.a.createElement("img",{className:T.a.emptyImage,src:p===U&&i&&b?C.a:_.a}),m.a.createElement("div",{className:T.a.emptyTips},e("conversation_detail.input_field.toolbar.message_shortcuts.no_shortcuts")),p===U&&i&&b?m.a.createElement("div",{className:T.a.buttonNoAccess},e("common.messageshortcuts.no_access")):m.a.createElement("div",{className:T.a.createButton,onClick:function(){t.handleGoMessageShortcuts("add")}},e(p===F?"common.messageshortcuts.create_in_chat":"conversation_detail.input_field.toolbar.message_shortcuts.create_shortcuts"))))}}]),a}(v.PureComponent);G.propTypes={closePortal:y.a.func.isRequired,messageShortcuts:y.a.array.isRequired,onSelectMessageShortcut:y.a.func.isRequired,onEnterEsc:y.a.func.isRequired,isSubAccount:y.a.bool,messageShortcutGroupContent:y.a.object,currentGroupType:y.a.number,currentGroupId:y.a.number,setCurrentGroupId:y.a.func,currentUserRole:y.a.string},t.a=Object(b.a)(Object(S.a)(G))}).call(this,n("kiXb").t)},Q83b:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a={NORMAL:"normal_subaccount",ADMIN:"admin_subaccount",MAIN:"main_subaccount"}},QiV6:function(e,t){performance&&performance.mark&&performance.mark("STATIC_LOADED")},"R/fK":function(e,t,n){"use strict";n.d(t,"b",(function(){return E})),n.d(t,"c",(function(){return O})),n.d(t,"d",(function(){return w}));var a,r=n("lSNA"),o=n.n(r),s=n("RIqP"),c=n.n(s),i=(n("T39b"),n("XfO3"),n("Btvt"),n("yt8O"),n("rGqo"),n("RW0V"),n("ioFf"),n("0l/t"),n("mYba"),n("8+KV"),n("jm62"),n("WLL4"),n("HAE/"),n("o0o1")),u=n.n(i),l=n("FH7K"),d=n("5rFJ"),p=n("jtha"),h=n("XnKn"),f=n("tvxL"),v=n("cOd3");function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=u.a.mark(M),b=u.a.mark(_),S=u.a.mark(w),R=Object(l.a)({FETCH_ALL_ORDERS_REQUESTED:function(e){return{shopId:e.shopId,buyerShopId:e.buyerShopId,userId:e.userId}},FETCH_ORDERS_REQUESTED:function(e){var t=e.from;return{from:void 0===t?h.ListTabs.MINE:t,shopId:e.shopId,userId:e.userId,reset:e.reset,isFromAll:e.isFromAll}},FETCH_ORDERS_SUCCEED:function(e){var t=e.shopId,n=e.userId,a=e.pagination;return{shopId:t,userId:n,result:e.result,pagination:a}},UPDATE_FETCH_ORDERS_STATUS:function(e){return{type:e.type,status:e.status}}}),E=R.fetchAllOrdersRequested,O=R.fetchOrdersRequested,k=R.fetchOrdersSucceed,C=R.updateFetchOrdersStatus;function M(e){var t,n,a,r;return u.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,n=t.shopId,a=t.buyerShopId,r=t.userId,o.next=3,Object(d.put)(C({status:h.HttpStatus.INIT_PENDING}));case 3:return o.prev=3,o.next=6,Object(d.all)([Object(d.call)(_,{payload:{shopId:n,userId:r,reset:!0,isFromAll:!0}}),Object(d.call)(_,{payload:{from:h.ListTabs.HIS,shopId:a,userId:r,reset:!0,isFromAll:!0}})]);case 6:return o.next=8,Object(d.put)(C({status:h.HttpStatus.SUCCEED}));case 8:o.next=14;break;case 10:return o.prev=10,o.t0=o.catch(3),o.next=14,Object(d.put)(C({status:h.HttpStatus.INIT_FAILED}));case 14:case"end":return o.stop()}}),y,null,[[3,10]])}function _(e){var t,n,a,r,o,s,i,l,m,g,y,S,R,E,O,M,_,w,I,j,T,P,N,x,D,q,L,A,W;return u.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:if(t=e.payload,n=t.from,a=t.shopId,r=t.userId,o=t.reset,s=t.isFromAll,i=void 0!==s&&s,u.prev=1,l=[],m={},o){u.next=10;break}return u.next=7,Object(d.select)(Object(v.a)(a,r));case 7:g=u.sent,l=g.result,m=g.pagination;case 10:if(S=(y=m).currentPage,R=void 0===S?0:S,E=y.perPage,O=void 0===E?10:E,M=y.hasMore,!(void 0===M||M)){u.next=45;break}if(_=h.HttpStatus.PENDING,!o){u.next=17;break}return u.next=16,Object(d.put)(k({shopId:a,userId:r,result:l,pagination:m}));case 16:_=h.HttpStatus.INIT_PENDING;case 17:return u.next=19,Object(d.put)(C({type:n,status:_}));case 19:return I={ssl:!0,suffix:"orders_by_buyer_id",resource:"orders",params:{shop_id:a,buyer_id:r,per_page:O,page:w=o?1:R+1}},n===h.ListTabs.HIS&&(delete I.params.buyer_id,I.suffix="purchased"),u.next=24,Object(d.call)(p.a,I);case 24:if(j=u.sent,T=j.total,P=j.orders,x=null,D=null,!(q=(N=void 0===P?[]:P).length)){u.next=39;break}return L=Object(f.normalize)("orders",N),A=L.entities,W=L.result,u.next=35,Object(d.put)(Object(f.updateEntities)({entities:A}));case 35:x={currentPage:w,perPage:O,total:T,hasMore:q>=O},D=o?W:c()(new Set(l.concat(W))),u.next=41;break;case 39:x={currentPage:w,perPage:O,total:T,hasMore:!1},D=l;case 41:return u.next=43,Object(d.put)(k({shopId:a,userId:r,result:D,pagination:x}));case 43:return u.next=45,Object(d.put)(C({type:n,status:h.HttpStatus.SUCCEED}));case 45:u.next=53;break;case 47:return u.prev=47,u.t0=u.catch(1),u.next=51,Object(d.put)(C({type:n,status:o?h.HttpStatus.INIT_FAILED:h.HttpStatus.FAILED}));case 51:if(!i){u.next=53;break}throw u.t0;case 53:case"end":return u.stop()}}),b,null,[[1,47]])}function w(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.takeEvery)(E,M);case 2:return e.next=4,Object(d.takeEvery)(O,_);case 4:case"end":return e.stop()}}),S)}t.a=(a={},o()(a,k,(function(e,t){var n=t.payload,a=n.shopId,r=n.userId,s=n.pagination,c=n.result,i="".concat(a,"_").concat(r);return g(g({},e),{},{fetchResult:g(g({},e.fetchResult),{},o()({},i,{pagination:s,result:c}))})})),o()(a,C,(function(e,t){var n=t.payload,a=n.type,r=n.status;switch(a){case h.ListTabs.MINE:e.fetchMyOrdersStatus=r;break;case h.ListTabs.HIS:e.fetchHisOrdersStatus=r;break;default:e.status=r}return g({},e)})),a)},S4Or:function(e,t,n){e.exports=n.p+"91095bcead05511cb1282ef16d60c2bf.png"},"S7/o":function(e,t,n){"use strict";n("I5cv"),n("ioFf"),n("0l/t"),n("mYba"),n("jm62"),n("WLL4"),n("HAE/");var a=n("pVnL"),r=n.n(a),o=n("lSNA"),s=n.n(o),c=n("QILm"),i=n.n(c),u=n("lwsE"),l=n.n(u),d=n("W8MJ"),p=n.n(d),h=n("PJYZ"),f=n.n(h),v=n("7W2i"),m=n.n(v),g=n("a1gu"),y=n.n(g),b=n("Nsbk"),S=n.n(b),R=(n("2Spj"),n("L9s1"),n("Z2Ku"),n("8+KV"),n("RW0V"),n("bWfx"),n("fN96"),n("xfY5"),n("q1tI")),E=n.n(R),O=n("17x9"),k=n.n(O),C=n("dGdO"),M=n.n(C),_=n("se/o"),w=n("KmjB"),I=n("C5SH"),j=n("s3ZY"),T=n("GqUL"),P=n("Iatj"),N=n("4LQ7"),x=["stopIndex"];function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=S()(e);if(t){var r=S()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return y()(this,n)}}var A=function(e){m()(n,e);var t=L(n);function n(e){var a;return l()(this,n),(a=t.call(this,e)).listRef=null,a.cellMeasureRefs={},a.scrollTop=0,a.onRowsRendered=null,a.state={loadedRowsMap:{}},a.cache=new P.a({fixedWidth:!0}),a.isRowLoaded=a.isRowLoaded.bind(f()(a)),a.rowRenderer=a.rowRenderer.bind(f()(a)),a.cellRenderer=a.cellRenderer.bind(f()(a)),a.loadMoreRows=a.loadMoreRows.bind(f()(a)),a.handleScroll=a.handleScroll.bind(f()(a)),a.remeasure=Object(w.c)(a.remeasure.bind(f()(a)),500),a.setCellMeasureRef=a.setCellMeasureRef.bind(f()(a)),a.onSectionRendered=a.onSectionRendered.bind(f()(a)),a.handleRowRendered=a.handleRowRendered.bind(f()(a)),a.renderAutoSizerList=a.renderAutoSizerList.bind(f()(a)),a}return p()(n,[{key:"componentDidUpdate",value:function(e){var t=e.extraProps,n=e.listItems,a=this.props,r=a.listItems,o=a.needRemeasure,s=a.extraProps;o&&([r.length+1,r.length-1].includes(n.length)||t.measureFlag!==s.measureFlag)&&this.remeasure()}},{key:"remeasure",value:function(){var e=this;this.cache.clearAll(),this.listRef&&this.listRef.recomputeRowHeights(),this.cellMeasureRefs&&Object.keys(this.cellMeasureRefs).forEach((function(t){e.cellMeasureRefs[t]&&e.cellMeasureRefs[t]._maybeMeasureCell()}))}},{key:"setCellMeasureRef",value:function(e,t){this.cellMeasureRefs[e]=t}},{key:"handleRowRendered",value:function(e){var t=e.stopIndex,n=i()(e,x),a=this.props.handleRowRendered;a&&a(t),this.onRowsRendered&&this.onRowsRendered(q({stopIndex:t},n))}},{key:"onSectionRendered",value:function(e){var t=e.columnStartIndex,n=e.columnStopIndex,a=e.rowStartIndex,r=e.rowStopIndex,o=this.props.columnCount,s=a*o+t,c=r*o+n;this.onRowsRendered({startIndex:s,stopIndex:c})}},{key:"handleScroll",value:function(e){var t=e.scrollTop,n=this.props,a=n.handleComponentScroll,r=n.handleListScroll;r&&r(t),this.scrollTop>t?a("up"):a("down"),this.scrollTop=t}},{key:"rowRenderer",value:function(e){var t=e.key,n=e.index,a=(e.isScrolling,e.isVisible,e.parent),r=e.style,o=this.props,s=o.listItems,c=o.makeRenderedCell,i=s[n];if(!i)return null;var u="".concat(t,"_").concat(i.id);return(E.a.createElement(T.a,{key:u,parent:a,columnIndex:0,rowIndex:n,cache:this.cache},(function(e){var t=e.measure;return c(i,r,t)})))}},{key:"cellRenderer",value:function(e){var t=this,n=e.columnIndex,a=(e.isScrolling,e.isVisible,e.key,e.parent),r=e.rowIndex,o=e.style,s=this.props,c=s.listItems,i=s.columnCount,u=s.makeRenderedCell,l=c[r*i+n];if(l){var d="".concat(l.id,"_card");return(E.a.createElement(T.a,{key:d,parent:a,cache:this.cache,rowIndex:r,columnIndex:n,ref:function(e){return t.setCellMeasureRef(d,e)}},(function(e){var t=e.measure;return u(l,o,t)})))}}},{key:"loadMoreRows",value:function(e){var t=e.startIndex,n=e.failedStatus,a=void 0===n?"":n,r=this.state.loadedRowsMap;if(!r[t]){var o=this.props,c=o.status;(0,o.loadMoreRowsRequested)({needReset:"failedInit"===a}),c.includes("failed")||this.setState({loadedRowsMap:q(q({},r),{},s()({},t,!0))})}}},{key:"isRowLoaded",value:function(e){var t=e.index;return!!this.props.listItems[t]}},{key:"renderAutoSizerList",value:function(e,t){var n=this,a=this.props,o=a.listItems,s=a.extraProps,c=a.getListRef,i=a.needScrollSpace;this.onRowsRendered=e;var u=o.length||0;return(E.a.createElement(j.a,null,(function(e){var a=e.width,o=e.height;return(E.a.createElement(I.a,r()({ref:function(e){n.listRef=e,c&&c(e),t&&t(e)},width:a,height:o,overscanRowCount:20,rowCount:u,onScroll:n.handleScroll,rowRenderer:n.rowRenderer,rowHeight:n.cache.rowHeight,onRowsRendered:n.handleRowRendered,deferredMeasurementCache:n.cache,onRecomputeGrid:function(){},containerStyle:{},className:"".concat(M.a.list," ").concat(i?M.a.space:"")},s)))})))}},{key:"render",value:function(){var e=this;return(E.a.createElement("div",{className:M.a.root},this.props.isInfinite?E.a.createElement(N.a,{rowCount:9999,isRowLoaded:this.isRowLoaded,loadMoreRows:this.loadMoreRows},(function(t){var n=t.onRowsRendered,a=t.registerChild;return e.renderAutoSizerList(n,a)})):this.renderAutoSizerList()))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=t.loadedRowsMap,a=e.status,r=e.resetRowsMap,o=e.onResetCacheMap;if(r)return o&&o(),{loadedRowsMap:{}};if(a.includes("failed")){var c=Object.keys(n).map((function(e){return parseInt(e)})),i=Math.max.apply(null,c);return i=Number.isInteger(i)?i:0,{loadedRowsMap:q(q({},n),{},s()({},i,!1))}}return null}}]),n}(E.a.PureComponent);A.propTypes={status:k.a.string,isInfinite:k.a.bool,listItems:k.a.array,rowHeight:k.a.number,getListRef:k.a.func,resetRowsMap:k.a.bool,extraProps:k.a.object,columnCount:k.a.number,columnWidth:k.a.number,needRemeasure:k.a.bool,needScrollSpace:k.a.bool,makeRenderedCell:k.a.func,handleListScroll:k.a.func,handleRowRendered:k.a.func,loadMoreRowsRequested:k.a.func,handleComponentScroll:k.a.func,onResetCacheMap:k.a.func},A.defaultProps={status:"",listItems:[],extraProps:{},isInfinite:!0,resetRowsMap:!1,needRemeasure:!1,needScrollSpace:!1},t.a=Object(_.a)(A)},SUBy:function(e,t,n){"use strict";n("I5cv");var a=n("lwsE"),r=n.n(a),o=n("W8MJ"),s=n.n(o),c=n("7W2i"),i=n.n(c),u=n("a1gu"),l=n.n(u),d=n("Nsbk"),p=n.n(d),h=(n("pIFo"),n("Tze0"),n("q1tI")),f=n.n(h),v=n("17x9"),m=n.n(v),g=n("kuoV"),y=n.n(g),b=n("4j81"),S=["blue","green","orange","purple","red","yellow"],R=["blue-gray","green-gray","orange-gray","purple-gray","red-gray","yellow-gray"],E=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"member",a=e%S.length;return"member"===n?"inactive"===t?R[a]:S[a]:"inactive"===t?"group-gray":"group"},O=n("h4gR"),k=n("KoTY"),C=n.n(k),M=n("Gm4R"),_=n.n(M);function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return l()(this,n)}}var I=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,j={shop:C.a,user:_.a},T=function(e){i()(n,e);var t=w(n);function n(){return r()(this,n),t.apply(this,arguments)}return s()(n,[{key:"render",value:function(){var e=this.props,t=e.icon,n=e.shape,a=e.status,r=e.avatar,o=e.avatarHash,s=e.userId,c=e.origin,i=e.username,u=e.avatarRef,l=e.fontSize,d=void 0===l?24:l,p=e.type,h=void 0===p?"member":p,v=null,m=null;return r||(v="cb"===c?"member"===h?"".concat(y.a[E(s,a,h)]," ").concat(y.a["font".concat(d)]):"".concat(y.a[E(s,a,h)]):"","member"!==h||t||(m=(i||"S").trim().replace(I,"#")[0])),f.a.createElement("div",{ref:function(e){u&&u(e)},className:"".concat(y.a.root," ").concat(y.a[n])},r?f.a.createElement("div",{className:y.a.avatarWrapper},f.a.createElement(b.Image,{src:r,hash:o}),f.a.createElement("div",{className:y.a.avatarBorder})):t?f.a.createElement("div",{className:v,style:{width:"100%",height:"100%"}},f.a.createElement("div",{className:y.a["".concat(t,"Icon")]})):"cb"===c?"member"!==h?f.a.createElement("div",{className:v}):f.a.createElement("div",{className:v},m.toUpperCase()):f.a.createElement(O.Icon,{svg:j[c],className:y.a[c]}))}}]),n}(f.a.PureComponent);T.propTypes={avatar:m.a.string,username:m.a.string,userId:m.a.number,avatarRef:m.a.func,status:m.a.string,type:m.a.string,icon:m.a.string,origin:m.a.string,shape:m.a.string,fontSize:m.a.number},T.defaultProps={origin:"user",shape:"square"};t.a=T},SdKD:function(e,t,n){"use strict";var a=n("lSNA"),r=n.n(a),o=n("J4zp"),s=n.n(o),c=(n("f3/d"),n("bWfx"),n("q1tI")),i=n.n(c),u=n("RBR7"),l=n.n(u),d=n("17x9"),p=n.n(d),h=(n("I5cv"),n("lwsE")),f=n.n(h),v=n("W8MJ"),m=n.n(v),g=n("7W2i"),y=n.n(g),b=n("a1gu"),S=n.n(b),R=n("Nsbk"),E=n.n(R),O=n("sF2i"),k=n.n(O);function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=E()(e);if(t){var r=E()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return S()(this,n)}}var M=function(e){y()(n,e);var t=C(n);function n(){return f()(this,n),t.apply(this,arguments)}return m()(n,[{key:"render",value:function(){var e=this.props,t=e.icon,n=e.label,a=e.iconComp;return(i.a.createElement("div",{key:t,className:"".concat(k.a.base," ").concat(a?"":k.a[t])},a,n))}}]),n}(i.a.PureComponent);M.propTypes={iconComp:p.a.node,icon:p.a.string,label:p.a.string};var _=M,w=n("h4gR"),I=n("wdSf"),j=n.n(I),T=function(e){var t=e.content,n=e.label,a=e.labelStyle,o=e.options,u=e.onOpen,d=e.onClose,p=e.placement,h=e.distance,f=e.settingNodeRef,v=Object(c.useState)({}),m=s()(v,2),g=m[0],y=m[1],b=Object(c.useRef)({}),S=Object(c.useState)(!1),R=s()(S,2),E=R[0],O=R[1],k=function(){O(!1),d&&d()},C=function(e,t){if(e&&t.isOutLink){var n=r()({},t.id,!0);y(n)}else y({})};return i.a.createElement("div",{className:l.a.root,onClick:function(e){e.stopPropagation()}},i.a.createElement(w.Popover,{className:l.a.popover,trigger:"click",placement:p,distance:h,withState:!1,isOpen:E,setIsOpen:function(e){e?(O(!0),u&&u()):(O(!1),d&&d())},content:i.a.createElement("div",{style:b.current.portal,className:l.a.portal},i.a.createElement("div",{style:b.current.list,className:l.a.list},t?t(k):o.map((function(e,t){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=e.id,r=e.icon,o=e.iconComp,s=e.name,c=e.node,u=e.handleSelect,d=e.meta,p=void 0===d?{}:d,h=p.hasRedPoint,v="".concat(s?l.a.option:l.a.node),m=r||o?i.a.createElement(_,{icon:r,iconComp:o,label:s}):s;return i.a.createElement("div",{key:"item".concat(n),className:v,onClick:function(e){u&&u(),t(e),e.stopPropagation()},onMouseEnter:function(){return C(!0,e)},onMouseLeave:function(){return C(!1,e)},ref:p.isSettingMenu&&f},g[a]&&i.a.createElement("div",{className:l.a.outerLink},i.a.createElement(w.Icon,{svg:j.a,className:l.a.outerLinkIcon})),s?h?i.a.createElement("div",{className:l.a.reddot},m):m:c)}(e,k,t)}))))},i.a.createElement("div",{style:a,className:l.a.button},n)))};T.propTypes={label:p.a.node,placement:p.a.string,distance:p.a.number,options:p.a.array,settingNodeRef:p.a.func,onOpen:p.a.func,onClose:p.a.func,labelStyle:p.a.object,content:p.a.oneOfType([p.a.func,p.a.node])};t.a=T},VTii:function(e,t,n){e.exports=n.p+"b43d095455136d3f4080437deba43624.png"},WBRc:function(e,t,n){"use strict";n("I5cv");var a=n("lwsE"),r=n.n(a),o=n("W8MJ"),s=n.n(o),c=n("PJYZ"),i=n.n(c),u=n("7W2i"),l=n.n(u),d=n("a1gu"),p=n.n(d),h=n("Nsbk"),f=n.n(h),v=(n("2Spj"),n("91GP"),n("Tze0"),n("pIFo"),n("Oyvg"),n("KKXr"),n("I78e"),n("q1tI")),m=n.n(v),g=n("17x9"),y=n.n(g),b=n("Xjjk"),S=n.n(b),R=n("m2L4"),E=n.n(R);function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var k=function(e){l()(n,e);var t=O(n);function n(e){var a;return r()(this,n),(a=t.call(this,e)).state={anchorParentRef:null,anchorRef:null,shadowRef:null,prevSearchword:""},a.getAnchorRef=a.getAnchorRef.bind(i()(a)),a.getAnchorParentRef=a.getAnchorParentRef.bind(i()(a)),a.getShadowRef=a.getShadowRef.bind(i()(a)),a}return s()(n,[{key:"getAnchorRef",value:function(e){e&&this.setState({anchorRef:e})}},{key:"getAnchorParentRef",value:function(e){e&&this.setState({anchorParentRef:e})}},{key:"getShadowRef",value:function(e){e&&this.setState({shadowRef:e})}},{key:"getWrapperStyle",value:function(){var e=this.props.rows,t=this.state.anchorParentRef,n={width:"100%",overflow:"hidden",textOverflow:"ellipsis",wordBreak:"break-all"};if(t){var a=t.getBoundingClientRect().height;n.maxHeight="".concat(a*e,"px"),n.lineHeight="".concat(a,"px")}return e>1?Object.assign(n,{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:String(e)}):Object.assign(n,{whiteSpace:"nowrap"})}},{key:"render",value:function(){var e=this.props,t=e.searchWords,n=e.highlightTag,a=e.textToHighlight,r=e.highlightClassName,o=e.rows,s=e.prefix;if(!a||"string"!=typeof a)return"";a=S()(a,{whiteList:{}});var c=t.trim().toLowerCase(),i=a.toLowerCase(),u=this.state,l=u.anchorRef,d=u.anchorParentRef,p=u.shadowRef,h=c.replace(/[.[\]{}()+?*^\\$?]/g,"\\$&"),f=new RegExp(h,"gi"),v=c&&i.split(c)||[],g=v.length>1,y=v.pop(),b=g?v.join(t):a,R=a,O=!g;if(l&&d&&p&&!O){var k=l.getBoundingClientRect(),C=k.left,M=k.width,_=d.getBoundingClientRect(),w=_.left,I=_.width,j=p.getBoundingClientRect().width*o;if(C-w+M-j>0){var T=s?s.length:0,P=b.length/a.length,N=Math.ceil(j/I*a.length),x=b.slice(b.length-Math.ceil(N*P)+T+5);R=(b.length?"...":"")+x+t+y}O=!0,R=g&&R.replace(f,"<".concat(n," class='").concat(r,"'>$&</").concat(n,">"))||a}return O?m.a.createElement(E.a,{clamp:o},m.a.createElement("div",{style:this.getWrapperStyle(),title:a,dangerouslySetInnerHTML:{__html:"".concat(s," ").concat(R)}})):m.a.createElement(m.a.Fragment,null,m.a.createElement("span",{style:{position:"absolute",opacity:0,zIndex:-1,wordBreak:"keep-all",whiteSpace:"nowrap"},ref:this.getAnchorParentRef},b,m.a.createElement("span",{ref:this.getAnchorRef},t),y),m.a.createElement("div",{style:{width:"100%",overflow:"hidden",opacity:0},ref:this.getShadowRef}," ",a))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.searchWords;return n!==t.prevSearchword?{prevSearchword:n,anchorParentRef:null}:null}}]),n}(m.a.PureComponent);k.propTypes={searchWords:y.a.string,highlightTag:y.a.string,textToHighlight:y.a.string,highlightClassName:y.a.string,rows:y.a.number,prefix:y.a.string},k.defaultProps={highlightTag:"span",rows:1,searchWords:"",prefix:""},t.a=k},WFdJ:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n("XfO3"),n("Btvt"),n("yt8O"),n("rGqo"),n("VRzm");var a=n("tvxL"),r=n("wNa6");function o(){return Promise.all([n.e(1),n.e(2),n.e(3),n.e(0),n.e(10)]).then(n.bind(null,"HpcU"))}function s(){return Promise.all([n.e(1),n.e(2),n.e(3),n.e(0),n.e(11)]).then(n.bind(null,"ShLy"))}function c(){a.EventBus.on("getVideoUploader",(function(e){!function(e){var t=null;switch(e){case"txcloud":t=o();break;case"wscloud":t=s();break;default:t=o()}t.then((function(e){return a.EventBus.emit("setVideoUploader",e.default)}))}(e)})),Promise.all([o(),s()]).then((function(){r.store.dispatch(Object(a.updateVideoUploaderFetchStatus)({status:!0}))}))}},WbBG:function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},WnRE:function(e,t,n){"use strict";n.d(t,"c",(function(){return M})),n.d(t,"d",(function(){return N})),n.d(t,"b",(function(){return x})),n.d(t,"e",(function(){return L}));n("RW0V"),n("ioFf"),n("0l/t"),n("mYba"),n("8+KV"),n("jm62"),n("WLL4"),n("HAE/");var a,r=n("lSNA"),o=n.n(r),s=n("o0o1"),c=n.n(s),i=n("FH7K"),u=n("5rFJ"),l=n("jtha"),d=n("XnKn"),p=n("tvxL"),h=n("nbEg");function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m=c.a.mark(D),g=c.a.mark(q),y=c.a.mark(L),b=10,S=d.HttpStatus.INIT_PENDING,R=d.HttpStatus.INIT_FAILED,E=d.HttpStatus.PENDING,O=d.HttpStatus.SUCCEED,k=d.HttpStatus.FAILED,C=Object(i.a)({FETCH_PRODUCTS_REQUESTED:function(e){var t=e.shopId,n=e.keyword,a=void 0===n?"":n,r=e.reset;return{shopId:t,keyword:a,reset:void 0!==r&&r}},FETCH_PRODUCTS_SUCCEED:function(e){return{shopId:e.shopId,pagination:e.pagination,result:e.result}},UPDATE_MY_SHOP_PRODUCTS_REQUESTED_STATUS:function(e){return{status:e.status}},UPDATE_OTHER_SHOP_PRODUCTS_REQUESTED_STATUS:function(e){return{status:e.status}},UPDATE_ALL_SHOP_PRODUCTS_REQUESTED_STATUS:function(e){return{status:e.status}},UPDATE_MY_SHOP_SEARCH_KEYWORD:function(e){return{keyword:e.keyword}},UPDATE_OTHER_SHOP_SEARCH_KEYWORD:function(e){return{keyword:e.keyword}},UPDATE_SELECTED_PRODUCT_TAB:function(e){return{selectedTab:e}},FETCH_ALL_PRODUCTS_REQUESTED:function(e){return{myShopId:e.myShopId,otherShopId:e.otherShopId}}}),M=C.fetchProductsRequested,_=(C.fetchMyShopProducts,C.fetchProductsSucceed),w=C.updateMyShopProductsRequestedStatus,I=C.updateOtherShopProductsRequestedStatus,j=C.updateAllShopProductsRequestedStatus,T=C.updateMyShopSearchKeyword,P=C.updateOtherShopSearchKeyword,N=C.updateSelectedProductTab,x=C.fetchAllProductsRequested;function D(e){var t,n,a;return c.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,n=t.myShopId,a=t.otherShopId,r.next=3,Object(u.put)(j({status:S}));case 3:return r.prev=3,r.next=6,Object(u.all)([q({payload:{shopId:n,keyword:"",reset:!0,isFromAll:!0}}),q({payload:{shopId:a,keyword:"",reset:!0,isFromAll:!0}})]);case 6:return r.next=8,Object(u.put)(j({status:O}));case 8:r.next=14;break;case 10:return r.prev=10,r.t0=r.catch(3),r.next=14,Object(u.put)(j({status:R}));case 14:case"end":return r.stop()}}),m,null,[[3,10]])}function q(e){var t,n,a,r,o,s,i,d,f,v,m,y,C,M,j,N,x,D,q,L,A,W,B,F,U,H,G,K;return c.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,n=t.shopId,a=t.keyword,r=t.reset,o=t.isFromAll,s=void 0!==o&&o,c.next=3,Object(u.select)(p.currentShopIdSelector);case 3:if(i=c.sent,d=i===n,c.prev=5,f={},v=[],r){c.next=16;break}return c.next=11,Object(u.select)(Object(h.b)(n));case 11:m=c.sent,f=m.pagination,v=m.result,c.next=23;break;case 16:if(!d){c.next=21;break}return c.next=19,Object(u.put)(T({keyword:a}));case 19:c.next=23;break;case 21:return c.next=23,Object(u.put)(P({keyword:a}));case 23:if(C=(y=f).currentPage,M=void 0===C?0:C,j=y.perPage,N=void 0===j?b:j,x=y.hasMore,!(void 0===x||x)){c.next=61;break}if(q={shop_id:n,keyword:a,per_page:N,page:D=r?1:M+1,need_cache:1,cache_expires:600},!d){c.next=32;break}return c.next=30,Object(u.put)(w({status:r?S:E}));case 30:c.next=34;break;case 32:return c.next=34,Object(u.put)(I({status:r?S:E}));case 34:return c.next=36,Object(u.call)(l.a,{ssl:!0,resource:"items",params:q,cleaner:p.productCleaner});case 36:if(L=c.sent,A=L.total,W=L.items,F=null,U=null,!(B=void 0===W?[]:W).length){c.next=50;break}return H=Object(p.normalize)("products",B),G=H.entities,K=H.result,c.next=46,Object(u.put)(Object(p.updateEntities)({entities:G}));case 46:F={currentPage:D,perPage:N,total:A,hasMore:B.length>=N},U=r?K:v.concat(K),c.next=52;break;case 50:F={currentPage:D,perPage:N,total:A,hasMore:!1},U=v;case 52:return c.next=54,Object(u.put)(_({shopId:n,pagination:F,result:U}));case 54:if(!d){c.next=59;break}return c.next=57,Object(u.put)(w({status:O}));case 57:c.next=61;break;case 59:return c.next=61,Object(u.put)(I({status:O}));case 61:c.next=77;break;case 63:if(c.prev=63,c.t0=c.catch(5),!r){c.next=68;break}return c.next=68,Object(u.put)(_({shopId:n,pagination:{currentPage:0,perPage:b,hasMore:!0},result:[]}));case 68:if(!d){c.next=73;break}return c.next=71,Object(u.put)(w({status:r?R:k}));case 71:c.next=75;break;case 73:return c.next=75,Object(u.put)(I({status:r?R:k}));case 75:if(!s){c.next=77;break}throw c.t0;case 77:case"end":return c.stop()}}),g,null,[[5,63]])}function L(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.takeEvery)(M,q);case 2:return e.next=4,Object(u.takeEvery)(x,D);case 4:case"end":return e.stop()}}),y)}t.a=(a={},o()(a,_,(function(e,t){var n=t.payload,a=n.shopId,r=n.pagination,s=n.result;return v(v({},e),{},{fetchResult:v(v({},e.fetchResult),{},o()({},a,{pagination:r,result:s}))})})),o()(a,w,(function(e,t){var n=t.payload.status;return v(v({},e),{},{myShopSearchStatus:n})})),o()(a,I,(function(e,t){var n=t.payload.status;return v(v({},e),{},{otherShopSearchStatus:n})})),o()(a,j,(function(e,t){var n=t.payload.status;return v(v({},e),{},{allShopSearchStatus:n})})),o()(a,T,(function(e,t){var n=t.payload.keyword;return v(v({},e),{},{myShopSearchKeyword:n})})),o()(a,P,(function(e,t){var n=t.payload.keyword;return v(v({},e),{},{otherShopSearchKeyword:n})})),o()(a,N,(function(e,t){var n=t.payload.selectedTab;return v(v({},e),{},{selectedProductTab:n})})),a)},XftY:function(e,t,n){"use strict";(function(e){n("I5cv");var a=n("lwsE"),r=n.n(a),o=n("W8MJ"),s=n.n(o),c=n("PJYZ"),i=n.n(c),u=n("7W2i"),l=n.n(u),d=n("a1gu"),p=n.n(d),h=n("Nsbk"),f=n.n(h),v=(n("2Spj"),n("L9s1"),n("Z2Ku"),n("KKXr"),n("f3/d"),n("q1tI")),m=n.n(v),g=n("o1Ud"),y=n.n(g),b=n("tIYL"),S=n.n(b),R=n("17x9"),E=n.n(R),O=n("4j81"),k=n("XnKn"),C=n("h4gR"),M=n("8Kyb"),_=n.n(M);function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var I=k.ProductStatus.DELETED,j=k.ProductStatus.BANNED,T=k.ProductStatus.NORMAL,P=k.ProductStatus.SOLD_OUT,N=[I,j,P],x=function(t){l()(a,t);var n=w(a);function a(e){var t;return r()(this,a),(t=n.call(this,e)).renderProductImage=t.renderProductImage.bind(i()(t)),t.renderProductPrice=t.renderProductPrice.bind(i()(t)),t}return s()(a,[{key:"renderProductStatus",value:function(t){var n=t.status,a=void 0===n?"normal":n,r=t.stock,o=void 0===r?0:r,s=k.ProductStatusTextMap[a],c=null,i="".concat(y.a.status," ");return c=a===T?e(s,{productStock:o}):e(s),i+="".concat(a===T||a===I?y.a[a]:y.a.invalid),m.a.createElement("div",{className:i,title:c},c)}},{key:"renderProductImage",value:function(e,t,n){var a=n.status,r=void 0===a?"normal":a,o=n.image_hash,s="source"===e&&N.includes(r);return m.a.createElement("div",{className:S.a.image},m.a.createElement(O.Image,{src:t,hash:o}),m.a.createElement("div",{className:S.a.imageBorder}),s&&m.a.createElement("div",{className:S.a.invalid},m.a.createElement(C.Icon,{svg:_.a,className:S.a.invalidIcon})))}},{key:"renderProductPrice",value:function(e){var t=e.split("-");if(2===t.length){var n=null;return e.length<=23?n=y.a.priceTextSmall:e.length>23&&(n=y.a.priceTextMini),m.a.createElement("div",{className:n},m.a.createElement("span",{className:y.a.inlineBlock},t[0])," - ",m.a.createElement("span",{className:y.a.inlineBlock},t[1]))}return m.a.createElement("span",null,e)}},{key:"render",value:function(){var e=this.props,t=e.category,n=e.image,a=e.name,r=e.price,o=e.extraProps,s=(o||{}).originPrice,c=this.renderProductStatus(o),i=this.renderProductImage(t,n,o);return m.a.createElement("div",{className:S.a.detailBlock},i,m.a.createElement("div",{className:S.a.content},m.a.createElement("div",{className:S.a.productName,title:a},a),"source"===t?m.a.createElement("div",{className:"".concat(S.a.productDetail," ").concat(s?y.a.origin:"")},s&&m.a.createElement("div",{title:s,className:y.a.originalPrice},s),m.a.createElement("div",{className:y.a.price,title:r},r),m.a.createElement("div",{className:S.a.divider}),c):m.a.createElement("div",{className:y.a.rangePrice},this.renderProductPrice(r))))}}]),a}(m.a.PureComponent);x.propTypes={category:E.a.string.isRequired,image:E.a.string,name:E.a.string,price:E.a.string,extraProps:E.a.object.isRequired},t.a=x}).call(this,n("kiXb").t)},Z58h:function(e,t,n){"use strict";n("I5cv"),n("RW0V"),n("ioFf"),n("0l/t"),n("mYba"),n("8+KV"),n("jm62"),n("WLL4"),n("HAE/");var a=n("pVnL"),r=n.n(a),o=n("QILm"),s=n.n(o),c=n("lSNA"),i=n.n(c),u=n("lwsE"),l=n.n(u),d=n("W8MJ"),p=n.n(d),h=n("PJYZ"),f=n.n(h),v=n("7W2i"),m=n.n(v),g=n("a1gu"),y=n.n(g),b=n("Nsbk"),S=n.n(b),R=(n("2Spj"),n("q1tI")),E=n.n(R),O=n("17x9"),k=n.n(O),C=n("/MKj"),M=(n("KKXr"),n("L9s1"),n("Z2Ku"),n("szol")),_=n("furG"),w=n("HSHk"),I=n("Mqqo"),j=n("4j81"),T=n("XnKn"),P=n("nles"),N=n.n(P),x=T.MessageTypes.MSG_TYPE_WEBVIEW,D=T.MessageTypes.MSG_TYPE_RATE_CARDS,q=T.MessageTypes.MSG_TYPE_VOUCHER_WEB,L={},A={},W=function(e){var t=e.isScChat,n=e.currentConversation,a=e.currentUser,r=(e.currentUserShopId,e.isSubAccount),o=e.currentBuyer,s=e.messageList,c=e.visitShopSellerCenterRequested,i=e.visitMallRequested,u=e.changeTranslateStatus,l=e.populateMessageRequested,d=(e.fillCloseReasonFromAutoCloseConversation,e.closeReasonStatus,e.messageHttpStatus),p=e.fetchFaqMessagesRequested,h=e.sourceId,f=n.shop_id,v=n.to_id,m=function(){};return E.a.createElement("div",{className:N.a.list},E.a.createElement(M.a,{style:{backgroundColor:"#fff"},makeItem:function(e,s){if(e&&e.content){var d=e.type,h=e.fetchStatus,f=void 0===h?"":h,g=e.content,y=void 0===g?{}:g,b=e.to_id,S=e.from_user_name,R=e.created_timestamp,O=b===v,k=Object(T.customizeTime)(1e3*R),C=Object(_.a)(d);if(e.type===x){var M=y.type;M===q||y.url&&y.url.includes("voucher")?(C=w.a,e.textContent=e.content):M===D&&b===a.id&&(C=I.a)}return(E.a.createElement("div",{key:e.id,className:N.a.baseMessage},function(e,t,n){var a=[E.a.createElement("span",{className:N.a.username},e),E.a.createElement("span",{className:N.a.split}),E.a.createElement("span",{className:N.a.stamp},t)],r="".concat(N.a.header," ").concat(n?N.a.right:"");return E.a.createElement("div",{className:r},n?a.reverse():a)}(S,k,O),f.includes("Card")?E.a.createElement(j.Processor,{type:"loading",messageType:d,content:y}):E.a.createElement(C,{className:N.a.message,index:s,message:e,measure:m,isScChat:t,imgCache:L,currentUser:a,currentBuyer:o,isSubAccount:r,conversation:n,visitMallRequested:i,replyOfferRequested:m,hasSourceMessageMap:A,changeTranslateStatus:u,resendMessageRequested:m,populateMessageRequested:l,translateMessagesRequested:m,visitShopSellerCenterRequested:c,claimVoucherRequested:m,evaluationRequested:m,sendMessagesRequested:m,fetchFaqMessagesRequested:p})))}},listData:s,status:d,onLoadMore:function(){return p({sourceId:h,shopId:f})},onRefresh:function(){return p({sourceId:h,shopId:f,reset:!s.length})}}))};W.propTypes={isScChat:k.a.bool,currentConversation:k.a.object,currentUser:k.a.object,currentUserShopId:k.a.number,isSubAccount:k.a.bool,currentBuyer:k.a.object,messageList:k.a.array,visitShopSellerCenterRequested:k.a.func,visitMallRequested:k.a.func,changeTranslateStatus:k.a.func,populateMessageRequested:k.a.func,fillCloseReasonFromAutoCloseConversation:k.a.func,closeReasonStatus:k.a.string,messageHttpStatus:k.a.string,fetchFaqMessagesRequested:k.a.func,sourceId:k.a.string};var B=W,F=n("tvxL"),U=n("empP"),H=["fetchMessagesRequested"];function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=S()(e);if(t){var r=S()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return y()(this,n)}}var Y=function(e){m()(n,e);var t=V(n);function n(e){var a;return l()(this,n),(a=t.call(this,e)).fetchRequested=a.fetchRequested.bind(f()(a)),a}return p()(n,[{key:"fetchRequested",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.needReset,n=void 0!==t&&t,a=this.props,r=a.messageList,o=a.currentConversation,s=a.fetchMessagesRequested,c={conversation:o};if(n)c.read=!0,c.reset=!0;else if(!r.length)return;s(K({},c))}},{key:"render",value:function(){var e=this.props,t=(e.fetchMessagesRequested,s()(e,H));return(E.a.createElement(B,r()({},t,{fetchRequested:this.fetchRequested})))}}]),n}(E.a.PureComponent),X={visitMallRequested:U.a,updateTranslateTips:F.updateTranslateTips,replyOfferRequested:F.replyOfferRequested,changeTranslateStatus:F.changeTranslateStatus,markMessagesRequested:F.markMessagesRequested,fetchMessagesRequested:F.fetchMessagesRequested,resendMessageRequested:F.resendMessageRequested,populateMessageRequested:F.populateMessageRequested,translateMessagesRequested:F.translateMessagesRequested,setCurrentConversationCanRead:F.setCurrentConversationCanRead,visitShopSellerCenterRequested:U.b,claimVoucherRequested:F.claimVoucherRequested,evaluationRequested:F.evaluationRequested,fetchFaqMessagesRequested:F.fetchFaqMessagesRequested};Y.propTypes={messageList:k.a.array,messageHttpStatus:k.a.string,currentConversation:k.a.object,fetchMessagesRequested:k.a.func};t.a=Object(C.b)((function(e){return{isScChat:Object(F.isScChatSelector)(e),translateTips:Object(F.tipsSelector)(e),hasMoreOlderMessage:Object(F.hasMoreOlderMessageSelector)(e),autoTranslation:Object(F.autoTranslation)(e),isSubAccount:Object(F.isSubAccountSelector)(e),messageList:Object(F.faqHistoryMessagesSelector)(e),currentUser:Object(F.currentUserSelector)(e),currentBuyer:Object(F.currentBuyerSelector)(e)||{},showChatWindow:Object(F.showChatWindowSelector)(e),unreadMessageIds:Object(F.unreadMessageIdsSelector)(e),currentUserShopId:Object(F.currentUserShopIdSelector)(e),messageHttpStatus:Object(F.httpStatusSelector)(e),showConversationDetail:Object(F.showConversationDetailSelector)(e),currentConversation:Object(F.currentConversationSelector)(e),sourceId:Object(F.faqIdSelector)(e)}}),X)(Y)},axYV:function(e,t,n){"use strict";n("I5cv"),n("RW0V"),n("ioFf"),n("0l/t"),n("mYba"),n("8+KV"),n("jm62"),n("WLL4"),n("HAE/");var a=n("lSNA"),r=n.n(a),o=n("lwsE"),s=n.n(o),c=n("W8MJ"),i=n.n(c),u=n("7W2i"),l=n.n(u),d=n("a1gu"),p=n.n(d),h=n("Nsbk"),f=n.n(h),v=n("q1tI"),m=n.n(v),g=n("/MKj"),y=n("QILm"),b=n.n(y),S=n("17x9"),R=n.n(S),E=n("MoVb"),O=n.n(E),k=n("9rZX"),C=n.n(k),M=n("KmjB"),_=n("c2PT"),w=n.n(_);function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var j=function(e){l()(n,e);var t=I(n);function n(){return s()(this,n),t.apply(this,arguments)}return i()(n,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.additions,a=n.content,r=n.contentStyle,o=n.modalStyle,s=e.closeModal,c=e.actions,i=c.confirm,u=c.cancel,l=t&&Object(M.h)(t),d=a&&Object(M.h)(a),p=u&&Object(M.h)(u.label),h=i&&Object(M.h)(i.label),f="".concat(w.a.content," ").concat(l?"":w.a.noTitle);return m.a.createElement("div",{className:w.a.root,style:o,onClick:function(e){return e.stopPropagation()}},l&&m.a.createElement("div",{className:w.a.title},l),d&&m.a.createElement("div",{className:f,style:r},d),m.a.createElement("div",{className:w.a.actions},Object(M.b)(u)&&m.a.createElement("div",{className:w.a.cancel,onClick:u.handler},p),Object(M.b)(i)&&m.a.createElement("div",{className:w.a.confirm,onClick:i.handler||s},h)))}}]),n}(m.a.PureComponent);j.propTypes={title:R.a.oneOfType([R.a.string,R.a.object]),additions:R.a.object,closeModal:R.a.func,actions:R.a.shape({confirm:R.a.oneOfType([R.a.string,R.a.object]),cancel:R.a.oneOfType([R.a.string,R.a.object])})};var T=j,P=n("PJYZ"),N=n.n(P),x=(n("2Spj"),n("vJsM")),D=n.n(x),q=n("A5hp"),L=n("me8L"),A=n.n(L),W=(n("I78e"),n("2WOU")),B=n.n(W),F=["onClick","text","style"];function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var H=function(e){l()(n,e);var t=U(n);function n(e){var a;return s()(this,n),(a=t.call(this,e)).getRenderClass=a.getRenderClass.bind(N()(a)),a.uppercaseFirstLetter=a.uppercaseFirstLetter.bind(N()(a)),a}return i()(n,[{key:"uppercaseFirstLetter",value:function(e){return"".concat(e[0].toUpperCase()).concat(e.slice(1))}},{key:"getRenderClass",value:function(e){var t=e.size,n=e.shape,a=e.theme,r=e.disabled,o=e.rounded,s=e.noHoverChange,c="default"!==t?B.a["size".concat(this.uppercaseFirstLetter(t))]:"",i="default"!==a?B.a["theme".concat(this.uppercaseFirstLetter(a))]:"",u="default"!==n?B.a["shape".concat(this.uppercaseFirstLetter(n))]:"",l=o?B.a.buttonRounded:"",d=r?B.a.disabled:"",p=s?B.a.btn:B.a.shopeeBtn;return"".concat(p," ").concat(c," ").concat(i," ").concat(u," ").concat(l," ").concat(d)}},{key:"render",value:function(){var e=this.props,t=e.onClick,n=e.text,a=e.style,r=b()(e,F),o=this.getRenderClass(r),s=r.disabled;return m.a.createElement("button",{style:a,disabled:s,className:o,onClick:t},n)}}]),n}(m.a.PureComponent);H.propTypes={text:R.a.string,style:R.a.object,size:R.a.string.isRequired,theme:R.a.string.isRequired,disabled:R.a.bool.isRequired,rounded:R.a.bool.isRequired,onClick:R.a.func.isRequired,shape:R.a.string.isRequired,noHoverChange:R.a.bool.isRequired},H.defaultProps={size:"default",shape:"default",theme:"default",disabled:!1,rounded:!1,noHoverChange:!1,style:{}};var G=H;function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var V=function(e){l()(n,e);var t=K(n);function n(){return s()(this,n),t.apply(this,arguments)}return i()(n,[{key:"render",value:function(){var e=this.props,t=e.size,n=e.cancelOption,a=e.confirmOption,r=e.handleClick,o=e.disabled,s=n.label,c=n.theme,i=void 0===c?"default":c,u=n.shape,l=void 0===u?"frameless":u,d=a.label,p=a.theme,h=void 0===p?"primary":p,f=a.shape,v=void 0===f?"default":f,g=Object(M.h)(s),y=Object(M.h)(d);return m.a.createElement("div",{className:A.a.root},m.a.createElement(G,{size:t,theme:i,onClick:function(){return r("cancel")},shape:l,text:g}),m.a.createElement(G,{size:t,theme:h,onClick:function(){return r("confirm")},shape:v,text:y,disabled:o}))}}]),n}(m.a.PureComponent);V.propTypes={size:R.a.string,cancelOption:R.a.object,confirmOption:R.a.object,handleClick:R.a.func,disabled:R.a.bool},V.defaultProps={size:"large"};var Y=V,X=n("XnKn");function J(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var z=function(e){l()(n,e);var t=J(n);function n(e){var a;return s()(this,n),(a=t.call(this,e)).handleClick=a.handleClick.bind(N()(a)),a.getContentRef=a.getContentRef.bind(N()(a)),a.handleClickNotices=a.handleClickNotices.bind(N()(a)),a}return i()(n,[{key:"handleClick",value:function(e){var t=this.props.actions,n=t.cancel,a=t.confirm;if("cancel"===e){var r=n.handler;r&&r()}else{var o=a.handler;o&&o()}}},{key:"getContentRef",value:function(e){e&&(this.contentRef=e)}},{key:"componentDidMount",value:function(){if(this.contentRef){var e=this.contentRef.firstElementChild;e&&(e.className=D.a.policy,e.addEventListener("click",this.handleClickNotices))}}},{key:"componentWillUnmount",value:function(){if(this.contentRef){var e=this.contentRef.firstElementChild;e&&(e.className=D.a.policy,e.removeEventListener("click",this.handleClickNotices))}}},{key:"handleClickNotices",value:function(){var e=this.props.additions.region;window.open("".concat(X.cancelOrderPolicy[e]))}},{key:"render",value:function(){var e=this.props,t=e.title,n=e.additions.content,a=e.closeModal,r=e.actions,o=r.cancel,s=r.confirm,c=Object(M.h)(t),i=Object(M.h)(n);return m.a.createElement("div",{className:D.a.root},m.a.createElement(q.a,{title:c,closeModal:a,noCancel:!0}),m.a.createElement("div",{className:D.a.content,ref:this.getContentRef,dangerouslySetInnerHTML:{__html:i}}),m.a.createElement(Y,{size:"custome",cancelOption:o,confirmOption:s,handleClick:this.handleClick}))}}]),n}(m.a.PureComponent);z.propTypes={title:R.a.oneOfType([R.a.string,R.a.object]),additions:R.a.object,closeModal:R.a.func,actions:R.a.object};var Z=z,Q=n("L4yU"),$=["type"],ee=["show","closeable"];function te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var ne=function(e){l()(n,e);var t=te(n);function n(){return s()(this,n),t.apply(this,arguments)}return i()(n,[{key:"render",value:function(){var e=this.props,t=e.type,n=b()(e,$);switch(t){case"CONFIRM_MODAL":return m.a.createElement(T,n);case"Cancel_ORDER_WARNING_MODAL":return m.a.createElement(Z,n);case"FAQ_MODAL":return m.a.createElement(Q.a,n);default:return null}}}]),n}(m.a.PureComponent);ne.propTypes={type:R.a.string.isRequired};var ae=function(e){l()(n,e);var t=te(n);function n(){return s()(this,n),t.apply(this,arguments)}return i()(n,[{key:"componentDidMount",value:function(){var e=window.miniChatContainerId;C.a.setAppElement("#".concat(e))}},{key:"render",value:function(){var e=this.props,t=e.show,n=e.closeable,a=b()(e,ee),r=window.miniChatContainerId;return m.a.createElement(C.a,{isOpen:t,onRequestClose:n?a.closeModal:void 0,parentSelector:function(){return document.querySelector("#".concat(r))},overlayClassName:O.a.overlay,className:O.a.content,shouldReturnFocusAfterClose:!1},m.a.createElement(ne,a))}}]),n}(m.a.PureComponent);ae.propTypes={show:R.a.bool,closeable:R.a.bool};var re=ae,oe=n("tvxL");function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var ue=function(e){l()(n,e);var t=ie(n);function n(){return s()(this,n),t.apply(this,arguments)}return i()(n,[{key:"render",value:function(){return m.a.createElement(re,this.props)}}]),n}(m.a.PureComponent),le={closeModal:oe.closeModal,updateCurrentFaqId:oe.updateCurrentFaqId};t.a=Object(g.b)((function(e){var t=e.modalReducer,n=e.notificationReducer;return ce(ce({},t),n)}),le)(ue)},azN6:function(e,t,n){"use strict";n("KKXr");var a=n("q1tI"),r=n.n(a),o=n("17x9"),s=n.n(o),c=n("a1tu"),i=n.n(c);function u(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(r.a.createElement("div",{className:i.a.time},r.a.createElement("div",{className:i.a.count},e),t&&r.a.createElement("div",{className:i.a.split},":")))}function l(e){var t=e.day,n=e.hour,a=e.minute,o=e.second;return(r.a.createElement("div",{className:i.a.countTime},!!t&&u(t),u(n),u(a),u(o,!1)))}l.propTypes={hour:s.a.node,minute:s.a.node,second:s.a.node,day:s.a.node},t.a=l},cOd3:function(e,t,n){"use strict";n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return d})),n.d(t,"f",(function(){return p})),n.d(t,"e",(function(){return h}));var a=n("XiPH"),r=n("peh1"),o=n("tvxL"),s={currentPage:0,perPage:20,total:0,hasMore:!0},c=function(e){return e.orderReducer.status},i=function(e){return e.orderReducer.fetchMyOrdersStatus},u=function(e){return e.orderReducer.fetchHisOrdersStatus},l=function(e){return e.orderReducer.fetchResult},d=function(e,t){return Object(r.createSelector)(l,(function(n){var a=n["".concat(e,"_").concat(t)];return a||{pagination:s,result:[]}}))},p=Object(r.createSelector)(l,o.currentShopIdSelector,o.currentBuyerIdSelector,o.entitiesSelector,(function(e,t,n,r){var s=e["".concat(t,"_").concat(n)];if(!s)return[];var c=s.result||[];return Object(a.denormalize)(c,[o.orderSchema],r)})),h=Object(r.createSelector)(l,o.currentBuyerShopIdSelector,o.currentBuyerIdSelector,o.entitiesSelector,(function(e,t,n,r){var s=e["".concat(t,"_").concat(n)];if(!s)return[];var c=s.result||[];return Object(a.denormalize)(c,[o.orderSchema],r)}))},czRn:function(e,t,n){"use strict";(function(e){n("I5cv");var a=n("lwsE"),r=n.n(a),o=n("W8MJ"),s=n.n(o),c=n("7W2i"),i=n.n(c),u=n("a1gu"),l=n.n(u),d=n("Nsbk"),p=n.n(d),h=n("q1tI"),f=n.n(h),v=n("17x9"),m=n.n(v),g=n("tvxL"),y=n("cQeI"),b=n.n(y);function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return l()(this,n)}}var R=function(t){i()(a,t);var n=S(a);function a(){return r()(this,a),n.apply(this,arguments)}return s()(a,[{key:"render",value:function(){var t=this.props,n=t.changeConversationStatusRequested,a=t.conversationId,r=t.shopId;return(f.a.createElement("div",{className:b.a.root},f.a.createElement("div",{className:b.a.restartButton,onClick:function(){Object(g.tracker)({shopId:r,section:"conversation_window",type:"restart_conversation"}),n({shopId:r,conversationId:a,status:"activated"})}},e("conversation.restart_conversation"))))}}]),a}(f.a.PureComponent);R.propTypes={shopId:m.a.number,conversationId:m.a.string,changeConversationStatusRequested:m.a.func.isRequired},t.a=R}).call(this,n("kiXb").t)},dYmL:function(e,t,n){"use strict";n("I5cv");var a=n("lwsE"),r=n.n(a),o=n("W8MJ"),s=n.n(o),c=n("7W2i"),i=n.n(c),u=n("a1gu"),l=n.n(u),d=n("Nsbk"),p=n.n(d),h=n("q1tI"),f=n.n(h),v=n("/MKj"),m=n("tvxL"),g=n("k3Bb");function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return l()(this,n)}}var b=function(e){i()(n,e);var t=y(n);function n(){return r()(this,n),t.apply(this,arguments)}return s()(n,[{key:"render",value:function(){return f.a.createElement(g.a,this.props)}}]),n}(f.a.PureComponent),S={fetchMessageShortcutsGroupRequested:m.fetchMessageShortcutsGroupRequested,setCurrentGroupType:m.setCurrentGroupType,setCurrentGroupId:m.setCurrentGroupId};t.a=Object(v.b)((function(e){return{currentConversation:Object(m.currentConversationSelector)(e),isSubAccount:Object(m.isSubAccountSelector)(e),messageShortcutHttpStatus:Object(m.messageShortcutGroupHttpStatusSelector)(e),currentGroupId:Object(m.currentGroupIdSelector)(e),currentGroupType:Object(m.currentGroupTypeSelector)(e),currentUserRole:Object(m.currentUserRoleSelector)(e),messageShortcuts:Object(m.messageShortcutsSelector)(e),messageShortcutGroupContent:Object(m.messageShortcutGroupContentSelector)(e)}}),S)(b)},dm17:function(e,t,n){"use strict";n("I5cv");var a=n("lwsE"),r=n.n(a),o=n("W8MJ"),s=n.n(o),c=n("PJYZ"),i=n.n(c),u=n("7W2i"),l=n.n(u),d=n("a1gu"),p=n.n(d),h=n("Nsbk"),f=n.n(h),v=(n("2Spj"),n("f3/d"),n("q1tI")),m=n.n(v),g=n("17x9"),y=n.n(g),b=n("m2L4"),S=n.n(b),R=n("4j81"),E=n("h4gR"),O=n("8Kyb"),k=n.n(O),C=n("51da"),M=n.n(C);function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var w=function(e){l()(n,e);var t=_(n);function n(e){var a;return r()(this,n),(a=t.call(this,e)).renderProductImage=a.renderProductImage.bind(i()(a)),a.handleOnClick=a.handleOnClick.bind(i()(a)),a}return s()(n,[{key:"renderProductImage",value:function(e,t,n){return m.a.createElement("div",{className:M.a.image},m.a.createElement(R.Image,{src:e,hash:n}),m.a.createElement("div",{className:M.a.imageBorder}),t&&m.a.createElement("div",{className:M.a.invalid},m.a.createElement(E.Icon,{svg:k.a,className:M.a.invalidIcon})))}},{key:"handleOnClick",value:function(){window.open(this.props.url),this.props.trackItem(this.props.id)}},{key:"render",value:function(){var e=this.props,t=e.image,n=e.imageHash,a=e.name,r=e.price,o=e.inValid,s=e.status,c=this.renderProductImage(t,o,n);return m.a.createElement("div",{className:M.a.detailBlock,onClick:this.handleOnClick},c,m.a.createElement("div",{className:M.a.content},m.a.createElement("div",{className:M.a.name,title:a},m.a.createElement(S.a,{tagName:"span",className:M.a.dot,clamp:1},a)),m.a.createElement("div",{className:M.a.priceDetail},m.a.createElement("div",{className:M.a.price,title:r},r),s&&m.a.createElement("div",{className:M.a.divider}),s&&m.a.createElement("div",{className:M.a.invalidBrand},s))))}}]),n}(m.a.PureComponent);w.propTypes={image:y.a.string,imageHash:y.a.string,name:y.a.string,price:y.a.node,inValid:y.a.bool,url:y.a.string,status:y.a.node,trackItem:y.a.func.isRequired,id:y.a.number.isRequired},t.a=w},empP:function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return v})),n.d(t,"c",(function(){return y}));var a=n("o0o1"),r=n.n(a),o=(n("KKXr"),n("L9s1"),n("Z2Ku"),n("dRSK"),n("9VmF"),n("FH7K")),s=n("5rFJ"),c=n("jtha"),i=n("tvxL"),u=n("XnKn"),l=r.a.mark(m),d=r.a.mark(g),p=r.a.mark(y),h=Object(o.a)({VISIT_SHOP_SELLER_CENTER_REQUESTED:function(e){return{url:e.url,shopId:e.shopId,orderId:e.orderId,itemId:e.itemId}},VISIT_SHOP_SELLER_CENTER_FAILED:function(e){return{error:e.error}},VISIT_MALL_REQUESTED:function(e){return{shopId:e.shopId,country:e.country}}}),f=h.visitShopSellerCenterRequested,v=h.visitMallRequested;function m(e){var t,n,a,o,d,p,h,f,v,m,g,y,b,S,R,E,O,k,C,M,_,w,I,j,T,P,N;return r.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,n=t.url,a=t.shopId,o=t.orderId,d=t.itemId,r.prev=1,r.next=4,Object(s.call)(c.a,{resource:"shop",id:a,suffix:"sc"});case 4:if(p=r.sent,h=p.sc_url,!p.upgraded){r.next=12;break}return f=window.open(),v=Object(u.getCNSCSellerCenterUrl)(),n?((m=n.split("/"))[2]=v,g=m.join("/"),f.location=g.includes("?")?"".concat(g,"&cnsc_shop_id=").concat(a):"".concat(g,"?cnsc_shop_id=").concat(a)):f.location=o?"https://".concat(v,"/portal/sale/").concat(o,"?cnsc_shop_id=").concat(a):d?"https://".concat(v,"/portal/product/").concat(d,"?cnsc_shop_id=").concat(a):"https://".concat(v,"?cnsc_shop_id=").concat(a),r.abrupt("return");case 12:if(!h){r.next=26;break}if(y=h.split("?"),b=y[1].split("&").find((function(e){return e.startsWith("sig=")})),S=b.substring(4),R=y[0].split("."),E=R[R.length-1],O=Object(u.isVisitingCNSC)()?Object(u.getShopeeCNUrl)("seller",E):Object(u.getSellerCenterUrl)(E),k=window.open(),!n){r.next=23;break}return k.location=n.includes("?")?"".concat(n,"&sig=").concat(S):"".concat(n,"?sig=").concat(S),r.abrupt("return");case 23:o||d?o?(C="https://".concat(O,"/portal/sale/").concat(o,"?sig=").concat(S),k.location=C):d&&(M="https://".concat(O,"/portal/product/").concat(d,"?sig=").concat(S),k.location=M):(_="https://".concat(O,"?sig=").concat(S),k.location=_),r.next=29;break;case 26:return w=Object(i.getToastInformation)(!1,{type:"permission-denied"}),r.next=29,Object(s.put)(Object(i.setToastInformation)({toast:w}));case 29:r.next=41;break;case 31:return r.prev=31,r.t0=r.catch(1),r.next=35,Object(s.select)((function(e){return e.entityReducer}));case 35:I=r.sent,j=I.shops,T=j[a],P="https://".concat(Object(u.getSellerCenterUrl)(T.country),"/portal/"),N=o?"sale/".concat(o):d?"product/".concat(d):"",window.open(P+N);case 41:case"end":return r.stop()}}),l,null,[[1,31]])}function g(e){var t,n,a,o;return r.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:t=e.payload,n=t.shopId,a=t.country,o="https://".concat(Object(u.getMallUrl)(a),"/shop/").concat(n),window.open(o);case 3:case"end":return r.stop()}}),d)}function y(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(s.takeEvery)(f,m);case 2:return e.next=4,Object(s.takeEvery)(v,g);case 4:case"end":return e.stop()}}),p)}},fRyB:function(e,t,n){"use strict";(function(e){n("I5cv");var a=n("lwsE"),r=n.n(a),o=n("W8MJ"),s=n.n(o),c=n("7W2i"),i=n.n(c),u=n("a1gu"),l=n.n(u),d=n("Nsbk"),p=n.n(d),h=n("q1tI"),f=n.n(h),v=n("17x9"),m=n.n(v),g=n("ags8"),y=n.n(g);function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return l()(this,n)}}var S=function(t){i()(a,t);var n=b(a);function a(){return r()(this,a),n.apply(this,arguments)}return s()(a,[{key:"render",value:function(){var t=this.props,n=t.buyerName,a=t.isAbnormal;return(f.a.createElement("div",{className:y.a.root},a?e("conversation_detail.input_field.blocked_abnormal_user"):e("conversation_detail.input_field.blocked_abnormal_user",{username:n})))}}]),a}(h.PureComponent);S.propTypes={buyerName:m.a.string,isAbnormal:m.a.bool},t.a=S}).call(this,n("kiXb").t)},furG:function(e,t,n){"use strict";var a=n("lSNA"),r=n.n(a),o=n("XnKn"),s=n("pVnL"),c=n.n(s),i=n("q1tI"),u=n.n(i),l=n("17x9"),d=n.n(l),p=n("+iqz"),h=n("4j81"),f=n("/MKj"),v=n("tvxL"),m=function(e){var t=e.isScChat,n=e.content,a=e.isSend,r=e.isSubAccount,o=e.conversation,s=e.autoTranslation,i=e.send_status,l=e.message_option,d=e.shopTranslationSettings;if(!n.text)return null;var p=o||{},f=p.to_id,v=p.shop_id,m=p.translationAccess,g=p.auto_translation,y=(n||{}).translation,b=(y=void 0===y?{}:y).text,S=d[v]||{},R=S.translationPreference,E=S.autoTranslationStatus,O=S.source,k="enabled"===(E||s),C=t?r?E?"enabled"===E:g:k:a?k:k||m&&!!b;return u.a.createElement(h.TextMessage,c()({buyerId:f,shopId:v,sendStatus:i,messageOption:l,enableTranslation:C,translationPreference:R,translationSource:O},e))},g={handleSensitiveUrl:v.handleSensitiveUrl,changeTranslateStatus:v.changeTranslateStatus,translateMessagesRequested:v.translateMessagesRequested};m.propTypes={isSend:d.a.bool,isScChat:d.a.bool,content:d.a.object,isSubAccount:d.a.bool,conversation:d.a.object,send_status:d.a.number,message_option:d.a.number,autoTranslation:d.a.string,shopTranslationSettings:d.a.object};var y=Object(p.a)(Object(f.b)((function(e){return{autoTranslation:Object(v.autoTranslation)(e),shopTranslationSettings:Object(v.shopTranslationSettingsSelector)(e)}}),g)(m)),b=h.ImageMessage,S=Object(p.a)(b),R={showMediaPreviewModalRequested:v.showMediaPreviewModalRequested},E=Object(f.b)((function(e,t){return{}}),R)((function(e){return u.a.createElement(S,e)})),O=function(e){var t=e.id,n=e.type,a=e.isSend,r=e.content,s=e.country,c=e.measure,i=e.isSubAccount,l=e.textContent,d=void 0===l?{}:l,p=e.handleReload,f=e.conversation,m=void 0===f?{}:f,g=e.replyOfferRequested,y=m.status,b=m.shop_id;return u.a.createElement(h.OfferMessage,{id:t,type:n,isSend:a,country:s,measure:c,onReply:function(e){Object(v.tracker)({shopId:b,section:"conversation_window",type:e.isAccept?"accept_offer":"reject_offer",data:{itemid:d.id}}),g(e)},priceBeforeTax:r.price_before_tax,taxValue:r.tax_value,textContent:d,handleReload:p,onClickDetail:function(){var e=r.shop_id,t=r.product_id;window.open("https://".concat(i?Object(o.getMallUrl)(s):Object(o.getMallUrl)(),"/product/").concat(e,"/").concat(t,"/"))},conversationClosed:"closed"===y,isFromSelf:b!==r.shop_id})};O.propTypes={id:d.a.string,type:d.a.string,isSend:d.a.bool,measure:d.a.func,country:d.a.string,content:d.a.object,textContent:d.a.object,isSubAccount:d.a.bool,handleReload:d.a.func,conversation:d.a.object,replyOfferRequested:d.a.func};var k=Object(p.a)(O),C={replyOfferRequested:v.replyOfferRequested},M=Object(f.b)((function(){return{}}),C)((function(e){return u.a.createElement(k,e)})),_=(n("f3/d"),function(e){var t=e.isScChat,n=e.country,a=e.textContent,r=void 0===a?{}:a,s=e.isSubAccount,c=e.handleReload,i=e.conversation,l=i.hasViewProductAccess,d=i.shop_id,p=e.visitShopSellerCenterRequested,f=e.isSend,v=e.currentUser,m=e.track,g=r.id,y=r.shop_id,b=r.name,S=r.actual_price_string,R=r.image,E=r.image_hash,O=v&&"subaccount"!==v.type?y===v.shop_id:y===d,k=!s||!O||t,C=k?"https://".concat(Object(o.getMallUrl)(n),"/product/").concat(y,"/").concat(g,"/"):"https://".concat(Object(o.getSellerCenterUrl)(Object(o.isVisitingCNSC)()?"cn":n),"/portal/product/").concat(g);return u.a.createElement(h.ProductMessage,{name:b,price:S,image:R,imageHash:E,isSend:f,failed:!g||!S,hasAccess:l||k,handleReload:c,handleClick:function(){m("product_items","click",{itemid:g}),k?window.open(C):Object(o.viewLinkWithAccess)(l,(function(){return p({shopId:y,itemId:g})}))}})});_.propTypes={isSend:d.a.bool,country:d.a.string,textContent:d.a.object,visitShopSellerCenterRequested:d.a.func,isSubAccount:d.a.bool,handleReload:d.a.func,conversation:d.a.object,currentUser:d.a.object,isScChat:d.a.bool,track:d.a.func};var w=Object(p.a)(_),I=n("empP"),j=function(e){var t=e.isSubAccount,n=e.conversation,a=e.currentUser,r=e.content,o=n||{},s=o.shop,i=o.hasViewOrderAccess,l=o.shop_id,d=(s?s.country:"SG").toLowerCase(),p=(r||{}).shop_id,f=(a||{}).shop_id,v=t?p===l:p===f;return u.a.createElement(h.OrderMessage,c()({region:d,isOwnOrder:v,hasViewOrderAccess:i},e))},T={visitShopSellerCenterRequested:I.b};j.propTypes={content:d.a.object,isSubAccount:d.a.bool,conversation:d.a.object,currentUser:d.a.object};var P=Object(p.a)(Object(f.b)((function(){return{}}),T)(j)),N=h.StickerMessage,x=Object(p.a)(N),D=function(e){var t=e.type,n=e.isSend,a=e.content;return(u.a.createElement(h.SystemMessage,{type:t,content:a,isSend:n}))};D.propTypes={type:d.a.string,isSend:d.a.bool,content:d.a.object};var q=Object(p.a)(D),L=n("HSHk"),A=function(e){var t=(e.conversation||{}).shop,n=(t?t.country:"SG").toLowerCase();return u.a.createElement(h.ProductsMessage,c()({region:n},e))};A.propTypes={conversation:d.a.object};var W=Object(p.a)(A),B=function(e){var t=e.imgCache,n=e.id,a=e.request_id,r=e.measure,o=e.isSend,s=e.textContent,c=e.handleReload,i=e.fetchStatus,l=e.conversation;return u.a.createElement(h.FeedStoryMessage,{imgCache:t,id:n,requestId:a,measure:r,isSend:o,textContent:s,handleReload:c,fetchStatus:i,handleTrackStory:function(){Object(v.tracker)({shopId:l.shop_id,section:"conversation_window",type:"story",data:{story_id:s.id}})}})};B.propTypes={imgCache:d.a.object,id:d.a.string,request_id:d.a.string,measure:d.a.func,isSend:d.a.bool,textContent:d.a.object,handleReload:d.a.func,fetchStatus:d.a.string,conversation:d.a.object};var F=Object(p.a)(Object(f.b)((function(e){return{currentUser:Object(v.currentUserSelector)(e)}}),{})(B)),U=function(e){var t=e.measure,n=e.isSend,a=e.textContent,r=void 0===a?[]:a,o=e.fetchStatus,s=e.handleReload,c=e.conversation,i=e.content,l=i.cart_items,d=void 0===l?[]:l,p=i.shop_id,f=e.track,v=(c||{}).shop,m=(v&&v.country?v.country:"SG").toLowerCase();return u.a.createElement(h.CartReminderMessage,{isSend:n,measure:t,handleReload:s,failed:"failed"===o,products:r,cartItems:d,shopId:p,region:m,track:f})};U.propTypes={measure:d.a.func,isSend:d.a.bool,textContent:d.a.array,fetchStatus:d.a.string,handleReload:d.a.func,content:d.a.object,conversation:d.a.object,track:d.a.func.isRequired};var H=Object(p.a)(U),G=function(e){var t=e.isSend,n=e.measure,a=e.content,r=e.conversation,o=e.sendMessagesRequested,s=r.id,c=r.shop_id,i=r.to_id;return u.a.createElement(h.FaqMessage,{isSend:t,measure:n,sendMessagesRequested:o,content:a,conversationId:s,shopId:c,conversationUserId:i})};G.propTypes={isSend:d.a.bool,measure:d.a.func,content:d.a.object,conversation:d.a.object,sendMessagesRequested:d.a.func};var K=Object(p.a)(G),V=(n("I5cv"),n("lwsE")),Y=n.n(V),X=n("W8MJ"),J=n.n(X),z=n("7W2i"),Z=n.n(z),Q=n("a1gu"),$=n.n(Q),ee=n("Nsbk"),te=n.n(ee),ne=n("zeYU"),ae=n.n(ne);function re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=te()(e);if(t){var r=te()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return $()(this,n)}}var oe=function(e){Z()(n,e);var t=re(n);function n(){return Y()(this,n),t.apply(this,arguments)}return J()(n,[{key:"render",value:function(){var e=this.props,t=e.type,n=e.isSend;return(u.a.createElement("div",{className:"".concat(ae.a.root," ").concat(n?ae.a.send:"")},Object(v.getCustomMessageText)(t)))}}]),n}(u.a.PureComponent);oe.propTypes={type:d.a.string,isSend:d.a.bool};var se=Object(p.a)(oe),ce=function(e){var t=e.id,n=e.content,a=e.conversation,r=e.sendMessagesRequested,o=e.isSend,s=a.id,c=a.shop_id,i=a.to_id;return u.a.createElement(h.FaqFeedbackPromptMessage,{id:t,content:n,sendMessagesRequested:r,conversationId:s,conversationUserId:i,isSend:o,shopId:c})};ce.propTypes={id:d.a.string,isSend:d.a.bool,content:d.a.object,conversation:d.a.object,sendMessagesRequested:d.a.func};var ie=Object(p.a)(ce),ue=function(e){var t=e.conversation,n=e.sendMessagesRequested,a=e.isSend,r=t.id,o=t.shop_id,s=t.to_id;return u.a.createElement(h.FaqLiveAgentPromptMessage,{sendMessagesRequested:n,isSend:a,conversationId:r,shopId:o,conversationUserId:s})};ue.propTypes={isSend:d.a.bool,conversation:d.a.object,sendMessagesRequested:d.a.func};var le=Object(p.a)(ue),de=n("q20h"),pe=n("4Q5n"),he=function(e){var t=e.content,n=t.order_id,a=t.shop_id,r=e.textContent,s=e.isSend,c=e.handleReload,i=e.conversation,l=i.hasViewOrderAccess,d=i.shop,p=e.isSubAccount,f=e.visitShopSellerCenterRequested,v=e.track,m=Object(o.isVisitingCNSC)()?"cn":(d?d.country:"SG").toLowerCase();return u.a.createElement(h.RateReminderMessage,{isSend:s,region:m,textContent:r,handleReload:c,hasViewOrderAccess:l,visitUnratedOrderRequest:function(){var e="https://".concat(Object(o.getMallUrl)(m),"/user/purchase/order/").concat(n,"/?shopid=").concat(a),t="https://".concat(Object(o.getSellerCenterUrl)(m),"/portal/sale/").concat(n);if(s){var r=p?function(){return f({shopId:a,orderId:n})}:t;Object(o.viewLinkWithAccess)(l,r)}else window.open(e)},track:v})},fe={visitShopSellerCenterRequested:I.b};he.propTypes={isSend:d.a.bool,handleReload:d.a.func,content:d.a.object,textContent:d.a.object,conversation:d.a.object,isSubAccount:d.a.bool,visitShopSellerCenterRequested:d.a.func,track:d.a.func};var ve=Object(p.a)(Object(f.b)((function(){return{}}),fe)(he)),me=n("LcIU"),ge=n("PJYZ"),ye=n.n(ge),be=(n("2Spj"),n("bWfx"),n("TSYQ")),Se=n.n(be),Re=n("TRmF"),Ee=n.n(Re);function Oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=te()(e);if(t){var r=te()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return $()(this,n)}}var ke=o.MessageTypes.MSG_TYPE_POND_SELECTED,Ce=function(e){Z()(n,e);var t=Oe(n);function n(e){var a;return Y()(this,n),(a=t.call(this,e)).renderOption=a.renderOption.bind(ye()(a)),a.sendMessage=a.sendMessage.bind(ye()(a)),a}return J()(n,[{key:"sendMessage",value:function(e){var t=e.request_live_agent,n=e.payload,a=e.text,r=this.props,o=r.conversation,s=r.sendMessagesRequested,c=o.id,i=o.shop_id;s({conversationId:c,conversationUserId:o.to_id,messages:[{shopId:i,type:ke,content:{text:a,payload:n,request_live_agent:t}}]})}},{key:"renderOption",value:function(e,t){var n,a=this,o=e.text,s=e.variant,c=this.props,i=c.created_timestamp<c.conversation.max_general_option_hide_time,l=Se()(Ee.a.option,(n={},r()(n,Ee.a.primary,1===s),r()(n,Ee.a.invalid,i),n));return u.a.createElement("div",{key:t,className:l,title:o,onClick:function(){if(i)return null;a.sendMessage(e)}},o)}},{key:"render",value:function(){var e=this,t=this.props,n=t.content,a=n.title,r=n.options,o=void 0===r?[]:r,s=t.handleSensitiveUrl,c=t.message_option;return u.a.createElement("div",{className:Ee.a.root},u.a.createElement("div",{className:Ee.a.title},u.a.createElement(h.Text,{text:a,messageOption:c,handleSensitiveUrl:s})),o.map((function(t,n){return e.renderOption(t,n)})))}}]),n}(i.PureComponent),Me={handleSensitiveUrl:v.handleSensitiveUrl,sendMessagesRequested:v.sendMessagesRequested};Ce.propTypes={content:d.a.object,created_timestamp:d.a.number,message_option:d.a.number,conversation:d.a.object,sendMessagesRequested:d.a.func,handleSensitiveUrl:d.a.func};var _e=Object(p.a)(Object(f.b)((function(e){return{conversation:Object(v.currentConversationSelector)(e)}}),Me)(Ce)),we=function(e){return u.a.createElement(h.AddOnDealMessage,c()({},e,{region:e.country}))};we.propTypes={country:d.a.string};var Ie=Object(p.a)(we),je=function(e){var t=e.id,n=e.to_id,a=e.from_id,r=e.request_id,o=e.isSend,s=e.content,c=e.isSending,i=e.videoInfo,l=e.showMediaPreviewModalRequested;return u.a.createElement(h.VideoMessage,{id:t,isSend:o,content:s,isSending:c,videoInfo:i,onPlayVideo:function(e){Object(v.tracker)({section:"conversation_window",type:"video_play_thumbnail",data:{message_id:t===r?0:t,is_sender:o,to_user_id:n,from_user_id:a,video_original_duration:s.duration_seconds}}),l({messageId:e})}})};je.propTypes={id:d.a.string,isSend:d.a.bool,content:d.a.object,isSending:d.a.bool,videoInfo:d.a.object,to_id:d.a.number,from_id:d.a.number,request_id:d.a.string,showMediaPreviewModalRequested:d.a.func};var Te,Pe=Object(p.a)(je),Ne={showMediaPreviewModalRequested:v.showMediaPreviewModalRequested},xe=Object(f.b)((function(e,t){return{videoInfo:Object(v.selectVideoInfoByKey)(t.message.request_id)(e)}}),Ne)((function(e){return u.a.createElement(Pe,e)})),De=(Te={},r()(Te,o.MessageTypes.MSG_TYPE_TEXT,y),r()(Te,o.MessageTypes.MSG_TYPE_IMAGE,E),r()(Te,o.MessageTypes.MSG_TYPE_OFFER,M),r()(Te,o.MessageTypes.MSG_TYPE_ORDER,P),r()(Te,o.MessageTypes.MSG_TYPE_STICKER,x),r()(Te,o.MessageTypes.MSG_TYPE_PRODUCT,w),r()(Te,o.MessageTypes.MSG_TYPE_WEBVIEW,q),r()(Te,o.MessageTypes.MSG_TYPE_NOTIFICATION,q),r()(Te,o.MessageTypes.MSG_TYPE_VOUCHER,L.a),r()(Te,o.MessageTypes.MSG_TYPE_CATEGORY,W),r()(Te,o.MessageTypes.MSG_TYPE_PRODUCT_LIST,W),r()(Te,o.MessageTypes.MSG_TYPE_FEED_STORY,F),r()(Te,o.MessageTypes.MSG_TYPE_CART_REMINDER,H),r()(Te,o.MessageTypes.MSG_TYPE_FAQ,K),r()(Te,o.MessageTypes.MSG_TYPE_FAQ_LIVEAGENT,y),r()(Te,o.MessageTypes.MSG_TYPE_FAQ_QUESTION,y),r()(Te,o.MessageTypes.MSG_TYPE_FAQ_FEEDBACK,y),r()(Te,o.MessageTypes.MSG_TYPE_FAQ_FEEDBACK_PROMPT,ie),r()(Te,o.MessageTypes.MSG_TYPE_FAQ_LIVEAGENT_PROMPT,le),r()(Te,o.MessageTypes.MSG_TYPE_ORDER_REVIEW_REMINDER,ve),r()(Te,o.MessageTypes.MSG_TYPE_FAQ_HISTORY,me.a),r()(Te,o.MessageTypes.MSG_TYPE_BUNDEL_DEAL,de.a),r()(Te,o.MessageTypes.MSG_TYPE_FLASH_SALE,pe.a),r()(Te,o.MessageTypes.MSG_TYPE_POND,_e),r()(Te,o.MessageTypes.MSG_TYPE_POND_SELECTED,y),r()(Te,o.MessageTypes.MSG_TYPE_ADD_ON_DEAL,Ie),r()(Te,o.MessageTypes.MSG_TYPE_VIDEO,xe),Te);t.a=function(e){return De[e]||se}},g6PX:function(e,t,n){"use strict";n("I5cv");var a=n("lwsE"),r=n.n(a),o=n("W8MJ"),s=n.n(o),c=n("7W2i"),i=n.n(c),u=n("a1gu"),l=n.n(u),d=n("Nsbk"),p=n.n(d),h=n("q1tI"),f=n.n(h),v=n("/MKj"),m=n("tvxL"),g=n("8oVw");function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return l()(this,n)}}var b=function(e){i()(n,e);var t=y(n);function n(){return r()(this,n),t.apply(this,arguments)}return s()(n,[{key:"render",value:function(){return f.a.createElement(g.a,this.props)}}]),n}(f.a.PureComponent),S={markMessagesRequested:m.markMessagesRequested,updateConversationFilter:m.updateConversationFilter,pinConversationRequested:m.pinConversationRequested,showConversationRequested:m.showConversationRequested,resetConversationRequested:m.resetConversationRequested,deleteConversationRequested:m.deleteConversationRequested,fetchConversationsRequested:m.fetchConversationsRequested,searchConversationsRequested:m.searchConversationsRequested,redirectConversationRequested:m.redirectConversationRequested,updateConversationDetailStatus:m.updateConversationDetailStatus,resetConversationQueue:m.resetConversationQueue,fetchDegradeConversationsDetail:m.fetchDegradeConversationsDetail};t.a=Object(v.b)((function(e){return{filter:Object(m.filterSelector)(e),keyword:Object(m.keywordSelector)(e),results:Object(m.resultsSelector)(e),listsHash:Object(m.listsHashSelector)(e),draftHash:Object(m.draftHashSelector)(e),socketFeedback:Object(m.feedbackSelector)(e),networkStatus:Object(m.networkStatusSelector)(e),totalUnreadConversationsCount:Object(m.totalUnreadConversationsCountSelector)(e),sortedConversations:Object(m.sortedConversationsSelector)(e),conversationDirection:Object(m.conversationDirectionSelector)(e),conversationHttpStatus:Object(m.conversationHttpStatusSelector)(e),searchConversationHttpStatus:Object(m.searchConversationHttpStatusSelector)(e)}}),S)(b)},gfNt:function(e,t,n){"use strict";(function(e){n("I5cv");var a=n("lwsE"),r=n.n(a),o=n("W8MJ"),s=n.n(o),c=n("PJYZ"),i=n.n(c),u=n("7W2i"),l=n.n(u),d=n("a1gu"),p=n.n(d),h=n("Nsbk"),f=n.n(h),v=(n("2Spj"),n("q1tI")),m=n.n(v),g=n("17x9"),y=n.n(g),b=n("h4gR"),S=n("MgYr"),R=n.n(S),E=n("hpM7"),O=n.n(E);function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var C=function(t){l()(a,t);var n=k(a);function a(e){var t;return r()(this,a),(t=n.call(this,e)).handleClose=t.handleClose.bind(i()(t)),t}return s()(a,[{key:"handleClose",value:function(){var e=this.props,t=e.currentConversation;(0,e.updateTranslateTips)({shopId:t.shop_id,flag:"closed"})}},{key:"render",value:function(){return m.a.createElement("div",{className:O.a.root},m.a.createElement("div",{className:O.a.left},m.a.createElement("div",{className:O.a.icon}),m.a.createElement("div",{className:O.a.tips},e("auto_translation.suggestion"))),m.a.createElement(b.Icon,{svg:R.a,className:O.a.close,onClick:this.handleClose}))}}]),a}(m.a.PureComponent);C.propTypes={updateTranslateTips:y.a.func,currentConversation:y.a.object},t.a=C}).call(this,n("kiXb").t)},hRrX:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return o}));var a={ALL:"all",UNPAID:"unpaid",TO_SHIP:"to_ship",SHIPPING:"shipping",COMPLETED:"completed",CANCELLED:"cancelled",REFUND:"refund"},r={ORDER_EXT_DELETE:0,ORDER_EXT_UNPAID:1,ORDER_EXT_PAID:2,ORDER_EXT_SHIPPED:3,ORDER_EXT_COMPLETED:4,ORDER_EXT_INVALID:6,ORDER_EXT_CANCEL_PROCESSING:7,ORDER_EXT_CANCEL_COMPLETED:8,ORDER_EXT_RETURN_PROCESSING:9,ORDER_EXT_RETURN_COMPLETED:10,ORDER_EXT_ESCROW_PAID:11,ORDER_EXT_ESCROW_CREATED:12,ORDER_EXT_ESCROW_PENDING:13,ORDER_EXT_ESCROW_VERIFIED:14,ORDER_EXT_ESCROW_PAYOUT:15,ORDER_EXT_CANCEL_PENDING:16},o={DELETE:0,UNRATED:1,RATED:2,RETURNED:3,RETURN_RATED:4,CANCEL:5}},hrAk:function(e,t,n){"use strict";(function(e){n("I5cv");var a=n("lSNA"),r=n.n(a),o=n("lwsE"),s=n.n(o),c=n("W8MJ"),i=n.n(c),u=n("PJYZ"),l=n.n(u),d=n("7W2i"),p=n.n(d),h=n("a1gu"),f=n.n(h),v=n("Nsbk"),m=n.n(v),g=(n("2Spj"),n("f3/d"),n("q1tI")),y=n.n(g),b=n("17x9"),S=n.n(b),R=n("DDCE"),E=n("B5G6"),O=n("UGZQ"),k=n.n(O),C=n("SUBy"),M=n("XnKn"),_=n("BDCo"),w=n.n(_);function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=m()(e);if(t){var r=m()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return f()(this,n)}}var j=function(t){p()(a,t);var n=I(a);function a(t){var r;return s()(this,a),(r=n.call(this,t)).emptyText=e("common.product.empty"),r.makeProductList=r.makeProductList.bind(l()(r)),r.makeProductTab=r.makeProductTab.bind(l()(r)),r.refresh=r.refresh.bind(l()(r)),r.makeTabNav=r.makeTabNav.bind(l()(r)),r.hasMyData=!1,r.hasOtherData=!1,r.refresh(),r}return i()(a,[{key:"refresh",value:function(){var e=this.props,t=e.currentConversation,n=e.fetchProductsRequested,a=e.isScChat,r=e.fetchAllProductsRequested,o=e.fetchShopDetailInfo,s=t.shop_id;if(a)n({shopId:s,keyword:"",reset:!0});else{var c=t.to_shop_id;r({myShopId:s,otherShopId:c}),o({shopId:c})}}},{key:"makeProductList",value:function(e,t,n,a,r){var o=this.props,s=o.currentUser,c=o.fetchProductsRequested,i=o.handleSendMessage,u=o.currentConversation,l=o.closePortal,d=o.isSubAccount,p=o.currentBuyer;return(y.a.createElement(R.a,{shopId:e,keyword:t,listData:a,status:n,currentConversation:u,fetchProductsRequested:c,handleSendMessage:i,closePortal:l,isSubAccount:d,currentBuyer:p,currentUser:s,autoFocus:r,emptyText:this.emptyText,emptyImage:w.a}))}},{key:"makeProductTab",value:function(){var t,n=this,a=this.props,o=a.myShopSearchStatus,s=a.otherShopSearchStatus,c=a.allShopSearchStatus,i=a.myShopProducts,u=a.otherShopProducts,l=a.selectedProductTab,d=a.updateSelectedProductTab,p=a.currentConversation,h=a.myShopSearchKeyword,f=a.otherShopSearchKeyword,v=a.currentBuyer,m=a.myShop,g=a.currentBuyerShop;!this.hasMyData&&c===M.HttpStatus.SUCCEED&&i.length>0&&(this.hasMyData=!0),!this.hasOtherData&&c===M.HttpStatus.SUCCEED&&u.length>0&&(this.hasOtherData=!0);var b=(t={},r()(t,"my",{label:this.makeTabNav(m.image,e("common.product.my_shop")),hasData:this.hasMyData,tabClass:k.a.complete,content:function(e){return n.makeProductList(p.shop_id,h,o,i,"my"===e)}}),r()(t,"other",{label:this.makeTabNav(g.image,g.name),hasData:this.hasOtherData,content:function(e){return n.makeProductList(v.shop_id,f,s,u,"other"===e)}}),t);return(y.a.createElement(E.a,{status:c,domObject:b,listItems:[],emptyText:this.emptyText,emptyImage:w.a,selectedTab:l,onRefresh:this.refresh,updateSelectedTab:d}))}},{key:"makeTabNav",value:function(e,t){return y.a.createElement("div",{className:k.a.tabNav},y.a.createElement("div",{className:k.a.shopIcon},y.a.createElement(C.a,{avatar:e||"",origin:"shop"})),y.a.createElement("div",{className:k.a.shopName,title:t||""},t||""))}},{key:"render",value:function(){var e=this.props,t=e.myShopSearchKeyword,n=e.myShopProducts,a=e.myShopSearchStatus,r=e.currentConversation;return e.isScChat?this.makeProductList(r.shop_id,t,a,n,!0):this.makeProductTab()}}]),a}(y.a.PureComponent);j.propTypes={currentUser:S.a.object,myShopSearchKeyword:S.a.string,otherShopSearchKeyword:S.a.string,myShopProducts:S.a.array,otherShopProducts:S.a.array,myShopSearchStatus:S.a.string,otherShopSearchStatus:S.a.string,fetchProductsRequested:S.a.func,handleSendMessage:S.a.func,currentConversation:S.a.object,closePortal:S.a.func,isSubAccount:S.a.bool,currentBuyer:S.a.object,isScChat:S.a.bool,allShopSearchStatus:S.a.string,selectedProductTab:S.a.string,updateSelectedProductTab:S.a.func,fetchAllProductsRequested:S.a.func,fetchShopDetailInfo:S.a.func,myShop:S.a.object,currentBuyerShop:S.a.object},j.defaultProps={},t.a=j}).call(this,n("kiXb").t)},hruB:function(e,t,n){"use strict";n("I5cv");var a=n("lwsE"),r=n.n(a),o=n("W8MJ"),s=n.n(o),c=n("7W2i"),i=n.n(c),u=n("a1gu"),l=n.n(u),d=n("Nsbk"),p=n.n(d),h=n("q1tI"),f=n.n(h),v=n("/MKj"),m=n("tvxL"),g=n("cOd3"),y=n("mkWr"),b=n("empP");function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return l()(this,n)}}var R=function(e){i()(n,e);var t=S(n);function n(){return r()(this,n),t.apply(this,arguments)}return s()(n,[{key:"render",value:function(){return f.a.createElement(y.a,this.props)}}]),n}(f.a.PureComponent),E={visitShopSellerCenterRequested:b.b};t.a=Object(v.b)((function(e){return{myData:Object(g.f)(e),hisData:Object(g.e)(e),currentBuyerShop:Object(m.currentBuyerShopSelector)(e),fetchMyOrdersStatus:Object(g.c)(e),fetchHisOrdersStatus:Object(g.b)(e)}}),E)(R)},jtha:function(e,t,n){"use strict";var a=n("tvxL");t.a=a.fetch},k3Bb:function(e,t,n){"use strict";(function(e){n("I5cv");var a=n("pVnL"),r=n.n(a),o=n("lwsE"),s=n.n(o),c=n("W8MJ"),i=n.n(c),u=n("7W2i"),l=n.n(u),d=n("a1gu"),p=n.n(d),h=n("Nsbk"),f=n.n(h),v=n("q1tI"),m=n.n(v),g=n("17x9"),y=n.n(g),b=n("eclI"),S=n.n(b),R=n("PwGw"),E=n("XnKn");function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var k=E.MessageShortcutGroupType.PERSONAL,C=E.MessageShortcutGroupType.TEAM,M=function(t){l()(a,t);var n=O(a);function a(){return s()(this,a),n.apply(this,arguments)}return i()(a,[{key:"render",value:function(){var t=this.props,n=t.currentGroupType,a=t.fetchMessageShortcutsGroupRequested,o=t.isSubAccount,s=t.setCurrentGroupType,c=t.currentConversation.shop_id,i=o?S.a.headerItemActive:"";return m.a.createElement("div",{className:S.a.root},m.a.createElement("div",{className:S.a.header},m.a.createElement("div",{className:"".concat(S.a.headerItem," ").concat(n===k?i:""),onClick:function(){s({currentGroupType:k})}},e("messageshorcut.title.personal")),o&&m.a.createElement("div",{className:"".concat(S.a.headerItem," ").concat(n===C?i:""),onClick:function(){s({currentGroupType:C})}},e("messageshorcut.title.team"))),m.a.createElement(R.a,r()({onRefresh:function(){a({groupType:n,shopId:c})}},this.props)))}}]),a}(m.a.PureComponent);M.propTypes={closePortal:y.a.func.isRequired,parent:y.a.object,currentGroupType:y.a.number,isSubAccount:y.a.bool,fetchMessageShortcutsGroupRequested:y.a.func,currentConversation:y.a.object,setCurrentGroupType:y.a.func,setCurrentGroupId:y.a.func},t.a=M}).call(this,n("kiXb").t)},kLRj:function(e,t,n){"use strict";n("I5cv");var a=n("lwsE"),r=n.n(a),o=n("W8MJ"),s=n.n(o),c=n("7W2i"),i=n.n(c),u=n("a1gu"),l=n.n(u),d=n("Nsbk"),p=n.n(d),h=n("q1tI"),f=n.n(h),v=n("17x9"),m=n.n(v),g=n("latu"),y=n.n(g);function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return l()(this,n)}}var S=function(e){i()(n,e);var t=b(n);function n(){return r()(this,n),t.apply(this,arguments)}return s()(n,[{key:"render",value:function(){var e=this.props,t=e.classname,n=e.image,a=e.text,r=e.needMiniSize,o=void 0!==r&&r;return(f.a.createElement("div",{className:"".concat(y.a.root," ").concat(t)},f.a.createElement("img",{src:n,className:o?y.a.mini:y.a.img}),f.a.createElement("div",{className:y.a.text},a)))}}]),n}(f.a.PureComponent);S.propTypes={classname:m.a.string,needMiniSize:m.a.bool,image:m.a.string,text:m.a.string},t.a=S},kiWX:function(e,t,n){"use strict";t.a={source:{product:"common.product.footer",order:"common.order.footer"},message:{product:"common.product.cap",order:"common.order.cap",offer:"common.offer.cap"}}},kiXb:function(e,t,n){"use strict";n.r(t),n.d(t,"t",(function(){return r}));n("2Spj");var a=n("XzT5"),r=a.default.t.bind(a.default)},kvuF:function(e,t,n){"use strict";(function(e){n("I5cv"),n("RW0V"),n("ioFf"),n("mYba"),n("8+KV"),n("jm62"),n("WLL4"),n("HAE/");var a=n("lSNA"),r=n.n(a),o=n("lwsE"),s=n.n(o),c=n("W8MJ"),i=n.n(c),u=n("PJYZ"),l=n.n(u),d=n("7W2i"),p=n.n(d),h=n("a1gu"),f=n.n(h),v=n("Nsbk"),m=n.n(v),g=(n("2Spj"),n("0l/t"),n("L9s1"),n("Z2Ku"),n("bWfx"),n("OG14"),n("q1tI")),y=n.n(g),b=n("17x9"),S=n.n(b),R=n("SdKD"),E=n("tvxL"),O=n("yghM"),k=n("h4gR"),C=n("Vm52"),M=n.n(C),_=n("Ozkt"),w=n.n(_),I=n("cVmw"),j=n.n(I);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=m()(e);if(t){var r=m()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return f()(this,n)}}var N=function(t){p()(a,t);var n=P(a);function a(e){var t;return s()(this,a),(t=n.call(this,e)).state={focus:!1},t.handleFocus=t.handleFocus.bind(l()(t)),t.cancelSearch=t.cancelSearch.bind(l()(t)),t.handleKeyDown=t.handleKeyDown.bind(l()(t)),t.handleSearch=Object(O.a)(t.handleChange.bind(l()(t))),t.handleFilterMenuOpen=t.handleFilterMenuOpen.bind(l()(t)),t}return i()(a,[{key:"componentDidUpdate",value:function(e){var t=this.props.keyword;t===e.keyword||t||(this.input.value="")}},{key:"handleFocus",value:function(e){this.setState({focus:e}),e&&Object(E.tracker)({type:"search_name"})}},{key:"cancelSearch",value:function(){this.input.value="",this.handleChange()}},{key:"handleChange",value:function(e){this.input&&this.props.searchConversationsRequested({keyword:this.input.value})}},{key:"handleKeyDown",value:function(e){switch(e.keyCode){case 27:this.cancelSearch(),e.preventDefault()}}},{key:"filter",value:function(e){var t=this.props,n=t.filter,a=t.updateConversationFilter,r=t.resetConversationRequested,o=t.fetchConversationsRequested,s=t.resetConversationQueue;if(e!==n){a({filter:e});var c=[e,n];!(c.includes("All")&&c.includes("Closed"))&&s(),r(),Object(E.tracker)({section:"chat_list_dropdown",type:"filter_".concat(e.toLowerCase())});var i=c.includes("Unread"),u=c.includes("Pinned"),l=c.includes("Unreplied");(i||u||l)&&o({direction:"reset"})}}},{key:"getFilterOptions",value:function(t){var n=this,a=t.isSubAccount,o=t.totalUnreadConversationsCount,s=t.isScChat,c=["All","Unread","Pinned"];!a&&s&&c.splice(c.length-1,0,"Unreplied");var i=c.map((function(t){var a={};return o>0&&"Unread"===t&&(a.icon="reddotIcon"),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({name:e("conversation_list.filter.".concat(t.toLowerCase())),handleSelect:function(){n.filter(t)}},a)}));return a&&i.push({name:e("common.closed"),handleSelect:function(){n.filter("Closed")}}),i}},{key:"handleFilterMenuOpen",value:function(){var e=this.props.updateOpenedMenu;Object(E.tracker)({section:"chat_list_dropdown",type:"filter"}),e("conversions_filter")}},{key:"render",value:function(){var t=this,n=this.state.focus,a=this.props,r=a.keyword,o=void 0===r?"":r,s=a.filter,c=a.openedMenu,i=a.isSubAccount,u=a.totalUnreadConversationsCount,l=a.isScChat,d=function(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t="Closed"===n?"common.closed":"conversation_list.filter.".concat(n.toLowerCase()),e(t)}(s),p=this.getFilterOptions({isSubAccount:i,totalUnreadConversationsCount:u,isScChat:l}),h=e("conversation_list.search.placehoder");return y.a.createElement("div",{className:j.a.root},y.a.createElement("div",{className:j.a.search},y.a.createElement("input",{defaultValue:o,className:j.a.input,onChange:this.handleSearch,onKeyDown:this.handleKeyDown,placeholder:h,ref:function(e){return t.input=e},onBlur:function(){return t.handleFocus(!1)},onFocus:function(){return t.handleFocus(!0)}}),y.a.createElement("div",{className:"".concat(j.a.wrapper," ").concat(n||o?j.a.focus:"")},y.a.createElement(k.Icon,{svg:w.a,className:j.a.icon})),o&&y.a.createElement("div",{className:j.a.cancel,onClick:this.cancelSearch})),!o&&!n&&y.a.createElement("div",{className:"".concat(j.a.filter," ").concat(j.a.reddotFilter)},u>0&&y.a.createElement("div",{className:j.a.reddot}),y.a.createElement(R.a,{menuKey:"conversions_filter",options:p,openedMenu:c,onOpen:this.handleFilterMenuOpen,placement:"bottom-end",label:y.a.createElement("div",{className:j.a.selected},d,y.a.createElement(k.Icon,{svg:M.a,className:j.a.arrowDown}))})))}}]),a}(y.a.PureComponent);N.propTypes={filter:S.a.string,keyword:S.a.string,openedMenu:S.a.string,isSubAccount:S.a.bool,updateOpenedMenu:S.a.func,updateConversationFilter:S.a.func,resetConversationRequested:S.a.func,fetchConversationsRequested:S.a.func,searchConversationsRequested:S.a.func,totalUnreadConversationsCount:S.a.number,resetConversationQueue:S.a.func,isScChat:S.a.func},t.a=N}).call(this,n("kiXb").t)},"l6+b":function(e,t,n){"use strict";(function(e){n("I5cv");var a=n("lwsE"),r=n.n(a),o=n("W8MJ"),s=n.n(o),c=n("PJYZ"),i=n.n(c),u=n("7W2i"),l=n.n(u),d=n("a1gu"),p=n.n(d),h=n("Nsbk"),f=n.n(h),v=(n("2Spj"),n("f3/d"),n("bWfx"),n("q1tI")),m=n.n(v),g=n("17x9"),y=n.n(g),b=n("9bFT"),S=n("SdKD"),R=n("SUBy"),E=n("tvxL"),O=n("XnKn"),k=n("h4gR"),C=n("pBmv"),M=n.n(C),_=n("Hcmg"),w=n.n(_),I=n("hi67"),j=n.n(I),T=n("KoTY"),P=n.n(T),N=n("Vm52"),x=n.n(N),D=n("pX/R"),q=n.n(D);function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var A={successful:w.a,unsuccessful:j.a,shop:P.a,location:M.a},W=function(t){l()(a,t);var n=L(a);function a(e){var t;return r()(this,a),(t=n.call(this,e)).informationList=["shop","location","successful","unsuccessful"],t.handleDoubleClick=t.handleDoubleClick.bind(i()(t)),t.handleMenusClick=t.handleMenusClick.bind(i()(t)),t.makeBuyerProfileDom=t.makeBuyerProfileDom.bind(i()(t)),t.makeStarDom=t.makeStarDom.bind(i()(t)),t.makeInformationDom=t.makeInformationDom.bind(i()(t)),t.makeInformationItemContentDom=t.makeInformationItemContentDom.bind(i()(t)),t.handleMenusOpen=t.handleMenusOpen.bind(i()(t)),t.makeOperationDom=t.makeOperationDom.bind(i()(t)),t.handleBlock=t.handleBlock.bind(i()(t)),t.handleBuyer=t.handleBuyer.bind(i()(t)),t.goMallShop=t.goMallShop.bind(i()(t)),t.operationListConfig=[{name:"View Profile",handler:t.handleView},{name:"Report",handler:t.handleReport},{name:"Block",handler:t.handleBlock}],t}return s()(a,[{key:"goMallShop",value:function(e,t){e&&t&&window.open("https://".concat(Object(O.getMallUrl)(e),"/").concat(t))}},{key:"handleDoubleClick",value:function(){console.log(this.props.currentConversation)}},{key:"render",value:function(){var e=this,t=this.props,n=t.openedMenu,a=t.currentConversation.to_name;return m.a.createElement("div",{className:q.a.root},m.a.createElement(S.a,{menuKey:"buyer_profile",placement:"bottom-start",menuStyle:{padding:"12px 0 0 0"},labelStyle:{display:"flex",alignItems:"center",overflow:"hidden",justifyContent:"flex-start"},openedMenu:n,onOpen:this.handleMenusOpen,label:m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:q.a.name,onDoubleClick:this.handleDoubleClick},a),m.a.createElement(k.Icon,{svg:x.a,className:q.a.arrow})),content:function(t){return e.makeBuyerProfileDom(t)},onClick:this.handleMenusClick}))}},{key:"handleMenusOpen",value:function(){var e=this.props,t=e.updateOpenedMenu,n=e.currentConversation;t("buyer_profile"),Object(E.tracker)({shopId:n.shop_id,section:"buyer_information",operation:"impression"})}},{key:"handleMenusClick",value:function(){Object(E.tracker)({shopId:this.props.currentConversation.shop_id,section:"buyer_information",type:"username_more_button"})}},{key:"handleBuyer",value:function(e,t){var n=this.props,a=n.currentBuyer,r=void 0===a?{}:a,o=n.currentUser,s=n.currentConversation,c=r.shop_id,i=r.country;t&&t(),Object(E.tracker)({shopId:s.shop_id,section:"buyer_information_dropdown",type:"report"===e?"more_report":"more_view_profile",data:{shopid:o.shop_id?o.shop_id:"",account_type:o.type,account_id:o.id}}),window.open("https://".concat(Object(O.getMallUrl)(i),"/shop/").concat(c,"/").concat("report"===e?"report/?__classic__=1":""))}},{key:"handleBlock",value:function(t){var n=this.props,a=n.currentUser,r=n.currentBuyer,o=n.showModal,s=n.closeModal,c=n.blockUserRequested,i=n.currentConversation,u=r.id,l=i.to_name,d=i.shop_id,p=i.is_blocked;t(),!p&&Object(E.tracker)({shopId:d,section:"buyer_information_dropdown",type:"more_block",data:{shopid:a.shop_id?a.shop_id:"",account_type:a.type,account_id:a.id}}),o({type:"CONFIRM_MODAL",title:{key:p?"conversation_detail.workstation.unblock_modal.title":"conversation_detail.workstation.block_modal.title",vars:{username:l}},actions:{confirm:{label:e("common.confirm"),handler:function(){c({buyerName:l,buyerId:u,block:!p,shopId:d,conversationId:i.id}),s()}},cancel:{label:e("common.cancel"),handler:s}},additions:{content:{key:p?"conversation_detail.workstation.unblock_modal.content":"conversation_detail.workstation.block_modal.content",vars:{username:l}}}})}},{key:"makeBuyerProfileDom",value:function(e){var t=this.props,n=t.currentBuyer,a=t.currentConversation,r=t.isScChat,o=a.to_name,s=n.avatar,c=n.avatar_hash,i=n.rating,u=void 0===i?5:i;return m.a.createElement("div",{className:q.a.wrapper},m.a.createElement("div",{className:"".concat(q.a.header," ").concat(r?"":q.a.mallHeader)},m.a.createElement("div",{className:q.a.avatar},m.a.createElement(R.a,{avatar:s,avatarHash:c})),m.a.createElement("div",{className:q.a.basic},m.a.createElement("div",{title:o,className:"".concat(q.a.popName," ").concat(r?"":q.a.popMallName)},o),r&&this.makeStarDom(u))),r&&m.a.createElement("div",{className:q.a.informations},this.makeInformationDom()),this.makeOperationDom(e))}},{key:"makeStarDom",value:function(e){return m.a.createElement("div",{className:q.a.rate},m.a.createElement("div",{className:q.a.stars},m.a.createElement(b.a,{score:e,editable:!1})),m.a.createElement("div",{className:q.a.score},parseFloat(e).toFixed(1)))}},{key:"makeInformationDom",value:function(){var e=this,t=this.props.isSubAccount?this.informationList:Object(O.removeItemFromArray)(this.informationList,"shop");return m.a.createElement(m.a.Fragment,null,t.map((function(t,n){return m.a.createElement("div",{key:n,className:q.a.informationItem},A[t]&&m.a.createElement(k.Icon,{svg:A[t],className:q.a[t]}),m.a.createElement("div",{className:q.a.informationContent},e.makeInformationItemContentDom(t)))})))}},{key:"makeOperationDom",value:function(t){var n=this,a=this.props,r=a.isSubAccount,o=a.currentConversation,s=o.is_blocked,c=o.mask;return m.a.createElement("div",{className:q.a.operations},!c&&m.a.createElement("div",{onClick:function(){return n.handleBuyer("profile",t)}},e("conversation_detail.workstation.menu.view_profile")),!r&&m.a.createElement("div",{onClick:function(){return n.handleBlock(t)}},e(s?"conversation_detail.workstation.menu.unblock":"conversation_detail.workstation.menu.block")),m.a.createElement("div",{onClick:function(){return n.handleBuyer("report",t)}},e("conversation_detail.workstation.menu.report")))}},{key:"makeInformationItemContentDom",value:function(t){var n=this.props,a=n.currentBuyer,r=void 0===a?{}:a,o=n.currentConversation.shop,s=void 0===o?{}:o,c=r.city,i=r.country,u=void 0===i?"":i;switch(t){case"shop":return s.name||e("common.loading");case"location":return"sg"===u.toLowerCase()?e("common.country.sg"):void 0!==c?c||"-":e("common.loading");case"successful":case"unsuccessful":var l=r["".concat(t,"_count")],d=r["".concat(t,"_price")];return"number"==typeof d?m.a.createElement(m.a.Fragment,null,Object(O.formatPrice)(d,u,{withSpaces:!0}),m.a.createElement("span",{className:q.a.informationContentOrder},"[",e(Object(O.formatNumberKey)("common.order.count",l),{count:l}),"]")):e("common.loading")}}}]),a}(m.a.PureComponent);W.propTypes={openedMenu:y.a.string,isSubAccount:y.a.bool,currentUser:y.a.object,currentBuyer:y.a.object,updateOpenedMenu:y.a.func,currentConversation:y.a.object,blockUserRequested:y.a.func,showModal:y.a.func,closeModal:y.a.func,isScChat:y.a.bool},t.a=W}).call(this,n("kiXb").t)},mkWr:function(e,t,n){"use strict";(function(e){n("I5cv");var a=n("pVnL"),r=n.n(a),o=n("lSNA"),s=n.n(o),c=n("lwsE"),i=n.n(c),u=n("W8MJ"),l=n.n(u),d=n("PJYZ"),p=n.n(d),h=n("7W2i"),f=n.n(h),v=n("a1gu"),m=n.n(v),g=n("Nsbk"),y=n.n(g),b=(n("2Spj"),n("L9s1"),n("Z2Ku"),n("q1tI")),S=n.n(b),R=n("17x9"),E=n.n(R),O=n("KCyL"),k=n("szol"),C=n("B5G6"),M=n("1RRp"),_=n.n(M),w=n("XnKn");function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=y()(e);if(t){var r=y()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return m()(this,n)}}var j=function(t){f()(a,t);var n=I(a);function a(t){var r;return i()(this,a),(r=n.call(this,t)).emptyText=e("conversation_detail.workstation.no_order_found"),r.makeDoms=r.makeDoms.bind(p()(r)),r.makeItem=r.makeItem.bind(p()(r)),r.fetchOrder=r.fetchOrder.bind(p()(r)),r.makeListContent=r.makeListContent.bind(p()(r)),r}return l()(a,[{key:"makeDoms",value:function(t){var n,a=this,r=this.props,o=r.myData,c=r.hisData,i=r.fetchHisOrdersStatus;return n={},s()(n,w.ListTabs.MINE,{label:e("common.order.sales"),hasData:o.length>0,content:t}),s()(n,w.ListTabs.HIS,{label:e("common.order.purchase"),hasData:c.length>0,content:this.makeListContent(c,i,(function(){return a.fetchOrder(w.ListTabs.HIS)}))}),n}},{key:"makeItem",value:function(e,t){var n=this.props.isScChat;return(S.a.createElement(O.a,r()({noMarginTop:n&&0===t,key:e.id,order:e},this.props)))}},{key:"fetchOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e===w.ListTabs.MINE,a=this.props,r=a.fetchOrdersRequested,o=a.currentConversation,s=a.currentBuyer,c=o.to_id,i=o.shop_id;r({from:e,userId:c,shopId:n?i:s.shop_id,reset:t.includes("Init")})}},{key:"makeListContent",value:function(e,t,n){return S.a.createElement(k.a,{status:t,listData:e,makeItem:this.makeItem,onLoadMore:n,onRefresh:n,emptyText:this.emptyText,emptyImage:_.a})}},{key:"render",value:function(){var e=this,t=this.props,n=t.status,a=t.myData,r=t.isScChat,o=t.fetchRequested,s=t.fetchMyOrdersStatus,c=this.makeListContent(a,s,(function(){return e.fetchOrder(w.ListTabs.MINE,s)}));if(r)return c;var i=this.makeDoms(c);return(S.a.createElement(C.a,{status:n,listItems:[],domObject:i,emptyText:this.emptyText,emptyImage:_.a,fetchRequested:o}))}}]),a}(S.a.PureComponent);j.propTypes={myData:E.a.array,status:E.a.string,hisData:E.a.array,isScChat:E.a.bool,currentBuyer:E.a.object,fetchRequested:E.a.func,currentConversation:E.a.object,fetchMyOrdersStatus:E.a.string,fetchHisOrdersStatus:E.a.string,fetchOrdersRequested:E.a.func},t.a=j}).call(this,n("kiXb").t)},nbEg:function(e,t,n){"use strict";n.d(t,"e",(function(){return c})),n.d(t,"h",(function(){return i})),n.d(t,"i",(function(){return u})),n.d(t,"a",(function(){return l})),n.d(t,"d",(function(){return p})),n.d(t,"g",(function(){return h})),n.d(t,"b",(function(){return f})),n.d(t,"f",(function(){return v})),n.d(t,"c",(function(){return m}));var a=n("XiPH"),r=n("peh1"),o=n("tvxL"),s={currentPage:0,perPage:20,total:0,hasMore:!0},c=function(e){return e.productReducer.myShopSearchStatus},i=function(e){return e.productReducer.otherShopSearchStatus},u=function(e){return e.productReducer.selectedProductTab},l=function(e){return e.productReducer.allShopSearchStatus},d=function(e){return e.productReducer.fetchResult},p=function(e){return e.productReducer.myShopSearchKeyword},h=function(e){return e.productReducer.otherShopSearchKeyword},f=function(e){return Object(r.createSelector)(d,(function(t){var n=t[e];return n||{pagination:s,result:[]}}))},v=Object(r.createSelector)(d,o.currentBuyerShopIdSelector,o.entitiesSelector,(function(e,t,n){var r=e[t];if(!r)return[];var s=r.result||[];return Object(a.denormalize)(s,[o.productSchema],n)})),m=Object(r.createSelector)(d,o.currentShopIdSelector,o.entitiesSelector,(function(e,t,n){var r=e[t];if(!r)return[];var s=r.result||[];return Object(a.denormalize)(s,[o.productSchema],n)}));Object(r.createSelector)(d,o.currentShopIdSelector,(function(e,t){var n=e[t];return n?n.pagination.total:0}))},oLbX:function(e,t,n){e.exports=n.p+"7c68763d0447e98e5ab1335e17e13435.png"},oWPI:function(e,t,n){e.exports=n.p+"6abdc0872a25853b36d17e7498335326.png"},q20h:function(e,t,n){"use strict";(function(e){n("I5cv");var a=n("lwsE"),r=n.n(a),o=n("W8MJ"),s=n.n(o),c=n("PJYZ"),i=n.n(c),u=n("7W2i"),l=n.n(u),d=n("a1gu"),p=n.n(d),h=n("Nsbk"),f=n.n(h),v=(n("2Spj"),n("bWfx"),n("f3/d"),n("fN96"),n("xfY5"),n("I78e"),n("q1tI")),m=n.n(v),g=n("17x9"),y=n.n(g),b=n("+iqz"),S=n("dm17"),R=n("FYh3"),E=n.n(R),O=n("XnKn");function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var C=O.PromotionStatus.UpComing,M=O.PromotionStatus.OnGoing,_=O.PromotionStatus.Expired,w=function(t){l()(a,t);var n=k(a);function a(e){var t;return r()(this,a),(t=n.call(this,e)).renderFooter=t.renderFooter.bind(i()(t)),t.renderHeaderText=t.renderHeaderText.bind(i()(t)),t.renderProductList=t.renderProductList.bind(i()(t)),t.trackItem=t.trackItem.bind(i()(t)),t.countOnSec=t.countOnSec.bind(i()(t)),t.transValue=t.transValue.bind(i()(t)),t.tick=t.tick.bind(i()(t)),t.state={date:Math.floor(new Date/1e3)},t.timerID=null,t.status="",t}return s()(a,[{key:"componentDidMount",value:function(){this.countOnSec(),this.props.measure()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timerID)}},{key:"countOnSec",value:function(){var e=this;clearTimeout(this.timerID),this.timerID=setTimeout((function(){e.tick(),e.countOnSec()}),1e3)}},{key:"tick",value:function(){this.setState({date:Math.floor(new Date/1e3)})}},{key:"renderFooter",value:function(t,n,a,r){var o=this,s="https://".concat(Object(O.getMallUrl)(a),"/bundle-deal/").concat(r),c=Object(O.customizeTime)(1e3*t),i=n===C?m.a.createElement("div",null,"".concat(e("common.flash_sale.start_at")," ").concat(c)):n===M?m.a.createElement("div",{className:E.a.detail},e("conversation_detail.conversation_origin.view_details")):m.a.createElement("div",{className:E.a.textEnd},e("message.bundel_deal.end"));return m.a.createElement("div",{className:E.a.footer,onClick:function(){n===M&&(window.open(s),o.props.track("bundle_deal_button","click"))}},i)}},{key:"renderProductList",value:function(e,t,n){var a=this;return e.map((function(e){var r=e.name,o=e.price,s=e.image,c=e.item_id,i=e.image_hash,u=Object(O.formatPrice)(o,n),l="https://".concat(Object(O.getMallUrl)(n),"/product/").concat(t,"/").concat(c,"/");return m.a.createElement(S.a,{key:e.item_id,name:r,price:u,image:s,imageHash:i,url:l,id:c,trackItem:a.trackItem})}))}},{key:"transValue",value:function(e){return e/1e5}},{key:"trackItem",value:function(e){this.props.track("bundle_deal_items","click",{itemid:e})}},{key:"renderHeaderText",value:function(t,n,a){var r=t.rule_type,o=t.min_amount,s=t.fix_price,c=t.discount_percentage,i=t.discount_value,u=this.transValue(s),l=this.transValue(c);"tw"===(a||"").toLowerCase()&&(l=10-l/10,Number.isInteger(l)||(l=l.toFixed(1)));var d=this.transValue(i),p=1===r?e("message.bundel_deal.header.special_discount_title",{count:o,price:u}):2===r?e("message.bundel_deal.header.percent_discount_title",{count:o,percent:l}):e("message.bundel_deal.header.amount_discount_title",{count:o,price:d}),h="".concat(E.a.header," ").concat(n!==_?E.a.active:E.a.inactive);return m.a.createElement("div",{className:h},p)}},{key:"render",value:function(){var e=this.state.date,t=this.props,n=t.isSend,a=t.content,r=a.bundle_deal_id,o=a.shop_id,s=a.start_time,c=a.end_time,i=a.bundle_rule,u=a.bundle_deal_item_list,l=(t.conversation||{}).shop,d=(l&&l.country?l.country:"SG").toLowerCase();this.status=e<s?C:e<c&&e>s?M:_;var p=u.slice(0,4),h="".concat(E.a.root," ").concat(n?E.a.send:E.a.receive),f=this.renderProductList(p,o,d),v=this.renderHeaderText(i,this.status,d),g=this.renderFooter(s,this.status,d,r);return m.a.createElement("div",{className:h},v,f,g)}}]),a}(m.a.PureComponent);w.propTypes={measure:y.a.func,isSend:y.a.bool,content:y.a.object,conversation:y.a.object,track:y.a.func},t.a=Object(b.a)(w)}).call(this,n("kiXb").t)},s1zR:function(e,t,n){"use strict";(function(e){n("I5cv");var a=n("lwsE"),r=n.n(a),o=n("W8MJ"),s=n.n(o),c=n("PJYZ"),i=n.n(c),u=n("7W2i"),l=n.n(u),d=n("a1gu"),p=n.n(d),h=n("Nsbk"),f=n.n(h),v=(n("2Spj"),n("q1tI")),m=n.n(v),g=n("17x9"),y=n.n(g),b=n("ok/c"),S=n.n(b),R=n("XnKn");function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var O=function(t){l()(a,t);var n=E(a);function a(e){var t;return r()(this,a),(t=n.call(this,e)).handleClickNotices=t.handleClickNotices.bind(i()(t)),t}return s()(a,[{key:"handleClickNotices",value:function(){window.open("https://".concat(Object(R.getMallUrl)(),"/communityRules/"))}},{key:"render",value:function(){var t=this.props.color;return(m.a.createElement("div",{className:S.a.root,style:{color:t}},e("common.blacklist.note_message"),m.a.createElement("span",{className:S.a.learnMore,onClick:this.handleClickNotices},e("common.learn_more"))))}}]),a}(v.PureComponent);O.propTypes={color:y.a.string},t.a=O}).call(this,n("kiXb").t)},"se/o":function(e,t,n){"use strict";var a=n("4j81");t.a=a.CatchStatus},szol:function(e,t,n){"use strict";(function(e){n("I5cv");var a=n("lwsE"),r=n.n(a),o=n("W8MJ"),s=n.n(o),c=n("PJYZ"),i=n.n(c),u=n("7W2i"),l=n.n(u),d=n("a1gu"),p=n.n(d),h=n("Nsbk"),f=n.n(h),v=(n("2Spj"),n("bWfx"),n("q1tI")),m=n.n(v),g=n("17x9"),y=n.n(g),b=n("Smyv"),S=n.n(b),R=n("yghM"),E=n("se/o"),O=n("XnKn"),k=n("kLRj"),C=n("Hxv6"),M=n.n(C);function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var w=function(t){l()(a,t);var n=_(a);function a(e){var t;return r()(this,a),(t=n.call(this,e)).handleScroll=Object(R.c)(t.handleScroll.bind(i()(t)),200),t}return s()(a,[{key:"handleScroll",value:function(e){var t=this.props,n=t.loadMoreOffset,a=t.onLoadMore,r=t.onScroll,o=t.status,s=this.container,c=s.scrollHeight,i=s.scrollTop,u=s.clientHeight;if(o===O.HttpStatus.PENDING)return!1;c-i-u<=n&&this.scrollTop<i&&a&&a(),this.scrollTop=i,r&&r()}},{key:"render",value:function(){var t=this,n=this.props,a=n.listData,r=n.makeItem,o=n.status,s=n.emptyImage,c=n.emptyText,i=void 0===c?e("common.scroll_list.no_data"):c,u=n.style;return m.a.createElement("div",{className:S.a.root,style:u,onScroll:this.handleScroll,ref:function(e){t.container=e}},o===O.HttpStatus.SUCCEED||o===O.HttpStatus.PENDING||o===O.HttpStatus.FAILED?a.length>0?a.map((function(e,t){return r(e,t)})):m.a.createElement(k.a,{classname:S.a.empty,image:s,text:i}):"")}}]),a}(m.a.PureComponent);w.propTypes={onLoadMore:y.a.func,onScroll:y.a.func,listData:y.a.array.isRequired,makeItem:y.a.func.isRequired,status:y.a.string.isRequired,loadMoreOffset:y.a.number,emptyText:y.a.string,emptyImage:y.a.string,style:y.a.object},w.defaultProps={loadMoreOffset:10,emptyImage:M.a,style:{}},t.a=Object(E.a)(w)}).call(this,n("kiXb").t)},tjUo:function(e,t,n){"use strict";n.r(t);n("8+KV"),n("RW0V"),n("QiV6");var a=n("XnKn");Object(a.init)("VN","live","6.0.1.1","vi-VN",{resources:{en:{common:{"common.error.hint_text":"Oops, the page crashed","header.tooltip.close_dialog":"Show message list only","header.tooltip.minimize":"Minimize","header.tooltip.see_all":"Go to the full version of Chat","login_error.tips":"Please try to reload or login the page again."}},"vi-VN":{common:{"common.error.hint_text":"Oops, c li xy ra","header.tooltip.close_dialog":"n ca s Chat","header.tooltip.minimize":"Thu gn","header.tooltip.see_all":"Xem ton b Webchat","login_error.tips":"Uiii, c li ri. Bn vui lng th ng nhp li nh!"}}}});var r=n("q1tI"),o=n.n(r),s=n("i8i4"),c=n.n(s),i=n("/MKj"),u=n("0cfB"),l=n("wNa6"),d=(n("I5cv"),n("lwsE")),p=n.n(d),h=n("W8MJ"),f=n.n(h),v=n("7W2i"),m=n.n(v),g=n("a1gu"),y=n.n(g),b=n("Nsbk"),S=n.n(b),R=n("5se9"),E=n("tvxL");function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=S()(e);if(t){var r=S()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return y()(this,n)}}var k=function(e){m()(n,e);var t=O(n);function n(){return p()(this,n),t.apply(this,arguments)}return f()(n,[{key:"render",value:function(){return o.a.createElement(R.a,this.props)}}]),n}(o.a.PureComponent),C={connectSocket:E.connectSocket,updateOpenedMenu:E.updateOpenedMenu,updateUserRequested:E.updateUserRequested,setToastInformation:E.setToastInformation,updateGuideRequested:E.updateGuideRequested,updateChatWindowStatus:E.updateChatWindowStatus,updateConversationDetailStatus:E.updateConversationDetailStatus,changeConversationStatusRequested:E.changeConversationStatusRequested,closeMediaPreviewModalRequested:E.closeMediaPreviewModalRequested},M=Object(i.b)((function(e){return{newbie:Object(E.newbieSelector)(e),toast:Object(E.toastSelector)(e),isScChat:Object(E.isScChatSelector)(e),showEntry:Object(E.showEntrySelector)(e),openedMenu:Object(E.openedMenuSelector)(e),currentUser:Object(E.currentUserSelector)(e)||{},currentBuyer:Object(E.currentBuyerSelector)(e)||{},isSubAccount:Object(E.isSubAccountSelector)(e),loginSuccess:Object(E.loginSuccessSelector)(e),socketSuccess:Object(E.socketSuccessSelector)(e),showChatWindow:Object(E.showChatWindowSelector)(e),totalUnreadCount:Object(E.totalUnreadConversationsCountSelector)(e),currentConversation:Object(E.currentConversationSelector)(e),currentConversationId:Object(E.currentConversationIdSelector)(e),showConversationDetail:Object(E.showConversationDetailSelector)(e),previewMedias:Object(E.previewMediasSelector)(e),showMediaPreviewModal:Object(E.showMediaPreviewModalSelector)(e),currentPreviewMediaId:Object(E.currentPreviewMediaIdSelector)(e)}}),C)(k),_=(n("p2bk"),n("RIqP"),n("yXPU"),n("o0o1"),n("pIFo"),n("SRfc"),n("eM6i"),n("Btvt"),n("yt8O"),n("rGqo"),n("LpSC"),"CHAT_API");Object(E.initPapSdk)(),Object(E.initSentry)();var w=Object(a.getChatSource)(),I=function(e){return{position:"fixed",right:w?"16px":"8px",bottom:w?"".concat((e?64:0)+16,"px"):0,zIndex:99999}},j={create:function(e){var t,n,a=document.getElementById(e);if(w&&(t=(((n=(window.SellerFramework?window.SellerFramework.app:window.dev)||{}).componentData||{}).FixBottomCard||{}).isFixed,n.on&&n.on("FixBottomCardChange",(function(e){var t=I(e);Object.keys(t).forEach((function(e){a.style[e]=t[e]}))}))),!a){(a=document.createElement("div")).setAttribute("id",e);var r=I(t);Object.keys(r).forEach((function(e){a.style[e]=r[e]})),document.body.appendChild(a)}window.miniChatContainerId=e,function(e,t){c.a.render(o.a.createElement(u.AppContainer,null,o.a.createElement(i.a,{store:l.store},o.a.createElement(e,null))),document.getElementById(t))}(M,e)},startOrderChat:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};w&&!a.entryPoint&&(a.entryPoint=7),l.store.dispatch(Object(E.redirectConversationRequested)({userId:t,shopId:e,orderId:n,entryPointType:a.entryPoint}))},startChatWithText:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};l.store.dispatch(Object(E.redirectConversationRequested)({userId:e,message:t,entryPointType:n.entryPoint}))},startChat:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};l.store.dispatch(Object(E.redirectConversationRequested)({userId:t,shopId:e,productId:n,entryPointType:a.entryPoint}))},minimizeChatWindow:function(){l.store.dispatch(Object(E.updateChatWindowStatus)({shouldShowWindow:!1}))},inNewBie:function(){var e=(l.store.getState().userReducer||{}).newbie,t=void 0===e?[]:e,n=E.SuperCategory.ENTRY;return!!Object(E.newbieCheck)(t,{superType:n,secondaryType:E.SecondaryCategory.MODAL})},updateLoginStatus:function(){l.store.dispatch(Object(E.loginRequested)())},logout:function(){caches&&caches.delete(_),l.store.dispatch(Object(E.forceLogoutRequested)())}};window.ChatEasy=j,"function"==typeof window.chatReady&&window.chatReady(),j.create("shopee-mini-chat-embedded")},vTmi:function(e,t,n){"use strict";(function(e){n("I5cv");var a=n("lwsE"),r=n.n(a),o=n("W8MJ"),s=n.n(o),c=n("PJYZ"),i=n.n(c),u=n("7W2i"),l=n.n(u),d=n("a1gu"),p=n.n(d),h=n("Nsbk"),f=n.n(h),v=(n("2Spj"),n("Z2Ku"),n("91GP"),n("q1tI")),m=n.n(v),g=n("17x9"),y=n.n(g),b=n("SdKD"),S=n("SUBy"),R=n("XnKn"),E=n("tvxL"),O=n("h4gR"),k=n("fVJs"),C=n.n(k),M=n("Pv1U"),_=n.n(M),w=n("OnK9"),I=n.n(w),j=n("Pptl"),T=n.n(j),P=n("KaP/"),N=n.n(P),x=n("4Do4"),D=n.n(x),q=n("Robh"),L=n.n(q),A=n("AdW1"),W=n.n(A),B=n("/IO4"),F=n.n(B);function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var H=function(t){l()(a,t);var n=U(a);function a(e){var t;return r()(this,a),(t=n.call(this,e)).state={hover:!1,opened:!1},t.rootNode=null,t.sendTracker=t.sendTracker.bind(i()(t)),t.handleMouseEvent=t.handleMouseEvent.bind(i()(t)),t.getConversationMenuOptions=t.getConversationMenuOptions.bind(i()(t)),t.handleConversationMenuOpen=t.handleConversationMenuOpen.bind(i()(t)),t.handleConversationMenuClose=t.handleConversationMenuClose.bind(i()(t)),t.getConversationStatus=t.getConversationStatus.bind(i()(t)),t}return s()(a,[{key:"sendTracker",value:function(e,t){Object(E.tracker)({section:e,type:t})}},{key:"handleConversationMenuOpen",value:function(){this.sendTracker("chat_list","chat_more");var e=this.props;(0,e.updateOpenedMenu)(e.conversation.id),this.setState({opened:!0})}},{key:"handleConversationMenuClose",value:function(){var e=this.props,t=e.conversation,n=e.openedMenu,a=this.state.hover;t.id!==n&&a&&(a=!1),this.setState({hover:a,opened:!1})}},{key:"getConversationMenuOptions",value:function(){var t=this,n=this.props,a=n.conversation,r=n.markConversation,o=n.deleteConversation,s=n.isSubAccount,c=n.closeConversation,i=n.restartConversation,u=n.pinConversation,l=a.status,d=a.pinned,p=a.id,h=a.shop_id,f=a.unread_count,v=void 0===f?0:f,g=a.latest_message_id,y="conversation_list.conversation_cell.menu.",b=[{iconComp:m.a.createElement(O.Icon,{svg:_.a,className:F.a.optionsIcon}),icon:"pin",name:e("common.".concat(d?"un":"","pin")),handleSelect:function(){u({conversationId:p,shopId:s?h:null,isPinned:d}),t.sendTracker("chat_more_dropdown",d?"chat_more_unpin":"chat_more_pin")}},{iconComp:m.a.createElement(O.Icon,{svg:T.a,className:F.a.optionsIcon}),icon:"mark",name:e("".concat(y,"mark_as_").concat(v>0?"read":"unread")),handleSelect:function(){r(h,g,p,v>0,v),t.sendTracker("chat_more_dropdown",v>0?"chat_more_mark_read":"chat_more_mark_unread")}}];return(s?"activated"===l?[{iconComp:m.a.createElement(O.Icon,{svg:N.a,className:F.a.optionsIcon}),icon:"close",name:e("common.close"),handleSelect:function(){c(h,p),t.sendTracker("chat_more_dropdown","chat_more_close")}}].concat(b):[{iconComp:m.a.createElement(O.Icon,{svg:L.a,className:F.a.optionsIcon}),icon:"restart",name:e("common.restart"),handleSelect:function(){i(h,p),t.sendTracker("chat_more_dropdown","chat_more_restart")}},b[0]]:b).concat([{iconComp:m.a.createElement(O.Icon,{svg:D.a,className:"".concat(F.a.optionsIcon," ").concat(F.a.optionDelete)}),icon:"delete",name:e("".concat(y,"delete_chat")),handleSelect:function(){o(p,h),t.sendTracker("chat_more_dropdown","chat_more_delete")}}])}},{key:"getConversationStatus",value:function(t,n,a){return"closed"===t?m.a.createElement("div",{className:F.a.closed},e("common.closed")):["banned"].includes(n)?m.a.createElement("div",{className:F.a.banned},e("common.".concat(n))):a?m.a.createElement("div",{className:F.a.banned},e("common.blocked")):null}},{key:"handleMouseEvent",value:function(e){this.setState({hover:e})}},{key:"render",value:function(){var t=this,n=this.props,a=n.style,r=n.onClick,o=n.isScChat,s=n.draftHash,c=n.openedMenu,i=n.conversation,u=n.currentConversationId,l=n.lastMessage,d=i.status,p=i.pinned,h=i.id,f=i.to_name,v=i.to_avatar,g=i.to_avatar_hash,y=i.unread_count,k=i.flag,M=i.to_status,_=i.is_blocked,w=i.crm_message_preview,j=void 0===w?{}:w,T=i.entry_point,P=l.send_status,N=1===P?"sending":2===P?"failed":"",x=this.state,D=x.hover,q=x.opened,L=this.getConversationStatus(d,M,_),A=h===u,B=y>=1e3?"999+":y,U=this.getConversationMenuOptions(),H=s[h],G=!A&&H,K="failed"===N,V="sending"===N,Y=l,X=Object.assign({},Y,{crm_message_preview:j}),J=Object(E.previewMessage)(X),z=Y.created_at||1e3*Y.created_timestamp,Z=Object(R.customizeTime)(z,{noTodayFlag:!0,noTimeFlag:!0}),Q=m.a.createElement("div",{className:F.a.username,title:f},f),$="closed"!==d&&"feed_story"===T;return m.a.createElement("div",{style:a,ref:function(e){return t.rootNode=e},onClick:function(){return r(i)},className:"".concat(F.a.root," ").concat(A?F.a.highlighted:""),onMouseEnter:function(){return t.handleMouseEvent(!0)},onMouseLeave:function(){return t.handleMouseEvent(!1)}},p&&m.a.createElement(O.Icon,{svg:C.a,className:F.a.pinned}),m.a.createElement("div",{className:F.a.avatar},m.a.createElement(S.a,{avatar:v,avatarHash:g})),m.a.createElement("div",{className:F.a.container},m.a.createElement("div",{className:F.a.upper},$?m.a.createElement("div",{className:F.a.usernameFeedContainer},Q,m.a.createElement("div",{className:F.a.feed},e("conversation_detail.feed_badge"))):Q,L||y>0&&m.a.createElement("div",{className:F.a[o?"unread":"mallUnread"]},B)),m.a.createElement("div",{className:F.a.lower},m.a.createElement("div",{className:F.a.message},G?m.a.createElement(m.a.Fragment,null,m.a.createElement("span",{className:F.a.draft},"[",e("label.draft"),"]"),m.a.createElement("span",{title:G},G)):m.a.createElement(m.a.Fragment,null,K?m.a.createElement(O.Icon,{svg:W.a,className:F.a[N]}):V&&!A?m.a.createElement("span",{className:F.a[N]}):"move"===k&&m.a.createElement("span",{className:F.a.forward},"[",e("label.forward"),"]"),m.a.createElement("span",{title:J},J))),D||q?m.a.createElement(b.a,{placement:"bottom-end",menuKey:h,openedMenu:c,options:U,onOpen:this.handleConversationMenuOpen,onClose:this.handleConversationMenuClose,label:m.a.createElement("div",{id:h,className:F.a.threeDots},m.a.createElement(O.Icon,{svg:I.a,className:"".concat(F.a.threeDotsIcon," ").concat(q?F.a.active:"")}))}):m.a.createElement("div",{className:F.a.timestamp},Z))))}}]),a}(m.a.Component);H.propTypes={style:y.a.object,onClick:y.a.func,isScChat:y.a.bool,draftHash:y.a.object,openedMenu:y.a.string,isSubAccount:y.a.bool,conversation:y.a.object,pinConversation:y.a.func,markConversation:y.a.func,updateOpenedMenu:y.a.func,closeConversation:y.a.func,deleteConversation:y.a.func,restartConversation:y.a.func,currentConversationId:y.a.string,lastMessage:y.a.object},t.a=H}).call(this,n("kiXb").t)},wNa6:function(e,t,n){"use strict";n.r(t);var a=n("ANjH"),r=n("5HXA"),o=n("rRWa"),s=n("RIqP"),c=n.n(s),i=n("o0o1"),u=n.n(i),l=(n("bWfx"),n("5rFJ")),d=(n("RW0V"),n("ioFf"),n("0l/t"),n("mYba"),n("8+KV"),n("jm62"),n("WLL4"),n("HAE/"),n("lSNA")),p=n.n(d),h=n("J4zp"),f=n.n(h),v=(n("DNiP"),n("/8Fb"),n("L9s1"),n("Z2Ku"),n("FH7K"));function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=Object(v.a)({REDUX_RESET:function(){return{}}}).reduxReset,b=n("e7SQ"),S=n("empP"),R=n("jtha"),E=n("tvxL");function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C=u.a.mark(j),M=u.a.mark(T),_=Object(v.a)({UPDATE_FETCH_SHOPS_STATUS:function(e){return{status:e.status}},FETCH_SHOP_AUTH_REQUESTED:function(e){return{shopId:e.shopId}}}),w=_.updateFetchShopsStatus,I=_.fetchShopAuthRequested;function j(e){var t,n;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload.shopId,a.prev=1,a.next=4,Object(l.call)(R.a,{parent:"shop",parentId:t,resource:"auth"});case 4:return n=a.sent,a.abrupt("return",n);case 8:return a.prev=8,a.t0=a.catch(1),a.abrupt("return",{});case 11:case"end":return a.stop()}}),C,null,[[1,8]])}function T(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.takeEvery)(I,j);case 2:case"end":return e.stop()}}),M)}var P=p()({},w,(function(e,t){var n=t.payload.status;return k(k({},e),{},{status:n})})),N=n("OVuk");function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var q=[T,S.c,N.b],L=Object(b.a)(D(D({},P),E.fetchShopIdsActions),{fetchedShopIds:[]}),A=u.a.mark(B),W=u.a.mark(F);function B(e){var t;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=e.payload.resource,n.t0="login"===t,!n.t0){n.next=5;break}return n.next=5,Object(l.put)(Object(E.updateChatEntryStatus)({showEntry:!0}));case 5:return n.next=7,Object(l.put)(Object(E.updateLoginSuccessStatus)({loginSuccess:!1}));case 7:return n.next=9,Object(l.put)(Object(E.forceLogoutRequested)());case 9:case"end":return n.stop()}}),A)}function F(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.takeEvery)(E.handle401ErrorRequested,B);case 2:case"end":return e.stop()}}),W)}var U=n("R/fK");function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var G=[U.d],K=Object(b.a)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},U.a),{status:"succeed",fetchMyOrdersStatus:"succeed",fetchHisOrdersStatus:"succeed",fetchResult:{}}),V=n("WnRE");function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var X=[V.e],J=Object(b.a)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},V.a),{myShopSearchStatus:"",otherShopSearchStatus:"",fetchResult:{},myShopSearchKeyword:"",otherShopSearchKeyword:"",selectedProductTab:"other",allShopSearchStatus:""}),z=n("XnKn"),Z=u.a.mark(Q);function Q(){var e,t;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(l.put)(Object(E.setChatSource)({isScChat:Object(z.getChatSource)()}));case 3:return n.next=5,Object(z.getItem)("mini-session");case 5:return e=n.sent,localStorage.setItem("mini-session",JSON.stringify(e)),n.next=9,Object(l.call)(E.login);case 9:if(t=n.sent,t.user){n.next=13;break}return n.abrupt("return");case 13:return n.next=15,Object(l.call)(E.handleLoginSucceeded,t);case 15:return n.next=17,Object(l.spawn)(E.fetchConversationsRequestedSaga,{payload:{direction:"reset"}});case 17:return n.next=19,Object(l.put)(Object(E.updateLoginSuccessStatus)({loginSuccess:!0}));case 19:return n.next=21,Object(l.put)(Object(E.updateUnreadCount)({type:E.unreadCountActions.REFRESH_TOTAL_UNREAD_CONVERSATION_COUNT}));case 21:n.next=28;break;case 23:return n.prev=23,n.t0=n.catch(0),console.error("[Load Chat Failed]\n",n.t0),n.next=28,Object(l.put)(Object(E.updateLoginSuccessStatus)({loginSuccess:!1}));case 28:case"end":return n.stop()}}),Z,null,[[0,23]])}var $,ee,te={userReducer:E.userReducer,shopReducer:L,orderReducer:K,toastReducer:E.toastReducer,draftReducer:E.draftReducer,offerReducer:E.offerReducer,entityReducer:E.entityReducer,socketReducer:E.socketReducer,messageReducer:E.messageReducer,stickerReducer:E.stickerReducer,productReducer:J,settingsReducer:E.settingsReducer,unreadCountReducer:E.unreadCountReducer,conversationReducer:E.conversationReducer,modalReducer:E.modalReducer,messageShortcutGroupReducer:E.messageShortcutGroupReducer,faqHistoryReducer:E.faqHistoryReducer,mediaPreviewerReducer:E.mediaPreviewerReducer,mediaPreviewModalReducer:E.mediaPreviewModalReducer,translatePreferenceReducer:E.translatePreferenceReducer},ne=($={blacklist:["modalReducer","userReducer"]},ee=te,Object.entries(ee).reduce((function(e,t){var n=f()(t,2),a=n[0],r=n[1];return g(g({},e),{},p()({},a,(function(e,t){return t.type!=="".concat(y)||$.blacklist.includes(a)||(e=void 0),r(e,t)})))}),{})),ae=Object(a.combineReducers)(ne),re=u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.all)([F].concat(c()(E.watchUserSagas),c()(q),c()(E.watchOfferSagas),c()(E.watchToastSagas),c()(E.watchSocketSagas),c()(E.watchUnreadSagas),c()(E.watchStickerSagas),c()(E.watchMessageSagas),c()(X),c()(E.watchConversationSagas),c()(G),c()(E.watchVoucherSagas),c()(E.watchMessageShortcutGroupSagas),c()(E.watchFaqHistorySagas),c()(E.watchTranslationSagas)).map(l.call));case 2:case"end":return e.stop()}}),e)}));n.d(t,"store",(function(){return ce}));var oe=Object(o.default)(),se=Object(a.applyMiddleware)(oe),ce=Object(a.createStore)(ae,Object(r.composeWithDevTools)(se)),ie=oe.run(re);oe.run(Q);!function e(){ie.toPromise().catch((function(t){ie.cancel(),ie=oe.run(re),e()}))}()},waf0:function(e,t,n){"use strict";n("I5cv");var a=n("lwsE"),r=n.n(a),o=n("W8MJ"),s=n.n(o),c=n("PJYZ"),i=n.n(c),u=n("7W2i"),l=n.n(u),d=n("a1gu"),p=n.n(d),h=n("Nsbk"),f=n.n(h),v=(n("2Spj"),n("bWfx"),n("q1tI")),m=n.n(v),g=n("fkjU"),y=n("17x9"),b=n.n(y),S=n("WBRc"),R=n("0K0N"),E=n.n(R);function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var k=function(e){l()(n,e);var t=O(n);function n(){return r()(this,n),t.apply(this,arguments)}return s()(n,[{key:"render",value:function(){var e=this.props,t=e.selected,n=e.keyword,a=e.text,r=e.onClick,o=e.onHover;return(m.a.createElement("div",{className:t?E.a.selected:E.a.root,onClick:r,onMouseEnter:o},m.a.createElement(S.a,{highlightClassName:E.a.highlighted,rows:2,searchWords:n,textToHighlight:a})))}}]),n}(m.a.PureComponent);k.propTypes={keyword:b.a.string,selected:b.a.bool,text:b.a.string,onClick:b.a.func.isRequired,onHover:b.a.func.isRequired};var C=k,M=n("FSDX"),_=n.n(M);function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var I=function(e){l()(n,e);var t=w(n);function n(e){var a;return r()(this,n),(a=t.call(this,e)).handleClickOutside=a.handleClickOutside.bind(i()(a)),a.handleKeyDown=a.handleKeyDown.bind(i()(a)),a.getListRef=a.getListRef.bind(i()(a)),a.selectMessage=a.selectMessage.bind(i()(a)),a.messageListNode=null,a.state={selectedIndex:0},a}return s()(n,[{key:"getListRef",value:function(e){this.messageListNode=e}},{key:"handleKeyDown",value:function(e){e.stopPropagation();var t=this.props,n=t.hints,a=t.onSelectHint,r=this.state.selectedIndex;switch(e.keyCode){case 13:var o=(n[r]||{}).content||"";e.shiftKey||(a(o),e.preventDefault());break;case 38:this.selectMessage("up");break;case 40:this.selectMessage("down")}}},{key:"selectMessage",value:function(e){var t,n=this.state.selectedIndex,a=this.props.hints.length;if(t="up"===e?n-1<0?n-1+a:n-1:n+1>=a?(n+1)%a:n+1,this.messageListNode){var r=this.messageListNode,o=r.children[t];o.offsetTop+o.offsetHeight>r.offsetHeight+r.scrollTop?r.scrollTop=o.offsetTop+o.offsetHeight-r.offsetHeight:o.offsetTop<=r.offsetHeight+r.scrollTop&&(o.offsetTop<r.scrollTop?r.scrollTop=0:r.scrollTop-=o.offsetHeight)}this.setState({selectedIndex:t})}},{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"handleClickOutside",value:function(){this.props.close()}},{key:"render",value:function(){var e=this,t=this.props,n=t.hints,a=t.onSelectHint,r=t.keyword,o=this.state.selectedIndex;return m.a.createElement("div",{className:_.a.root,ref:this.getListRef},n.map((function(t,n){return m.a.createElement(C,{selected:n===o,key:t.id,text:t.content,keyword:r,onClick:function(){a(t.content)},onHover:function(){e.setState({selectedIndex:n})}})})))}}]),n}(m.a.PureComponent);I.propTypes={keyword:b.a.string,hints:b.a.array,close:b.a.func.isRequired,onSelectHint:b.a.func.isRequired};t.a=Object(g.a)(I)},yghM:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return o}));n("eM6i");var a=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=Date.now();return function(){for(var o=arguments.length,s=new Array(o),c=0;c<o;c++)s[c]=arguments[c];t&&(clearTimeout(t),t=null);var i=Date.now();i-r>a?(e.apply(void 0,s),r=Date.now()):t=setTimeout((function(){e.apply(void 0,s),r=Date.now()}),n)}},r=function(e,t,n){var a,r,o,s=null,c=0;n||(n={});var i=function(){c=!1===n.leading?0:(new Date).getTime(),s=null,o=e.apply(a,r),s||(a=r=null)};return function(){var u=(new Date).getTime();c||!1!==n.leading||(c=u);var l=t-(u-c);return a=this,r=arguments,l<=0||l>t?(s&&(clearTimeout(s),s=null),c=u,o=e.apply(a,r),s||(a=r=null)):s||!1===n.trailing||(s=setTimeout(i,l)),o}},o=function(e,t){var n=0;return{check:function(){return e.apply(void 0,arguments)?n+=1:this.reset(),n>=t&&(this.reset(),!0)},reset:function(){n=0}}}},ymbT:function(e,t,n){"use strict";(function(e){n("I5cv");var a=n("lwsE"),r=n.n(a),o=n("W8MJ"),s=n.n(o),c=n("PJYZ"),i=n.n(c),u=n("7W2i"),l=n.n(u),d=n("a1gu"),p=n.n(d),h=n("Nsbk"),f=n.n(h),v=(n("2Spj"),n("q1tI")),m=n.n(v),g=n("2mTb"),y=n.n(g),b=n("17x9"),S=n.n(b),R=n("kiWX"),E=n("zIr9"),O=n.n(E),k=n("KkAs"),C=n.n(k),M=n("VU/q"),_=n.n(M),w=n("h4gR"),I=n("XnKn");function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var T=function(t){l()(a,t);var n=j(a);function a(e){var t;return r()(this,a),(t=n.call(this,e)).renderFooterActions=t.renderFooterActions.bind(i()(t)),t}return s()(a,[{key:"renderFooterActions",value:function(){var t=this.props,n=t.type,a=t.extraProps,r=t.category,o=t.isSend,s=a.sendStatus,c=a.isSendByMe;if("offer"===n){var i=a.offerStatus,u=a.accept,l=a.reject,d=a.conversationStatus,p="".concat(y.a.rejectBtn," ").concat("closed"===d?y.a.disabled:""),h="".concat(y.a.acceptBtn," ").concat("closed"===d?y.a.disabled:""),f=null,v=null;switch(i){case I.OfferStatus.PENDING:v=o?m.a.createElement("div",{className:y.a.statusText},e("common.pending_offer.tips")):m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:p,onClick:l},e("conversation_detail.workstation.offer_panel.reject")),m.a.createElement("div",{className:h,onClick:u},e("conversation_detail.workstation.offer_panel.accept")));break;case I.OfferStatus.ACCEPTED:f=m.a.createElement(w.Icon,{svg:O.a,className:y.a.acceptIcon}),v=m.a.createElement("div",{className:y.a.statusText},e("conversation_detail.message_list.offer_accepted"));break;case I.OfferStatus.REJECTED:f=m.a.createElement(w.Icon,{svg:C.a,className:y.a.rejectIcon}),v=m.a.createElement("div",{className:y.a.statusText},e("conversation_detail.message_list.offer_rejected"));break;case I.OfferStatus.CANCELLED:f=m.a.createElement("div",{className:y.a.rejectIcon}),v=m.a.createElement("div",{className:y.a.statusText},e("conversation_detail.message_list.offer_canceled"))}return(m.a.createElement("div",{className:y.a.actions},f,v))}if("source"===r&&s===I.MSG_STATUS.SUCCEED&&c)return m.a.createElement("div",{className:y.a.sendStatus},m.a.createElement(w.Icon,{svg:_.a,className:y.a.linkArrow}),e("common.order.link_send"))}},{key:"render",value:function(){var t=this.props,n=t.category,a=t.type,r="".concat(y.a.root," ").concat("source"===n?y.a.source:"");return m.a.createElement("div",{className:r},"source"===n&&m.a.createElement("div",{className:y.a.label},e(R.a.source[a])),this.renderFooterActions())}}]),a}(m.a.PureComponent);T.propTypes={extraProps:S.a.object,category:S.a.string.isRequired,type:S.a.string.isRequired,isSend:S.a.bool},t.a=T}).call(this,n("kiXb").t)}});
//# sourceMappingURL=app.748942c6.cce6e771333f80cdbb14.js.map